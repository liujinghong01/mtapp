webpackJsonp([129],{264:function(t,e,s){s(746);var i=s(0)(s(462),s(893),"data-v-3694baee",null);t.exports=i.exports},462:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(6),o=s.n(i),n=s(20),a=s.n(n),c=s(80),r=s(1);e.default={name:"cst_process_list",components:{swipeItem:a.a},data:function(){return{process_list:[],action:"",currItem:{}}},computed:{totalPrice:function(){var t=0;if(this.process_list.length>0){for(var e in this.process_list)parseFloat(this.process_list[e].process_cost)&&(t+=parseFloat(this.process_list[e].process_cost));return t.toFixed(2)}return 0}},mounted:function(){this.compute_id=this.$route.params.compute_id,this.action=this.$route.params.action},activated:function(){var t=r.a.get("process_detail");if(t){if(t.id)for(var e in this.process_list)this.process_list[e].process_name===t.process_name&&(this.process_list[e]=t);else this.process_list.push(t);this.saveData(),r.a.remove("process_detail")}else this.getProcessList()},methods:{getProcessList:function(){var t=this,e={compute_id:this.compute_id};s.i(c.b)(e).then(function(e){console.log(e),t.process_list=e.process_list}).catch(function(t){$toast.show(t.description)})},backClick:function(){history.go(-1)},closeMask:function(){this.currItem.swipe=!1,this.currItem={}},delItem:function(t){var e=this;$dialog.confirm({theme:"ios",title:"确定要删除"+t.process_name+"吗?",cancelText:"取消",okText:"确定"}).then(function(i){if(console.log("confirm result: ",i),i){var o={compute_id:e.compute_id,processItemIds:[t.id]};s.i(c.c)(o).then(function(s){$toast.show("删除成功"),e.process_list=e.process_list.filter(function(e){return e.process_name!=t.process_name})}).catch(function(t){})}})},onItemClick:function(t){if(this.currItem.swipe)return void(this.currItem.swipe=!1);$router.forward({path:"/customerOrder/compute/cst_process_detail",query:{action:this.action,process_detail:encodeURIComponent(o()(t))}})},onSwipeLeft:function(t){this.$set(t,"swipe",!0),this.currItem=t},saveData:function(){var t={compute_id:this.compute_id,process_list:this.process_list};s.i(c.d)(t).then(function(t){console.log(t)}).catch(function(t){$toast.show(t.description)})},addOneProcess:function(){$router.forward({path:"/customerOrder/compute/cst_process_detail",query:{action:"new",process_detail:this.compute_id}})}}}},607:function(t,e,s){e=t.exports=s(225)(),e.push([t.i,"\n.label[data-v-3694baee] {\n  width: 30%;\n  float: left;\n  height: 100%;\n  text-align: left;\n}\n.value[data-v-3694baee] {\n  width: 70%;\n  float: right;\n  text-align: right;\n  padding-right: 15px;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/customerOrder/quotes/compute/cst_process_list.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;EACb,iBAAiB;CAClB;AACD;EACE,WAAW;EACX,aAAa;EACb,kBAAkB;EAClB,oBAAoB;CACrB",file:"cst_process_list.vue",sourcesContent:["\n.label[data-v-3694baee] {\n  width: 30%;\n  float: left;\n  height: 100%;\n  text-align: left;\n}\n.value[data-v-3694baee] {\n  width: 70%;\n  float: right;\n  text-align: right;\n  padding-right: 15px;\n}\n"],sourceRoot:""}])},746:function(t,e,s){var i=s(607);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(226)("f061bece",i,!0)},893:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page"},[s("div",{staticClass:"mw-page-header"},[s("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),s("span",[t._v("加工费明细")]),t._v(" "),s("i",{staticClass:"right"})]),t._v(" "),s("div",{staticClass:"mw-page-content"},[s("list",[s("item",{directives:[{name:"show",rawName:"v-show",value:t.process_list.length>0,expression:"process_list.length>0"}]},[s("p",{staticClass:"label"},[t._v("总计")]),t._v(" "),s("p",{staticClass:"value",staticStyle:{"padding-left":"16px"}},[t._v(t._s(t.totalPrice)+" 元")])]),t._v(" "),t._l(t.process_list,function(e){return s("swipe-item",{attrs:{swipeItemText:"删除",canSwipe:!0,hasArrow:!0,obj:e},on:{SwipeItemClick:t.delItem,ItemClick:t.onItemClick,SwipeLeft:t.onSwipeLeft}},[s("span",{staticClass:"label"},[t._v(t._s(e.process_name))]),s("span",{staticClass:"value"},[t._v(t._s(e.process_cost)+" 元")])])}),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:"edit"===t.action||"new"===t.action,expression:"action ==='edit' || action ==='new'"}],staticClass:"button button-calm button-block button-outline",on:{click:t.addOneProcess}},[t._v("添加加工项目")])],2)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=129.013b5d1b3911f58216be.js.map