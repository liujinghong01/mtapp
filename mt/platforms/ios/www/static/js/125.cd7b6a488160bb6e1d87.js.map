{"version":3,"sources":["webpack:///static/js/125.cd7b6a488160bb6e1d87.js","webpack:///./src/views/user/login/bindWX.vue","webpack:///bindWX.vue","webpack:///./src/views/user/login/bindWX.vue?b197","webpack:///./src/views/user/login/bindWX.vue?dbb0","webpack:///./src/views/user/login/bindWX.vue?e53a"],"names":["webpackJsonp","362","module","exports","__webpack_require__","Component","561","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__utils_sess__","__WEBPACK_IMPORTED_MODULE_1__api_login__","__WEBPACK_IMPORTED_MODULE_2__utils_validate__","__WEBPACK_IMPORTED_MODULE_3_axios__","__WEBPACK_IMPORTED_MODULE_4__components_mw_input__","n","__WEBPACK_IMPORTED_MODULE_4__components_mw_input___default","name","components","MwInput","a","data","username","password","email","phone","login_type","checkCode","isSentCode","downCount","interval","zone","zh","code","en","wechat","created","get","this","$route","query","destory","clearInterval","methods","sendCode","_this","that","requestData","country_code","substr","mobile","type","i","then","res","$toast","show","setInterval","catch","error","description","noBindWX","identity_type","bindWechat","selectCompany","company","console","log","changeZoneCode","$router","forward","checkPhoneIsExist","_this2","trim","length","validPhone","reqData","user","changeType","checkUser","submitLogin","vericode","$store","dispatch","response","action","isOk","isBind","is_bind","uid","token","set","685","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","824","content","locals","972","render","_vm","_h","$createElement","_c","_self","directives","rawName","hideNavbar","expression","staticClass","on","click","$event","go","_v","staticStyle","height","_m","width","margin","display","_s","$t","attrs","placeholder","inputType","model","callback","$$v","margin-top","float","color","background-color","nativeOn","staticRenderFns","text-align","padding-top"],"mappings":"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","file":"static/js/125.cd7b6a488160bb6e1d87.js","sourcesContent":["webpackJsonp([125],{\n\n/***/ 362:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(824)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(561),\n  /* template */\n  __webpack_require__(972),\n  /* scopeId */\n  \"data-v-a3e8f888\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 561:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_sess__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api_login__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_validate__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_axios__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_mw_input__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_mw_input___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_mw_input__);\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'bindWX',\n  components: { MwInput: __WEBPACK_IMPORTED_MODULE_4__components_mw_input___default.a },\n  data: function data() {\n    return {\n      username: '',\n      password: '',\n      email: '',\n      phone: '',\n      login_type: 'phone_with_code',\n      checkCode: '',\n      isSentCode: false,\n      downCount: 60,\n      interval: 0,\n      zone: {\n        zh: '中国',\n        code: '+86',\n        en: 'China'\n      },\n      wechat: {}\n    };\n  },\n  created: function created() {\n    if (__WEBPACK_IMPORTED_MODULE_0__utils_sess__[\"a\" /* default */].get('zoneCode')) {\n      this.zone = __WEBPACK_IMPORTED_MODULE_0__utils_sess__[\"a\" /* default */].get('zoneCode');\n    }\n    this.wechat = this.$route.query.wechat;\n  },\n  destory: function destory() {\n    clearInterval(this.interval);\n  },\n\n  methods: {\n    sendCode: function sendCode() {\n      var _this = this;\n\n      var that = this;\n      this.checkCode = '';\n      var requestData = {\n        country_code: that.zone.code.substr(1),\n        mobile: this.username,\n        type: 1\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__api_login__[\"d\" /* getSMSCode */])(requestData).then(function (res) {\n        that.isSentCode = true;\n        $toast.show('验证码已发送');\n        _this.interval = setInterval(function () {\n          if (that.downCount > 0) {\n            that.downCount--;\n          } else {\n            clearInterval(this.interval);\n            that.downCount = 60;\n            that.isSentCode = false;\n          }\n        }, 1000);\n      }).catch(function (error) {\n        $toast.show(error.description);\n      });\n    },\n    noBindWX: function noBindWX() {\n      var requestData = this.wechat;\n      requestData.identity_type = 'wechat';\n      this.bindWechat(0);\n    },\n    selectCompany: function selectCompany(company) {\n      console.log(company);\n    },\n    changeZoneCode: function changeZoneCode() {\n      $router.forward('/zoneCode');\n    },\n    checkPhoneIsExist: function checkPhoneIsExist() {\n      var _this2 = this;\n\n      if (!this.username || this.username === '' || this.username.trim().length === 0) {\n        $toast.show('手机号不能为空，请检查', 1000);\n        return;\n      }\n      if (!this.validPhone()) {\n        $toast.show('手机号格式有误，请检查');\n        return;\n      }\n      var reqData = {\n        identity_type: 'mobile',\n        user: this.username\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__api_login__[\"b\" /* checkIsEexit */])(reqData).then(function (res) {\n        _this2.validPhone('sendCode');\n      }).catch(function (error) {\n        $toast.show(_this2.username + '尚未注册');\n      });\n    },\n    changeType: function changeType(type) {\n      this.login_type = type;\n      this.username = '';\n      this.email = '';\n      this.password = '';\n      this.checkCode = '';\n      clearInterval(this.interval);\n      this.downCount = 60;\n      this.isSentCode = false;\n    },\n    checkUser: function checkUser() {\n      var that = this;\n\n      if (this.login_type === 'email') {\n        if (!that.email || that.email === '' || that.email.trim().length === 0) {\n          $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n          return;\n        }\n      } else {\n        if (!that.username || that.username === '' || that.username.trim().length === 0) {\n          $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n          return;\n        }\n      }\n      if (that.login_type === 'phone_with_code' && !this.validPhone()) {\n        $toast.show('手机号有误，请检查');\n        return;\n      }\n      if (that.login_type === 'phone_with_pwd' && (!that.password || that.password.trim().length === 0 || !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_validate__[\"c\" /* validatePWD */])(that.password))) {\n        $toast.show('密码有误，请检查', 1000);\n        return;\n      }\n      if (that.login_type === 'phone_with_code' && that.checkCode.trim().length === 0) {\n        $toast.show('验证码不能为空', 1000);\n        return;\n      }\n      if (that.login_type === 'phone_with_code' && !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_validate__[\"d\" /* validIsNumber */])(this.checkCode)) {\n        $toast.show('验证码有误，请检查', 1000);\n        return;\n      }\n      if (that.login_type === 'email') {\n        if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_validate__[\"b\" /* validateEmail */])(that.email)) {\n          $toast.show('邮箱格式有误，请检查', 1000);\n          return;\n        } else if (!that.password || that.password.trim() === '' || that.password.trim().length === 0 || !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_validate__[\"c\" /* validatePWD */])(that.password)) {\n          $toast.show('密码有误，请检查', 1000);\n          return;\n        } else {\n          that.submitLogin();\n        }\n      } else {\n        this.validPhone('login');\n      }\n    },\n    submitLogin: function submitLogin() {\n      var that = this;\n      var requestData = {\n        user: that.login_type === 'email' ? that.email : that.username,\n        identity_type: that.login_type === 'email' ? 'email' : 'mobile'\n      };\n      if (that.login_type === 'phone_with_code') {\n        requestData.vericode = that.checkCode;\n      } else {\n        requestData.password = that.password;\n      }\n      that.$store.dispatch('Login', requestData).then(function (response) {\n        that.bindWechat(1);\n      }).catch(function (error) {\n        $toast.show(error.description, 1000);\n      });\n    },\n    validPhone: function validPhone(action) {\n      var that = this;\n      if (!that.username || that.username === '') {\n        $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n        return;\n      }\n\n      var isOk = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_validate__[\"a\" /* validatePhone */])(that.username);\n      if (!isOk) {\n        $toast.show('手机号不正确，请检查', 1000);\n        return isOk;\n      }\n      if (action === 'login') {\n        if (isOk) {\n          this.submitLogin();\n        }\n      } else if (action === 'sendCode') {\n        if (isOk) {\n          that.sendCode();\n        }\n      } else {\n        return isOk;\n      }\n    },\n    bindWechat: function bindWechat(isBind) {\n      var reqData = this.wechat;\n      var that = this;\n      reqData.is_bind = isBind;\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__api_login__[\"g\" /* bindWX */])(reqData).then(function (res) {\n        if (!isBind) {\n          that.$store.dispatch('setTokenAndUid', { uid: res.uid, token: res.token });\n        }\n        that.$store.dispatch('GetInfo').then(function (res) {\n          console.log(res);\n          var company = res.company;\n          console.log('company' + company);\n          if (company && company.length > 0) {\n            if (company.length === 1) {\n              that.$store.dispatch('setCompany', company[0]);\n              $router.forward('/home');\n            } else {\n              __WEBPACK_IMPORTED_MODULE_0__utils_sess__[\"a\" /* default */].set('companys', company);\n              $router.forward('/chooseCompany');\n            }\n          } else {\n            console.log('company is null');\n            that.$store.dispatch('setCompany', '');\n            $router.forward('/home');\n          }\n        }).catch(function (error) {\n          $toast.show('网络异常，请稍后重试!', 1000);\n        });\n      }).catch(function (error) {\n        $toast.show('绑定微信失败');\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 685:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(225)();\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.width[data-v-a3e8f888] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-a3e8f888] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.login_type[data-v-a3e8f888] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-a3e8f888] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-a3e8f888] {\\n  width: 50%;\\n  float: right;\\n  background-color: white;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  text-align: center;\\n  box-shadow: none;\\n  font-size: 14px;\\n}\\n.zoneCode[data-v-a3e8f888] {\\n  height: 49px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-a3e8f888] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-a3e8f888] {\\n    color: black;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/user/login/bindWX.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,WAAW;EACX,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,WAAW;EACX,YAAY;CACb;AACD;EACE,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,kBAAkB;EAClB,aAAa;CACd;AACD;EACE,WAAW;EACX,aAAa;EACb,wBAAwB;EACxB,eAAe;EACf,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,iBAAiB;EACjB,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,mBAAmB;IACnB,eAAe;CAClB;AACD;IACI,aAAa;CAChB\",\"file\":\"bindWX.vue\",\"sourcesContent\":[\"\\n.width[data-v-a3e8f888] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-a3e8f888] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.login_type[data-v-a3e8f888] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-a3e8f888] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-a3e8f888] {\\n  width: 50%;\\n  float: right;\\n  background-color: white;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  text-align: center;\\n  box-shadow: none;\\n  font-size: 14px;\\n}\\n.zoneCode[data-v-a3e8f888] {\\n  height: 49px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-a3e8f888] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-a3e8f888] {\\n    color: black;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 824:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(685);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(226)(\"40762c44\", content, true);\n\n/***/ }),\n\n/***/ 972:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(\"绑定账号\")]), _vm._v(\" \"), _c('i')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('div', {\n    staticStyle: {\n      \"height\": \"100%\"\n    }\n  }, [_vm._m(0, false, false), _vm._v(\" \"), (_vm.login_type !== 'email') ? _c('div', {\n    staticStyle: {\n      \"width\": \"70%\",\n      \"margin\": \"0 auto\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline\"\n    }\n  }, [_c('div', {\n    staticClass: \"zoneCode\",\n    on: {\n      \"click\": _vm.changeZoneCode\n    }\n  }, [_c('span', [_vm._v(_vm._s(_vm.$t('region')))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"code\"\n  }, [_vm._v(_vm._s(_vm.zone.zh) + \" (\" + _vm._s(_vm.zone.code) + \")\")])])]), _vm._v(\" \"), _c('mw-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('enter-phone'),\n      \"inputType\": \"tel\"\n    },\n    model: {\n      value: (_vm.username),\n      callback: function($$v) {\n        _vm.username = $$v\n      },\n      expression: \"username\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"margin-top\": \"5px\"\n    }\n  }, [_c('mw-input', {\n    staticStyle: {\n      \"width\": \"50%\",\n      \"float\": \"left\"\n    },\n    attrs: {\n      \"placeholder\": _vm.$t('enter-sms-code'),\n      \"inputType\": \"tel\"\n    },\n    model: {\n      value: (_vm.checkCode),\n      callback: function($$v) {\n        _vm.checkCode = $$v\n      },\n      expression: \"checkCode\"\n    }\n  }), _vm._v(\" \"), (!_vm.isSentCode) ? _c('div', {\n    staticClass: \"getCode\",\n    on: {\n      \"click\": _vm.checkPhoneIsExist\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code')))]) : _c('div', {\n    staticClass: \"getCode\",\n    staticStyle: {\n      \"color\": \"#bbbbbb\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.$t('get-sms-code-again')) + \"(\" + _vm._s(_vm.downCount) + \")\\n          \")])], 1)], 1) : _c('div', {\n    staticStyle: {\n      \"width\": \"70%\",\n      \"margin\": \"0 auto\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"height\": \"49px\"\n    }\n  }), _vm._v(\" \"), _c('mw-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('enter-email'),\n      \"inputType\": \"email\"\n    },\n    model: {\n      value: (_vm.email),\n      callback: function($$v) {\n        _vm.email = $$v\n      },\n      expression: \"email\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"margin-top\": \"5px\"\n    }\n  }, [_c('mw-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('enter-password'),\n      \"inputType\": \"password\"\n    },\n    model: {\n      value: (_vm.password),\n      callback: function($$v) {\n        _vm.password = $$v\n      },\n      expression: \"password\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"width\"\n  }, [(_vm.login_type === 'email') ? _c('p', {\n    staticClass: \"login_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('phone_with_code')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('login-via-phone')))]) : _c('p', {\n    staticClass: \"login_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('email')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('login-via-email')))]), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"button button-positive button-block\",\n    staticStyle: {\n      \"background-color\": \"#4161b6\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.checkUser($event)\n      }\n    }\n  }, [_vm._v(\"绑定\")]), _vm._v(\" \"), _c('p', {\n    staticStyle: {\n      \"margin-top\": \"15%\",\n      \"color\": \"#416eb6\"\n    },\n    on: {\n      \"click\": _vm.noBindWX\n    }\n  }, [_vm._v(\" 不绑定，直接用微信账号登录\")])], 1)])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"logo\",\n    staticStyle: {\n      \"height\": \"20%\",\n      \"text-align\": \"center\",\n      \"padding-top\": \"8%\",\n      \"width\": \"60%\",\n      \"margin\": \"0 auto\",\n      \"color\": \"#416eb6\"\n    }\n  }, [_c('p', [_vm._v(\"如果您之前注册过MoTooling\")]), _vm._v(\" \"), _c('p', [_vm._v(\"可以将微信绑定至您的账号\")])])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/125.cd7b6a488160bb6e1d87.js","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-a3e8f888&scoped=true!sass-loader?sourceMap!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./bindWX.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindWX.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler?id=data-v-a3e8f888!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bindWX.vue\"),\n  /* scopeId */\n  \"data-v-a3e8f888\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/login/bindWX.vue\n// module id = 362\n// module chunks = 125","<template>\n  <div class=\"mw-page page\" v-nav=\"{hideNavbar:true}\">\n    <div class=\"mw-page-header\">\n      <i class=\"left icon ion-ios-arrow-back\" @click=\"$router.go(-1)\"></i>\n      <span>绑定账号</span>\n      <i></i>\n    </div>\n    <div class=\"mw-page-content\">\n      <div style=\"height: 100%\">\n        <div class=\"logo\" style=\"height:20%;text-align: center;padding-top: 8%;width: 60%;margin: 0 auto;color: #416eb6\">\n          <p>如果您之前注册过MoTooling</p>\n          <p>可以将微信绑定至您的账号</p>\n        </div>\n        <!--非邮箱登录-->\n        <div style=\"width: 70%;margin:0 auto\" v-if=\"login_type!=='email'\">\n          <div style=\"display: inline;\">\n            <div class=\"zoneCode\" @click=\"changeZoneCode\">\n              <span>{{$t('region')}}</span>\n              <span class=\"code\">{{zone.zh}} ({{zone.code}})</span>\n            </div>\n          </div>\n          <mw-input :placeholder=\"$t('enter-phone')\" inputType=\"tel\" v-model=\"username\"></mw-input>\n          <div style=\"margin-top: 5px\">\n            <mw-input :placeholder=\"$t('enter-sms-code')\" inputType=\"tel\" v-model=\"checkCode\"\n                      style=\"width: 50%;float:left\"></mw-input>\n            <div v-if=\"!isSentCode\" class=\"getCode\" @click=\"checkPhoneIsExist\">{{$t('get-sms-code')}}</div>\n            <div v-else=\"isSentCode\" class=\"getCode\" style=\"color: #bbbbbb\">\n              {{$t('get-sms-code-again')}}({{downCount}})\n            </div>\n          </div>\n        </div>\n        <!--邮箱登录-->\n        <div style=\"width: 70%;margin: 0 auto\" v-else>\n          <div style=\"height: 49px\"></div>\n          <mw-input :placeholder=\"$t('enter-email')\" inputType=\"email\" v-model=\"email\"></mw-input>\n          <div style=\"margin-top: 5px\">\n            <mw-input :placeholder=\"$t('enter-password')\" inputType=\"password\" v-model=\"password\"></mw-input>\n          </div>\n        </div>\n        <div class=\"width\">\n          <p class=\"login_type\" v-if=\"login_type==='email'\" @click=\"changeType('phone_with_code')\">{{$t('login-via-phone')}}</p>\n          <p class=\"login_type\" v-else @click=\"changeType('email')\">{{$t('login-via-email')}}</p>\n          <!--<p class=\"login_type right\" @click=\"$router.forward('/regist')\">注册</p>-->\n          <md-button class=\"button button-positive button-block\" style=\"background-color: #4161b6;\" @click.native=\"checkUser\">绑定</md-button>\n          <p style=\"margin-top: 15%;color: #416eb6\" @click=\"noBindWX\"> 不绑定，直接用微信账号登录</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\n  import sess from '@/utils/sess'\n  import {login, getSMSCode,checkIsEexit,bindWX} from '@/api/login'\n  import {validateEmail, validIsNumber, validatePhone, validatePWD} from '@/utils/validate'\n  import  axios  from 'axios'\n  import MwInput from \"../../../components/mw-input\";\n\n  export default {\n    name: 'bindWX',\n    components: {MwInput},\n    data(){\n      return {\n        username: '',\n        password: '',\n        email: '',\n        phone: '',\n        login_type: 'phone_with_code',\n        checkCode: '',\n        isSentCode: false,\n        downCount: 60,   //倒计时\n        interval: 0,   //计时器\n        zone: {\n          zh: '中国',\n          code: '+86',\n          en: 'China'\n        },\n        wechat:{}\n      }\n    },\n    created(){\n      if (sess.get('zoneCode')) {\n        this.zone = sess.get('zoneCode')\n      }\n      this.wechat = this.$route.query.wechat\n    },\n    destory() {\n      clearInterval(this.interval)\n    },\n    methods: {\n      sendCode(){  //发送验证码\n        const that = this;\n        this.checkCode = '';\n        const requestData = {\n          country_code: that.zone.code.substr(1),\n          mobile: this.username,\n          type: 1\n        };\n        getSMSCode(requestData).then(res => {\n          that.isSentCode = true;\n          $toast.show('验证码已发送')\n          this.interval = setInterval(function () {\n            if (that.downCount > 0) {\n              that.downCount--;\n            } else {\n              clearInterval(this.interval);\n              that.downCount = 60\n              that.isSentCode = false;\n            }\n          }, 1000)\n        }).catch(error => {\n          $toast.show(error.description)\n        })\n      },\n      noBindWX(){ // 不绑定微信\n        let requestData = this.wechat\n        requestData.identity_type = 'wechat'\n        this.bindWechat(0)\n      },\n      selectCompany(company){\n        console.log(company)\n      },\n      changeZoneCode(){\n        $router.forward('/zoneCode')\n      },\n      checkPhoneIsExist(){\n        if (!this.username || this.username === '' || this.username.trim().length === 0) {\n          $toast.show('手机号不能为空，请检查', 1000);\n          return;\n        }\n        if (!this.validPhone()) {\n          $toast.show('手机号格式有误，请检查')\n          return;\n        }\n        const reqData = {\n          identity_type:'mobile',\n          user:this.username\n        }\n        checkIsEexit(reqData).then(res=>{\n          this.validPhone('sendCode')\n        }).catch(error=>{\n          $toast.show(this.username+'尚未注册');\n        })\n      },\n      changeType(type){\n        this.login_type = type\n        this.username = ''\n        this.email = ''\n        this.password = ''\n        this.checkCode = ''\n        clearInterval(this.interval);\n        this.downCount = 60\n        this.isSentCode = false;\n      },\n      checkUser(){\n        //TODO  验证手机号\n        const that = this;\n\n        if (this.login_type === 'email') {\n          if (!that.email || that.email === '' || that.email.trim().length === 0) {\n            $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n            return;\n          }\n        } else {\n          if (!that.username || that.username === '' || that.username.trim().length === 0) {\n            $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n            return;\n          }\n        }\n        if (that.login_type === 'phone_with_code' && !this.validPhone()) {\n          $toast.show('手机号有误，请检查')\n          return;\n        }\n        if (that.login_type === 'phone_with_pwd' && (!that.password || that.password.trim().length === 0 || !validatePWD(that.password))) {\n          $toast.show('密码有误，请检查', 1000);\n          return;\n        }\n        if (that.login_type === 'phone_with_code' && that.checkCode.trim().length === 0) {\n          $toast.show('验证码不能为空', 1000);\n          return;\n        }\n        if (that.login_type === 'phone_with_code' && (!validIsNumber(this.checkCode))) {\n          $toast.show('验证码有误，请检查', 1000);\n          return;\n        }\n        if (that.login_type === 'email') {\n          if (!validateEmail(that.email)) {\n            $toast.show('邮箱格式有误，请检查', 1000);\n            return;\n          } else if (!that.password || that.password.trim() === '' || that.password.trim().length === 0 || !validatePWD(that.password)) {\n            $toast.show('密码有误，请检查', 1000);\n            return;\n          } else {\n            that.submitLogin();\n          }\n        } else {\n          this.validPhone('login')\n        }\n      },\n      submitLogin(){\n        const that = this;\n        let requestData = {\n          user: that.login_type === 'email' ? that.email : that.username,\n          identity_type: that.login_type === 'email' ? 'email' : 'mobile',\n        };\n        if (that.login_type === 'phone_with_code') {\n          //如果是验证码登录\n          requestData.vericode = that.checkCode\n        } else {\n          //如果是密码登录\n          requestData.password = that.password\n        }\n        that.$store.dispatch('Login', requestData).then(response => {\n          that.bindWechat(1)\n        }).catch(error => {\n          $toast.show(error.description, 1000);\n        })\n      },\n      validPhone(action){\n        const that = this\n        if (!that.username || that.username === '') {\n          $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n          return;\n        }\n        //TODO 检查手机号是否正确   这里应该封装成一个方法\n        let isOk = validatePhone(that.username)\n        if (!isOk) {\n          $toast.show('手机号不正确，请检查', 1000)\n          return isOk\n        }\n        if (action === 'login') {\n          if (isOk) {\n            this.submitLogin()\n          }\n        } else if (action === 'sendCode') {\n          if (isOk) {\n            that.sendCode()\n          }\n        } else {\n          return isOk\n        }\n        //18988754370   2,4,5,7,8,9,10,11,12\n//        axios.post('http://www.motooling.com:8080/motooling/api/msg/valid',{country_code:that.zone.code.substr(1),mobile:that.username}).then(res=>{\n//          if(res.data.data.result_code === 1){\n//            if(action==='login'){\n//              that.submitLogin();\n//            }else if(action==='sendCode') {\n//              that.sendCode()\n//            }else {\n//                return true\n//            }\n//\n//          }else{\n//            $toast.show('无效的手机号')\n//            return false;\n//          }\n//        }).catch(error=>{\n//          $toast.show('无效的手机号')\n//          console.log('error'+error);\n//          return false\n//        })\n      },\n      bindWechat(isBind){\n        let reqData = this.wechat\n        let that = this\n        reqData.is_bind = isBind\n        bindWX(reqData).then(res=>{\n          if (!isBind){\n            that.$store.dispatch('setTokenAndUid',{uid:res.uid,token:res.token})\n          }\n          that.$store.dispatch('GetInfo').then(res => {\n            console.log(res);\n            const company = res.company;\n            console.log('company' + company)\n            if (company && company.length > 0) {\n              //跳转到选择公司页面\n              if (company.length === 1) {\n                that.$store.dispatch('setCompany', company[0]);\n                $router.forward('/home');\n              } else {\n                sess.set('companys', company);\n                $router.forward('/chooseCompany');\n              }\n            } else {\n              console.log('company is null')\n              that.$store.dispatch('setCompany', '');\n              $router.forward('/home');\n            }\n          }).catch(error => {\n            $toast.show('网络异常，请稍后重试!', 1000);\n          })\n        }).catch(error=>{\n          $toast.show('绑定微信失败')\n        })\n      }\n    }\n  }\n</script>\n\n<style type='stylesheet/scss' lang='scss' scoped>\n  .width {\n    width: 70%;\n    margin: 0 auto;\n    text-align: center;\n  }\n\n  .checkCode {\n    width: 50%;\n    padding: 0;\n    float: left;\n  }\n\n  .login_type {\n    color: #416eb6;\n    text-align: left;\n    padding: 10px 2px;\n    display: inline;\n    float: left;\n  }\n\n  .right {\n    text-align: right;\n    float: right;\n  }\n\n  .getCode {\n    width: 50%;\n    float: right;\n    background-color: white;\n    color: #416eb6;\n    line-height: 50px;\n    height: 50px;\n    text-align: center;\n    box-shadow: none;\n    font-size: 14px;\n  }\n\n  .zoneCode {\n    height: 49px;\n    line-height: 49px;\n    text-align: left;\n    span {\n      padding-left: 15px;\n      color: #9c9c9c;\n    }\n    .code {\n      color: black;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// bindWX.vue?58ebd851","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.width[data-v-a3e8f888] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-a3e8f888] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.login_type[data-v-a3e8f888] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-a3e8f888] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-a3e8f888] {\\n  width: 50%;\\n  float: right;\\n  background-color: white;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  text-align: center;\\n  box-shadow: none;\\n  font-size: 14px;\\n}\\n.zoneCode[data-v-a3e8f888] {\\n  height: 49px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-a3e8f888] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-a3e8f888] {\\n    color: black;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/user/login/bindWX.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,WAAW;EACX,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,WAAW;EACX,YAAY;CACb;AACD;EACE,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,kBAAkB;EAClB,aAAa;CACd;AACD;EACE,WAAW;EACX,aAAa;EACb,wBAAwB;EACxB,eAAe;EACf,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,iBAAiB;EACjB,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,mBAAmB;IACnB,eAAe;CAClB;AACD;IACI,aAAa;CAChB\",\"file\":\"bindWX.vue\",\"sourcesContent\":[\"\\n.width[data-v-a3e8f888] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-a3e8f888] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.login_type[data-v-a3e8f888] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-a3e8f888] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-a3e8f888] {\\n  width: 50%;\\n  float: right;\\n  background-color: white;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  text-align: center;\\n  box-shadow: none;\\n  font-size: 14px;\\n}\\n.zoneCode[data-v-a3e8f888] {\\n  height: 49px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-a3e8f888] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-a3e8f888] {\\n    color: black;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-a3e8f888&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/user/login/bindWX.vue\n// module id = 685\n// module chunks = 125","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-a3e8f888&scoped=true!../../../../node_modules/sass-loader/lib/loader.js?sourceMap!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./bindWX.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"40762c44\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-a3e8f888&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/user/login/bindWX.vue\n// module id = 824\n// module chunks = 125","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(\"绑定账号\")]), _vm._v(\" \"), _c('i')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('div', {\n    staticStyle: {\n      \"height\": \"100%\"\n    }\n  }, [_vm._m(0, false, false), _vm._v(\" \"), (_vm.login_type !== 'email') ? _c('div', {\n    staticStyle: {\n      \"width\": \"70%\",\n      \"margin\": \"0 auto\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline\"\n    }\n  }, [_c('div', {\n    staticClass: \"zoneCode\",\n    on: {\n      \"click\": _vm.changeZoneCode\n    }\n  }, [_c('span', [_vm._v(_vm._s(_vm.$t('region')))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"code\"\n  }, [_vm._v(_vm._s(_vm.zone.zh) + \" (\" + _vm._s(_vm.zone.code) + \")\")])])]), _vm._v(\" \"), _c('mw-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('enter-phone'),\n      \"inputType\": \"tel\"\n    },\n    model: {\n      value: (_vm.username),\n      callback: function($$v) {\n        _vm.username = $$v\n      },\n      expression: \"username\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"margin-top\": \"5px\"\n    }\n  }, [_c('mw-input', {\n    staticStyle: {\n      \"width\": \"50%\",\n      \"float\": \"left\"\n    },\n    attrs: {\n      \"placeholder\": _vm.$t('enter-sms-code'),\n      \"inputType\": \"tel\"\n    },\n    model: {\n      value: (_vm.checkCode),\n      callback: function($$v) {\n        _vm.checkCode = $$v\n      },\n      expression: \"checkCode\"\n    }\n  }), _vm._v(\" \"), (!_vm.isSentCode) ? _c('div', {\n    staticClass: \"getCode\",\n    on: {\n      \"click\": _vm.checkPhoneIsExist\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code')))]) : _c('div', {\n    staticClass: \"getCode\",\n    staticStyle: {\n      \"color\": \"#bbbbbb\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.$t('get-sms-code-again')) + \"(\" + _vm._s(_vm.downCount) + \")\\n          \")])], 1)], 1) : _c('div', {\n    staticStyle: {\n      \"width\": \"70%\",\n      \"margin\": \"0 auto\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"height\": \"49px\"\n    }\n  }), _vm._v(\" \"), _c('mw-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('enter-email'),\n      \"inputType\": \"email\"\n    },\n    model: {\n      value: (_vm.email),\n      callback: function($$v) {\n        _vm.email = $$v\n      },\n      expression: \"email\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"margin-top\": \"5px\"\n    }\n  }, [_c('mw-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('enter-password'),\n      \"inputType\": \"password\"\n    },\n    model: {\n      value: (_vm.password),\n      callback: function($$v) {\n        _vm.password = $$v\n      },\n      expression: \"password\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"width\"\n  }, [(_vm.login_type === 'email') ? _c('p', {\n    staticClass: \"login_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('phone_with_code')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('login-via-phone')))]) : _c('p', {\n    staticClass: \"login_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('email')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('login-via-email')))]), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"button button-positive button-block\",\n    staticStyle: {\n      \"background-color\": \"#4161b6\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.checkUser($event)\n      }\n    }\n  }, [_vm._v(\"绑定\")]), _vm._v(\" \"), _c('p', {\n    staticStyle: {\n      \"margin-top\": \"15%\",\n      \"color\": \"#416eb6\"\n    },\n    on: {\n      \"click\": _vm.noBindWX\n    }\n  }, [_vm._v(\" 不绑定，直接用微信账号登录\")])], 1)])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"logo\",\n    staticStyle: {\n      \"height\": \"20%\",\n      \"text-align\": \"center\",\n      \"padding-top\": \"8%\",\n      \"width\": \"60%\",\n      \"margin\": \"0 auto\",\n      \"color\": \"#416eb6\"\n    }\n  }, [_c('p', [_vm._v(\"如果您之前注册过MoTooling\")]), _vm._v(\" \"), _c('p', [_vm._v(\"可以将微信绑定至您的账号\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-a3e8f888!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/login/bindWX.vue\n// module id = 972\n// module chunks = 125"],"sourceRoot":""}