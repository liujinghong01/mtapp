{"version":3,"sources":["webpack:///static/js/85.4a7507ba526642288749.js","webpack:///./src/views/user/login/regist.vue","webpack:///regist.vue","webpack:///./src/views/user/login/regist.vue?d728","webpack:///./src/views/user/login/regist.vue?d5b2","webpack:///./src/views/user/login/regist.vue?3854"],"names":["webpackJsonp","323","module","exports","__webpack_require__","Component","480","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__utils_sess__","__WEBPACK_IMPORTED_MODULE_2__api_login__","__WEBPACK_IMPORTED_MODULE_3__utils_validate__","__WEBPACK_IMPORTED_MODULE_4_axios__","__WEBPACK_IMPORTED_MODULE_5__components_mw_input__","n","__WEBPACK_IMPORTED_MODULE_5__components_mw_input___default","name","components","MwInput","a","data","username","regist_type","checkCode","password","pwd_repeat","email","interval","isSentCode","isSentEmailCode","downCount","downCountEmail","zone","zh","code","en","created","get","this","destory","clearInterval","methods","changeZoneCode","console","log","$router","forward","changeType","type","login_type","checkPhoneIsExist","_this","trim","length","$toast","show","validPhone","reqData","identity_type","user","i","then","res","catch","error","checkUser","that","submitRegist","sendCode","_this2","requestData","country_code","substr","mobile","setInterval","req_data","err","_this3","client_type","response","reqDataLogin","vericode","$store","dispatch","company","set","description","action","isOk","validEmail","492","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","593","content","locals","698","render","_vm","_h","$createElement","_c","_self","directives","rawName","hideNavbar","expression","staticClass","on","click","$event","go","_v","_s","$t","_m","staticStyle","width","margin","ref","margin-top","attrs","inputType","placeholder","model","callback","$$v","background-color","display","flex","color","border-radius","_e","nativeOn","staticRenderFns","height","text-align","padding-top","src"],"mappings":"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","file":"static/js/85.4a7507ba526642288749.js","sourcesContent":["webpackJsonp([85],{\n\n/***/ 323:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(593)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(480),\n  /* template */\n  __webpack_require__(698),\n  /* scopeId */\n  \"data-v-043a0b54\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 480:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_WX__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_sess__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__api_login__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_validate__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_axios__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_mw_input__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_mw_input___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_mw_input__);\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'regist',\n  components: { MwInput: __WEBPACK_IMPORTED_MODULE_5__components_mw_input___default.a },\n  data: function data() {\n    return {\n      username: '',\n      regist_type: 'phone_with_code',\n      checkCode: '',\n      password: '',\n      pwd_repeat: '',\n      email: '',\n      interval: 0,\n      isSentCode: false,\n      isSentEmailCode: false,\n      downCount: 60,\n      downCountEmail: 60,\n      zone: {\n        zh: '中国',\n        code: '+86',\n        en: 'China'\n      }\n    };\n  },\n  created: function created() {\n    if (__WEBPACK_IMPORTED_MODULE_1__utils_sess__[\"a\" /* default */].get('zoneCode')) {\n      this.zone = __WEBPACK_IMPORTED_MODULE_1__utils_sess__[\"a\" /* default */].get('zoneCode');\n    }\n  },\n  destory: function destory() {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  },\n\n  methods: {\n    changeZoneCode: function changeZoneCode() {\n      console.log('zoneCode');\n      $router.forward('/zoneCode');\n    },\n    changeType: function changeType(type) {\n      this.regist_type = type;\n      this.login_type = type;\n      this.username = '';\n      this.email = '';\n      this.password = '';\n      this.checkCode = '';\n      clearInterval(this.interval);\n      this.downCount = 60;\n      this.isSentCode = false;\n    },\n    checkPhoneIsExist: function checkPhoneIsExist() {\n      var _this = this;\n\n      if (!this.username || this.username === '' || this.username.trim().length === 0) {\n        $toast.show('手机号不能为空，请检查', 1000);\n        return;\n      }\n      if (!this.validPhone()) {\n        $toast.show('手机号格式有误，请检查');\n        return;\n      }\n      var reqData = {\n        identity_type: 'mobile',\n        user: this.username\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_login__[\"b\" /* checkIsEexit */])(reqData).then(function (res) {\n        $toast.show(_this.username + '已经存在');\n      }).catch(function (error) {\n        _this.validPhone('sendCode');\n      });\n    },\n    checkUser: function checkUser() {\n      var that = this;\n      if (this.login_type === 'email') {\n        if (!that.email || that.email === '' || that.email.trim().length === 0) {\n          $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n          return;\n        }\n      } else {\n        if (!that.username || that.username === '' || that.username.trim().length === 0) {\n          $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n          return;\n        }\n      }\n\n      if (that.regist_type === 'phone_with_code' && !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_validate__[\"a\" /* validatePhone */])(that.username)) {\n        $toast.show('手机号码错误，请检查', 1000);\n        return;\n      }\n\n      if (that.regist_type === 'email' && !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_validate__[\"b\" /* validateEmail */])(that.email)) {\n        $toast.show('邮箱格式有误，请检查', 1000);\n        return;\n      }\n\n      if (that.regist_type === 'email' && (!that.password || that.password.trim().length === 0 || !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_validate__[\"c\" /* validatePWD */])(that.password))) {\n        if (that.password.length < 6) {\n          $toast.show('密码长度至少6位');\n          return;\n        } else if (that.password.length > 20) {\n          $toast.show('密码长度最长20位');\n          return;\n        } else {\n          $toast.show('密码格式有误，请检查', 1000);\n          return;\n        }\n      }\n      if (!that.checkCode || that.checkCode.trim().length === 0) {\n        $toast.show('验证码不能为空，请检查', 1000);\n        return;\n      }\n      if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_validate__[\"d\" /* validIsNumber */])(this.checkCode)) {\n        $toast.show('验证码格式有误，请检查', 1000);\n        return;\n      }\n      if (that.regist_type === 'email') {\n        that.submitRegist();\n      } else {\n        this.validPhone('regist');\n      }\n    },\n    sendCode: function sendCode(type) {\n      var _this2 = this;\n\n      var that = this;\n      if (type === 'mobile') {\n        var requestData = {\n          country_code: that.zone.code.substr(1),\n          mobile: that.username,\n          type: 0\n        };\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_login__[\"d\" /* getSMSCode */])(requestData).then(function (res) {\n          that.isSentCode = true;\n          $toast.show('验证码已发送');\n          _this2.interval = setInterval(function () {\n            if (that.downCount > 0) {\n              that.downCount--;\n            } else {\n              clearInterval(this.interval);\n              that.downCount = 60;\n              that.isSentCode = false;\n            }\n          }, 1000);\n        }).catch(function (error) {\n          $toast.show('网络繁忙，请稍后重试');\n        });\n      } else if (type === 'email') {\n        var req_data = {\n          email: this.email\n        };\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_login__[\"e\" /* getEmailCode */])(req_data).then(function (res) {\n          that.isSentEmailCode = true;\n          $toast.show('验证码已发送至您的邮箱');\n          _this2.interval = setInterval(function () {\n            if (that.downCountEmail > 0) {\n              that.downCountEmail--;\n            } else {\n              clearInterval(this.interval);\n              that.downCountEmail = 60;\n              that.isSentEmailCode = false;\n            }\n          }, 1000);\n        }).catch(function (err) {\n          $toast.show('网络繁忙，请稍后重试');\n        });\n      }\n    },\n    submitRegist: function submitRegist() {\n      var _this3 = this;\n\n      var that = this;\n      var reqData = {\n        client_type: 2,\n        user: that.regist_type === 'email' ? this.email : this.username,\n        password: that.password,\n        regist_type: that.regist_type === 'email' ? 'email' : 'mobile',\n        code: that.checkCode\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_login__[\"f\" /* regist */])(reqData).then(function (response) {\n        console.log('regist success');\n        var reqDataLogin = {\n          user: that.regist_type === 'email' ? _this3.email : that.username,\n          password: _this3.password,\n          identity_type: that.regist_type === 'email' ? 'email' : 'mobile',\n          vericode: that.checkCode\n        };\n        console.log(reqDataLogin);\n        that.$store.dispatch('Login', reqDataLogin).then(function (res) {\n          $toast.show('恭喜您，注册成功');\n          that.$store.dispatch('GetInfo').then(function (res) {\n            console.log(res);\n            var company = res.company;\n            console.log('company' + company);\n            if (company && company.length > 0) {\n              if (company.length === 1) {\n                that.$store.dispatch('setCompany', company[0]);\n                $router.forward('/home');\n              } else {\n                __WEBPACK_IMPORTED_MODULE_1__utils_sess__[\"a\" /* default */].set('companys', company);\n                $router.forward('/chooseCompany');\n              }\n            } else {\n              console.log('company is null');\n              that.$store.dispatch('setCompany', '');\n              $router.forward('/home');\n            }\n          }).catch(function (error) {\n            $toast.show('网络异常，请稍后重试!', 1000);\n          });\n        }).catch(function (error) {\n          console.log('login error');\n        });\n      }).catch(function (error) {\n        console.log('regist failure');\n\n        $toast.show(error.description, 3000);\n      });\n    },\n    validPhone: function validPhone(action) {\n      var that = this;\n      if (!that.username || that.username === '') {\n        $toast.show('手机号不能为空，请检查', 1000);\n        return;\n      }\n\n      var isOk = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_validate__[\"a\" /* validatePhone */])(that.username);\n      if (!isOk) {\n        $toast.show('手机号不正确，请检查', 1000);\n      }\n      if (action === 'regist') {\n        if (isOk) {\n          this.submitRegist();\n        }\n      } else if (action === 'sendCode') {\n        if (isOk) {\n          that.sendCode('mobile');\n        }\n      } else {\n        return isOk;\n      }\n    },\n    validEmail: function validEmail() {\n      if (!this.email || this.email === '') {\n        $toast.show((this.regist_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\n        return;\n      }\n\n      var isOk = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_validate__[\"b\" /* validateEmail */])(this.email);\n      if (isOk) {\n        this.sendCode('email');\n      } else {\n        $toast.show('邮箱格式错误!', 1000);\n        return;\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 492:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(220)();\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.width[data-v-043a0b54] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-043a0b54] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.regist_type[data-v-043a0b54] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-043a0b54] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-043a0b54] {\\n  width: 50%;\\n  float: right;\\n  background-color: transparent;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  box-shadow: none;\\n  font-size: 14px;\\n  text-align: center;\\n}\\n.zoneCode[data-v-043a0b54] {\\n  height: 58px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-043a0b54] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-043a0b54] {\\n    color: black;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/weibosi/webs-mt/mt/www_dev/src/views/user/login/regist.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,WAAW;EACX,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,WAAW;EACX,YAAY;CACb;AACD;EACE,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,kBAAkB;EAClB,aAAa;CACd;AACD;EACE,WAAW;EACX,aAAa;EACb,8BAA8B;EAC9B,eAAe;EACf,kBAAkB;EAClB,aAAa;EACb,iBAAiB;EACjB,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,mBAAmB;IACnB,eAAe;CAClB;AACD;IACI,aAAa;CAChB\",\"file\":\"regist.vue\",\"sourcesContent\":[\"\\n.width[data-v-043a0b54] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-043a0b54] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.regist_type[data-v-043a0b54] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-043a0b54] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-043a0b54] {\\n  width: 50%;\\n  float: right;\\n  background-color: transparent;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  box-shadow: none;\\n  font-size: 14px;\\n  text-align: center;\\n}\\n.zoneCode[data-v-043a0b54] {\\n  height: 58px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-043a0b54] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-043a0b54] {\\n    color: black;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 593:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(492);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(221)(\"36f8c54c\", content, true);\n\n/***/ }),\n\n/***/ 698:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.$t('regist')))]), _vm._v(\" \"), _c('i')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('div', [_vm._m(0, false, false), _vm._v(\" \"), (_vm.regist_type === 'email') ? _c('div', {\n    staticStyle: {\n      \"width\": \"70%\",\n      \"margin\": \"0 auto\"\n    }\n  }, [_c('mw-input', {\n    ref: \"von_input\",\n    staticClass: \"register-login\",\n    staticStyle: {\n      \"margin-top\": \"8px\"\n    },\n    attrs: {\n      \"inputType\": \"email\",\n      \"placeholder\": _vm.$t('enter-email')\n    },\n    model: {\n      value: (_vm.email),\n      callback: function($$v) {\n        _vm.email = $$v\n      },\n      expression: \"email\"\n    }\n  }), _vm._v(\" \"), _c('mw-input', {\n    staticClass: \"register-login\",\n    staticStyle: {\n      \"margin-top\": \"8px\"\n    },\n    attrs: {\n      \"inputType\": \"password\",\n      \"placeholder\": \"6-16位数字/字母/符号(_*@%&)\"\n    },\n    model: {\n      value: (_vm.password),\n      callback: function($$v) {\n        _vm.password = $$v\n      },\n      expression: \"password\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"background-color\": \"white\",\n      \"display\": \"flex\",\n      \"margin-top\": \"8px\"\n    }\n  }, [_c('mw-input', {\n    staticClass: \"checkCode register-login\",\n    staticStyle: {\n      \"flex\": \"1 1 auto\"\n    },\n    attrs: {\n      \"inputType\": \"tel\",\n      \"placeholder\": _vm.$t('enter-sms-code')\n    },\n    model: {\n      value: (_vm.checkCode),\n      callback: function($$v) {\n        _vm.checkCode = $$v\n      },\n      expression: \"checkCode\"\n    }\n  }), _vm._v(\" \"), (!_vm.isSentEmailCode) ? _c('div', {\n    staticClass: \" getCode\",\n    on: {\n      \"click\": function($event) {\n        _vm.validEmail()\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code')))]) : _c('div', {\n    staticClass: \" getCode\",\n    staticStyle: {\n      \"color\": \"#c8c8c8\"\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code-again')) + \"(\" + _vm._s(_vm.downCountEmail) + \")\")])], 1)], 1) : _c('div', {\n    staticStyle: {\n      \"display\": \"inline\"\n    }\n  }, [_c('div', {\n    staticClass: \"width zoneCode\",\n    on: {\n      \"click\": _vm.changeZoneCode\n    }\n  }, [_c('span', [_vm._v(_vm._s(_vm.$t('region')))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"code\"\n  }, [_vm._v(_vm._s(_vm.zone.zh) + \" (\" + _vm._s(_vm.zone.code) + \")\")])]), _vm._v(\" \"), _c('mw-input', {\n    ref: \"von_input\",\n    staticClass: \"width register-login\",\n    staticStyle: {\n      \"margin-top\": \"8px\"\n    },\n    attrs: {\n      \"inputType\": \"tel\",\n      \"placeholder\": _vm.$t('enter-phone')\n    },\n    model: {\n      value: (_vm.username),\n      callback: function($$v) {\n        _vm.username = $$v\n      },\n      expression: \"username\"\n    }\n  })], 1), _vm._v(\" \"), (_vm.regist_type === 'phone_with_code') ? _c('div', {\n    staticClass: \"width\",\n    staticStyle: {\n      \"display\": \"flex\",\n      \"margin-top\": \"8px\",\n      \"background-color\": \"white\",\n      \"border-radius\": \"5px\"\n    }\n  }, [_c('mw-input', {\n    staticClass: \"checkCode register-login\",\n    staticStyle: {\n      \"flex\": \"1 1 auto\"\n    },\n    attrs: {\n      \"inputType\": \"tel\",\n      \"placeholder\": _vm.$t('enter-sms-code')\n    },\n    model: {\n      value: (_vm.checkCode),\n      callback: function($$v) {\n        _vm.checkCode = $$v\n      },\n      expression: \"checkCode\"\n    }\n  }), _vm._v(\" \"), (!_vm.isSentCode) ? _c('div', {\n    staticClass: \" getCode\",\n    on: {\n      \"click\": _vm.checkPhoneIsExist\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code')))]) : _c('div', {\n    staticClass: \" getCode\",\n    staticStyle: {\n      \"color\": \"#c8c8c8\"\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code-again')) + \"(\" + _vm._s(_vm.downCount) + \")\")])], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"width\"\n  }, [(_vm.regist_type === 'email') ? _c('p', {\n    staticClass: \"regist_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('phone_with_code')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('regist-via-phone')))]) : _c('p', {\n    staticClass: \"regist_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('email')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('regist-via-email')))]), _vm._v(\" \"), _c('p', {\n    staticClass: \"regist_type right\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.forward('/login')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('login')))]), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"button button-positive button-block\",\n    staticStyle: {\n      \"background-color\": \"#4161b6\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.checkUser($event)\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('regist')))])], 1)])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"logo\",\n    staticStyle: {\n      \"height\": \"30%\",\n      \"text-align\": \"center\",\n      \"padding-top\": \"8%\"\n    }\n  }, [_c('img', {\n    attrs: {\n      \"src\": \"static/images/login/logo.png\",\n      \"width\": \"50%\"\n    }\n  })])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/85.4a7507ba526642288749.js","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-043a0b54&scoped=true!sass-loader?sourceMap!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./regist.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./regist.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler?id=data-v-043a0b54!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./regist.vue\"),\n  /* scopeId */\n  \"data-v-043a0b54\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/login/regist.vue\n// module id = 323\n// module chunks = 85","<template>\r\n  <div class=\"mw-page page\" v-nav=\"{hideNavbar:true}\">\r\n    <div class=\"mw-page-header\">\r\n      <i class=\"left icon ion-ios-arrow-back\" @click=\"$router.go(-1)\"></i>\r\n      <span>{{$t('regist')}}</span>\r\n      <i></i>\r\n    </div>\r\n    <div class=\"mw-page-content\">\r\n      <div>\r\n        <div class=\"logo\" style=\"height:30%;text-align: center;padding-top: 8%;\">\r\n          <img src=\"static/images/login/logo.png\" width=\"50%\">\r\n        </div>\r\n          <div style=\"width: 70%;margin: 0 auto\" v-if=\"regist_type==='email'\">\r\n            <mw-input style=\"margin-top: 8px\" class=\"register-login\" inputType=\"email\" v-model=\"email\" :placeholder=\"$t('enter-email')\" ref=\"von_input\"></mw-input>\r\n            <mw-input style=\"margin-top: 8px\" class=\"register-login\" inputType=\"password\" placeholder=\"6-16位数字/字母/符号(_*@%&)\" v-model=\"password\" ></mw-input>\r\n            <div style=\"background-color: white;display:flex;margin-top: 8px;\">\r\n              <mw-input style=\"flex: 1 1 auto\" inputType=\"tel\" class=\"checkCode register-login\" :placeholder=\"$t('enter-sms-code')\" v-model=\"checkCode\"></mw-input>\r\n              <div v-if=\"!isSentEmailCode\"  class=\" getCode\" @click=\"validEmail()\">{{$t('get-sms-code')}}</div>\r\n              <div v-else=\"isSentEmailCode\" class=\" getCode\" style=\"color: #c8c8c8\">{{$t('get-sms-code-again')}}({{downCountEmail}})</div>\r\n            </div>\r\n          </div>\r\n          <div style=\"display: inline;\" v-else >\r\n            <div class=\"width zoneCode\" @click=\"changeZoneCode\">\r\n              <span >{{$t('region')}}</span>\r\n              <span class=\"code\">{{zone.zh}} ({{zone.code}})</span>\r\n            </div>\r\n            <mw-input style=\"margin-top: 8px\" class=\"width register-login\" inputType=\"tel\" v-model=\"username\" :placeholder=\"$t('enter-phone')\" ref=\"von_input\"></mw-input>\r\n          </div>\r\n          <div class=\"width\" v-if=\"regist_type === 'phone_with_code'\"\r\n               style=\"display:flex;margin-top: 8px;background-color: white;border-radius: 5px;\">\r\n            <mw-input inputType=\"tel\" class=\"checkCode register-login\" :placeholder=\"$t('enter-sms-code')\" v-model=\"checkCode\" style=\"flex: 1 1 auto\"></mw-input>\r\n            <div v-if=\"!isSentCode\"  class=\" getCode\" @click=\"checkPhoneIsExist\">{{$t('get-sms-code')}}</div>\r\n            <div v-else=\"isSentCode\" class=\" getCode\" style=\"color: #c8c8c8\">{{$t('get-sms-code-again')}}({{downCount}})</div>\r\n          </div>\r\n        <div class=\"width\">\r\n          <p class=\"regist_type\" v-if=\"regist_type==='email'\" @click=\"changeType('phone_with_code')\">{{$t('regist-via-phone')}}</p>\r\n          <p class=\"regist_type\" v-else @click=\"changeType('email')\">{{$t('regist-via-email')}}</p>\r\n          <p class=\"regist_type right\" @click=\"$router.forward('/login')\">{{$t('login')}}</p>\r\n          <md-button class=\"button button-positive button-block\" style=\"background-color: #4161b6;\" @click.native=\"checkUser\">{{$t('regist')}}</md-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import WX from '@/utils/WX'\r\n  import sess from '@/utils/sess'\r\n  import { regist } from '@/api/login'\r\n  import { validateEmail,validatePWD,validIsNumber,validatePhone } from '@/utils/validate'\r\n  import { getSMSCode,getEmailCode,checkIsEexit } from '@/api/login'\r\n  import axios from 'axios'\r\n  import MwInput from \"../../../components/mw-input\";\r\n\r\n  //13129559455\r\n  export default {\r\n    name:'regist',\r\n    components: {MwInput},\r\n    data(){\r\n      return {\r\n        username:'',\r\n        regist_type:'phone_with_code',  // 'email'  'phone_with_pwd'\r\n        checkCode:'',\r\n        password:'',\r\n        pwd_repeat:'',\r\n        email:'',\r\n        interval:0 ,  //计时器\r\n        isSentCode:false,\r\n        isSentEmailCode:false,\r\n        downCount:60,\r\n        downCountEmail:60,\r\n        zone:{\r\n          zh:'中国',\r\n          code:'+86',\r\n          en:'China'\r\n        }\r\n      }\r\n    },\r\n    created(){\r\n      if(sess.get('zoneCode')){\r\n        this.zone = sess.get('zoneCode')\r\n      }\r\n    },\r\n    destory(){\r\n       if (this.interval) {\r\n         clearInterval(this.interval)\r\n       }\r\n    },\r\n    methods: {\r\n      changeZoneCode(){\r\n        console.log('zoneCode')\r\n        $router.forward('/zoneCode')\r\n      },\r\n      changeType(type){\r\n        this.regist_type = type;\r\n        this.login_type = type\r\n        this.username = ''\r\n        this.email = ''\r\n        this.password = ''\r\n        this.checkCode = ''\r\n        clearInterval(this.interval);\r\n        this.downCount = 60\r\n        this.isSentCode = false;\r\n      },\r\n      checkPhoneIsExist(){\r\n        if (!this.username || this.username === '' || this.username.trim().length === 0) {\r\n          $toast.show('手机号不能为空，请检查', 1000);\r\n          return;\r\n        }\r\n        if (!this.validPhone()) {\r\n          $toast.show('手机号格式有误，请检查')\r\n          return;\r\n        }\r\n        const reqData = {\r\n          identity_type:'mobile',\r\n          user:this.username\r\n        }\r\n        checkIsEexit(reqData).then(res=>{\r\n          $toast.show(this.username+'已经存在');\r\n        }).catch(error=>{\r\n          this.validPhone('sendCode')\r\n        })\r\n      },\r\n\r\n\r\n      checkUser(){\r\n        const that = this;\r\n        if (this.login_type === 'email') {\r\n          if (!that.email || that.email === '' || that.email.trim().length === 0) {\r\n            $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\r\n            return;\r\n          }\r\n        } else {\r\n          if (!that.username || that.username === '' || that.username.trim().length === 0) {\r\n            $toast.show((that.login_type === 'email' ? '邮箱' : '手机号') + '不能为空，请检查', 1000);\r\n            return;\r\n          }\r\n        }\r\n\r\n        if(that.regist_type === 'phone_with_code'&&!validatePhone(that.username)){\r\n          $toast.show('手机号码错误，请检查', 1000);\r\n          return;\r\n        }\r\n\r\n        if(that.regist_type === 'email'&&!validateEmail(that.email)){\r\n          $toast.show('邮箱格式有误，请检查', 1000);\r\n          return;\r\n        }\r\n\r\n        if(that.regist_type === 'email' && (!that.password || that.password.trim().length === 0 || !validatePWD(that.password))){\r\n          if(that.password.length < 6){\r\n            $toast.show('密码长度至少6位')\r\n            return;\r\n          }else if(that.password.length > 20){\r\n            $toast.show('密码长度最长20位')\r\n            return;\r\n          }else{\r\n            $toast.show('密码格式有误，请检查', 1000);\r\n            return;\r\n          }\r\n        }\r\n        if(!that.checkCode || that.checkCode.trim().length===0){\r\n          $toast.show('验证码不能为空，请检查', 1000);\r\n          return;\r\n        }\r\n        if(!validIsNumber(this.checkCode)){\r\n          $toast.show('验证码格式有误，请检查', 1000);\r\n          return;\r\n        }\r\n        if(that.regist_type === 'email'){\r\n          that.submitRegist();\r\n        }else{\r\n          this.validPhone('regist')\r\n        }\r\n      },\r\n      sendCode(type){  //发送验证码\r\n        const that = this;\r\n        if(type === 'mobile'){\r\n          const requestData = {\r\n            country_code:that.zone.code.substr(1),\r\n            mobile:that.username,\r\n            type:0\r\n          };\r\n          getSMSCode(requestData).then( res=>{\r\n            that.isSentCode = true;\r\n            $toast.show('验证码已发送')\r\n            this.interval = setInterval(function () {\r\n              if(that.downCount>0){\r\n                that.downCount -- ;\r\n              }else{\r\n                clearInterval(this.interval);\r\n                that.downCount = 60\r\n                that.isSentCode = false;\r\n              }\r\n            },1000)\r\n          }).catch(error =>{\r\n            $toast.show('网络繁忙，请稍后重试')\r\n          })\r\n\r\n        }else if(type === 'email'){\r\n          let req_data = {\r\n            email:this.email\r\n          }\r\n          getEmailCode(req_data)\r\n            .then(res => {\r\n              that.isSentEmailCode = true;\r\n              $toast.show('验证码已发送至您的邮箱')\r\n              this.interval = setInterval(function () {\r\n                if(that.downCountEmail>0){\r\n                  that.downCountEmail -- ;\r\n                }else{\r\n                  clearInterval(this.interval);\r\n                  that.downCountEmail = 60\r\n                  that.isSentEmailCode = false;\r\n                }\r\n              },1000)\r\n            })\r\n            .catch(err => {\r\n              $toast.show('网络繁忙，请稍后重试')\r\n            })\r\n        }\r\n      },\r\n\r\n      submitRegist(){\r\n        //TODO validate input\r\n        const that = this;\r\n        let reqData = {\r\n          client_type:2,\r\n          user:that.regist_type==='email'?this.email:this.username,\r\n          password:that.password,\r\n          regist_type:that.regist_type==='email'?'email':'mobile',\r\n          code:that.checkCode\r\n        }\r\n        regist(reqData).then(response =>{\r\n          console.log('regist success');\r\n          let reqDataLogin = {\r\n            user:that.regist_type==='email'?this.email:that.username,\r\n            password:this.password,\r\n            identity_type:that.regist_type==='email'?'email':'mobile',\r\n            vericode:that.checkCode\r\n          }\r\n          console.log(reqDataLogin)\r\n          that.$store.dispatch('Login',reqDataLogin).then(res =>{\r\n            $toast.show('恭喜您，注册成功')\r\n            that.$store.dispatch('GetInfo').then(res =>{\r\n              console.log(res);\r\n              const company = res.company;\r\n              console.log('company'+company)\r\n              if(company&&company.length>0){\r\n                //跳转到选择公司页面\r\n                if(company.length===1){\r\n                  that.$store.dispatch('setCompany',company[0]);\r\n                  $router.forward('/home');\r\n                }else{\r\n                  sess.set('companys',company);\r\n                  $router.forward('/chooseCompany');\r\n                }\r\n              }else{\r\n                console.log('company is null')\r\n                that.$store.dispatch('setCompany','');\r\n                $router.forward('/home');\r\n              }\r\n\r\n            }).catch(error=>{\r\n              $toast.show('网络异常，请稍后重试!', 1000);\r\n            })\r\n\r\n          }).catch(error =>{\r\n            console.log('login error');\r\n          })\r\n        }).catch(error =>{\r\n          console.log('regist failure');\r\n\r\n          $toast.show(error.description, 3000);\r\n        })\r\n      },\r\n      validPhone(action){\r\n        const that = this\r\n        if(!that.username || that.username ===''){\r\n          $toast.show('手机号不能为空，请检查', 1000);\r\n          return;\r\n        }\r\n        //TODO 检查手机号是否正确   这里应该封装成一个方法\r\n        let isOk = validatePhone(that.username)\r\n        if (!isOk) {\r\n          $toast.show('手机号不正确，请检查', 1000);\r\n        }\r\n        if(action==='regist'){\r\n          if(isOk) {\r\n            this.submitRegist()\r\n          }\r\n        }else if(action==='sendCode'){\r\n          if(isOk){\r\n            that.sendCode('mobile')\r\n          }\r\n        }else{\r\n          return isOk\r\n        }\r\n\r\n//        axios.post('http://www.motooling.com:8080/motooling/api/msg/valid',{country_code:that.zone.code.substr(1),mobile:that.username}).then(res=>{\r\n//          if(res.data.data.result_code === 1){\r\n//            if(action==='regist'){\r\n//              that.submitRegist()\r\n//            }else if(action==='sendCode') {\r\n//              that.sendCode()\r\n//            }else {\r\n//              return true\r\n//            }\r\n//          }else{\r\n//            $toast.show('无效的手机号')\r\n//            return false;\r\n//          }\r\n//        }).catch(error=>{\r\n//          $toast.show('无效的手机号')\r\n//          console.log('error'+error);\r\n//          return false\r\n//        })\r\n      },\r\n      validEmail(){\r\n        if(!this.email || this.email ===''){\r\n          $toast.show((this.regist_type === 'email'?'邮箱':'手机号')+'不能为空，请检查', 1000);\r\n          return;\r\n        }\r\n        //TODO 检查邮箱是否正确\r\n        let isOk = validateEmail(this.email)\r\n        if(isOk){\r\n          this.sendCode('email')\r\n        }else{\r\n          $toast.show('邮箱格式错误!',1000)\r\n          return;\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style type='stylesheet/scss' lang='scss' scoped>\r\n  .width{\r\n    width:70%;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n  }\r\n  .checkCode{\r\n    width: 50%;\r\n    padding: 0;\r\n    float: left;\r\n  }\r\n  .regist_type{\r\n    color: #416eb6;\r\n    text-align: left;\r\n    padding: 10px 2px;\r\n    display: inline;\r\n    float: left;\r\n  }\r\n  .right{\r\n    text-align: right;\r\n    float: right;\r\n  }\r\n  .getCode{\r\n    width: 50%;\r\n    float: right;\r\n    background-color:transparent;\r\n    color: #416eb6;\r\n    line-height: 50px;\r\n    height: 50px;\r\n    box-shadow: none;\r\n    font-size: 14px;\r\n    text-align: center;\r\n  }\r\n  .zoneCode{\r\n    height: 58px;line-height: 49px;text-align: left;\r\n    span{\r\n      padding-left: 15px;\r\n      color: #9c9c9c;\r\n    }\r\n    .code{\r\n      color: black;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// regist.vue?058774dc","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.width[data-v-043a0b54] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-043a0b54] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.regist_type[data-v-043a0b54] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-043a0b54] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-043a0b54] {\\n  width: 50%;\\n  float: right;\\n  background-color: transparent;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  box-shadow: none;\\n  font-size: 14px;\\n  text-align: center;\\n}\\n.zoneCode[data-v-043a0b54] {\\n  height: 58px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-043a0b54] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-043a0b54] {\\n    color: black;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/weibosi/webs-mt/mt/www_dev/src/views/user/login/regist.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,WAAW;EACX,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,WAAW;EACX,YAAY;CACb;AACD;EACE,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,kBAAkB;EAClB,aAAa;CACd;AACD;EACE,WAAW;EACX,aAAa;EACb,8BAA8B;EAC9B,eAAe;EACf,kBAAkB;EAClB,aAAa;EACb,iBAAiB;EACjB,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,mBAAmB;IACnB,eAAe;CAClB;AACD;IACI,aAAa;CAChB\",\"file\":\"regist.vue\",\"sourcesContent\":[\"\\n.width[data-v-043a0b54] {\\n  width: 70%;\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n.checkCode[data-v-043a0b54] {\\n  width: 50%;\\n  padding: 0;\\n  float: left;\\n}\\n.regist_type[data-v-043a0b54] {\\n  color: #416eb6;\\n  text-align: left;\\n  padding: 10px 2px;\\n  display: inline;\\n  float: left;\\n}\\n.right[data-v-043a0b54] {\\n  text-align: right;\\n  float: right;\\n}\\n.getCode[data-v-043a0b54] {\\n  width: 50%;\\n  float: right;\\n  background-color: transparent;\\n  color: #416eb6;\\n  line-height: 50px;\\n  height: 50px;\\n  box-shadow: none;\\n  font-size: 14px;\\n  text-align: center;\\n}\\n.zoneCode[data-v-043a0b54] {\\n  height: 58px;\\n  line-height: 49px;\\n  text-align: left;\\n}\\n.zoneCode span[data-v-043a0b54] {\\n    padding-left: 15px;\\n    color: #9c9c9c;\\n}\\n.zoneCode .code[data-v-043a0b54] {\\n    color: black;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-043a0b54&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/user/login/regist.vue\n// module id = 492\n// module chunks = 85","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-043a0b54&scoped=true!../../../../node_modules/sass-loader/lib/loader.js?sourceMap!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./regist.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"36f8c54c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-043a0b54&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/user/login/regist.vue\n// module id = 593\n// module chunks = 85","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.$t('regist')))]), _vm._v(\" \"), _c('i')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('div', [_vm._m(0, false, false), _vm._v(\" \"), (_vm.regist_type === 'email') ? _c('div', {\n    staticStyle: {\n      \"width\": \"70%\",\n      \"margin\": \"0 auto\"\n    }\n  }, [_c('mw-input', {\n    ref: \"von_input\",\n    staticClass: \"register-login\",\n    staticStyle: {\n      \"margin-top\": \"8px\"\n    },\n    attrs: {\n      \"inputType\": \"email\",\n      \"placeholder\": _vm.$t('enter-email')\n    },\n    model: {\n      value: (_vm.email),\n      callback: function($$v) {\n        _vm.email = $$v\n      },\n      expression: \"email\"\n    }\n  }), _vm._v(\" \"), _c('mw-input', {\n    staticClass: \"register-login\",\n    staticStyle: {\n      \"margin-top\": \"8px\"\n    },\n    attrs: {\n      \"inputType\": \"password\",\n      \"placeholder\": \"6-16位数字/字母/符号(_*@%&)\"\n    },\n    model: {\n      value: (_vm.password),\n      callback: function($$v) {\n        _vm.password = $$v\n      },\n      expression: \"password\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"background-color\": \"white\",\n      \"display\": \"flex\",\n      \"margin-top\": \"8px\"\n    }\n  }, [_c('mw-input', {\n    staticClass: \"checkCode register-login\",\n    staticStyle: {\n      \"flex\": \"1 1 auto\"\n    },\n    attrs: {\n      \"inputType\": \"tel\",\n      \"placeholder\": _vm.$t('enter-sms-code')\n    },\n    model: {\n      value: (_vm.checkCode),\n      callback: function($$v) {\n        _vm.checkCode = $$v\n      },\n      expression: \"checkCode\"\n    }\n  }), _vm._v(\" \"), (!_vm.isSentEmailCode) ? _c('div', {\n    staticClass: \" getCode\",\n    on: {\n      \"click\": function($event) {\n        _vm.validEmail()\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code')))]) : _c('div', {\n    staticClass: \" getCode\",\n    staticStyle: {\n      \"color\": \"#c8c8c8\"\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code-again')) + \"(\" + _vm._s(_vm.downCountEmail) + \")\")])], 1)], 1) : _c('div', {\n    staticStyle: {\n      \"display\": \"inline\"\n    }\n  }, [_c('div', {\n    staticClass: \"width zoneCode\",\n    on: {\n      \"click\": _vm.changeZoneCode\n    }\n  }, [_c('span', [_vm._v(_vm._s(_vm.$t('region')))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"code\"\n  }, [_vm._v(_vm._s(_vm.zone.zh) + \" (\" + _vm._s(_vm.zone.code) + \")\")])]), _vm._v(\" \"), _c('mw-input', {\n    ref: \"von_input\",\n    staticClass: \"width register-login\",\n    staticStyle: {\n      \"margin-top\": \"8px\"\n    },\n    attrs: {\n      \"inputType\": \"tel\",\n      \"placeholder\": _vm.$t('enter-phone')\n    },\n    model: {\n      value: (_vm.username),\n      callback: function($$v) {\n        _vm.username = $$v\n      },\n      expression: \"username\"\n    }\n  })], 1), _vm._v(\" \"), (_vm.regist_type === 'phone_with_code') ? _c('div', {\n    staticClass: \"width\",\n    staticStyle: {\n      \"display\": \"flex\",\n      \"margin-top\": \"8px\",\n      \"background-color\": \"white\",\n      \"border-radius\": \"5px\"\n    }\n  }, [_c('mw-input', {\n    staticClass: \"checkCode register-login\",\n    staticStyle: {\n      \"flex\": \"1 1 auto\"\n    },\n    attrs: {\n      \"inputType\": \"tel\",\n      \"placeholder\": _vm.$t('enter-sms-code')\n    },\n    model: {\n      value: (_vm.checkCode),\n      callback: function($$v) {\n        _vm.checkCode = $$v\n      },\n      expression: \"checkCode\"\n    }\n  }), _vm._v(\" \"), (!_vm.isSentCode) ? _c('div', {\n    staticClass: \" getCode\",\n    on: {\n      \"click\": _vm.checkPhoneIsExist\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code')))]) : _c('div', {\n    staticClass: \" getCode\",\n    staticStyle: {\n      \"color\": \"#c8c8c8\"\n    }\n  }, [_vm._v(_vm._s(_vm.$t('get-sms-code-again')) + \"(\" + _vm._s(_vm.downCount) + \")\")])], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"width\"\n  }, [(_vm.regist_type === 'email') ? _c('p', {\n    staticClass: \"regist_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('phone_with_code')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('regist-via-phone')))]) : _c('p', {\n    staticClass: \"regist_type\",\n    on: {\n      \"click\": function($event) {\n        _vm.changeType('email')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('regist-via-email')))]), _vm._v(\" \"), _c('p', {\n    staticClass: \"regist_type right\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.forward('/login')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('login')))]), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"button button-positive button-block\",\n    staticStyle: {\n      \"background-color\": \"#4161b6\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.checkUser($event)\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('regist')))])], 1)])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"logo\",\n    staticStyle: {\n      \"height\": \"30%\",\n      \"text-align\": \"center\",\n      \"padding-top\": \"8%\"\n    }\n  }, [_c('img', {\n    attrs: {\n      \"src\": \"static/images/login/logo.png\",\n      \"width\": \"50%\"\n    }\n  })])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-043a0b54!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/login/regist.vue\n// module id = 698\n// module chunks = 85"],"sourceRoot":""}