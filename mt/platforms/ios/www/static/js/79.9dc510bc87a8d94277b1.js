webpackJsonp([79],{270:function(t,e,i){i(604);var a=i(0)(i(427),i(711),"data-v-1ec5d8d4",null);t.exports=a.exports},346:function(t,e,i){"use strict";function a(t){return i.i(m.a)({url:"/api/bom/list",method:"post",data:t})}function n(t){return i.i(m.a)({url:"api/bom_node/list",method:"post",data:t})}function o(t){return i.i(m.a)({url:"/api/bom_node/update",method:"post",data:t})}function s(t){return i.i(m.a)({url:"/api/cascade_type/list",method:"post",data:t})}function r(t){return i.i(m.a)({url:"/api/mat_name/list",method:"post",data:t})}function c(t){return i.i(m.a)({url:"/api/mat_name_spec/list",method:"post",data:t})}function d(t){return i.i(m.a)({url:"/api/cascade_mat/list",method:"post",data:t})}function u(t){return i.i(m.a)({url:"/api/rawnature/list",method:"post",data:t})}function p(t){return i.i(m.a)({url:"/api/rawnature/price",method:"post",data:t})}function l(t){return i.i(m.a)({url:"/api/bom_node/info",method:"post",data:t})}function _(t){return i.i(m.a)({url:"/api/bom_node/delete",method:"post",data:t})}e.k=a,e.i=n,e.h=o,e.a=s,e.b=r,e.c=c,e.d=d,e.e=u,e.g=p,e.f=l,e.j=_;var m=i(7)},427:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(20),n=i.n(a),o=i(346);e.default={name:"bomchildNodes",components:{SwipeItem:n.a},data:function(){return{tabs:["半成品","标准件","电极"],app_flag:"",tabIndex:0,mat_no:"",bom_id:"",node_id:"",mat_type:"",list:[],swipeX:0}},methods:{add:function(){"电极"===this.mat_type?this.$router.forward("/mats/bom/nodeDetail/new/"+this.node_id+"/2/"+this.mat_no):this.$router.forward("/mats/bom/childNodeDetail/new/"+this.node_id+"/materials/"+this.app_flag)},onClick:function(t){"电极"===this.mat_type?$router.forward("/mats/bom/nodes/electrodeList/"+this.bom_id+"/"+t.node_id+"/"+t.mat_type+"/"+t.mat_no+"/"+this.app_flag):$router.forward("/mats/bom/childNodeDetail/check/"+t.node_id+"/materials/"+this.app_flag)},touchstart:function(){this.swipeX=event.targetTouches[0].clientX},touchend:function(){if(event.changedTouches[0].clientX+30<this.swipeX){for(var t=event.currentTarget.parentNode.children,e=0;e<t.length;e++)t[e].classList.contains("active")&&t[e].classList.remove("active");event.currentTarget.classList.add("active")}},offSwipe:function(){event.currentTarget.parentNode.classList.remove("active")},getData:function(){var t=this,e="";"电极"===this.mat_type&&(e="电极");var a={query:{bom_id:this.bom_id,node_id:this.node_id,mat_type:e}};i.i(o.i)(a).then(function(e){t.list=e.bom_node_list}).catch(function(t){$toast.show(t.description)})},bomNodeDelete:function(t,e){var a=this;event.currentTarget.parentNode.classList.remove("active"),$dialog.confirm({theme:"ios",title:"确定要删除吗？",cancelText:"取消",okText:"确定"}).then(function(n){if(n){var s={node_id:t.node_id};i.i(o.j)(s).then(function(t){a.list.splice(e,1),$toast.show("删除成功")}).catch(function(t){$toast.show(t.description)})}})}},activated:function(){this.getData()},mounted:function(){this.bom_id=this.$route.query.bom_id,this.node_id=this.$route.query.node_id,this.mat_type=this.$route.query.type,this.app_flag=this.$route.query.app_flag,this.getData()}}},503:function(t,e,i){e=t.exports=i(220)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"childNodes.vue",sourceRoot:""}])},604:function(t,e,i){var a=i(503);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(221)("dd7c0cd8",a,!0)},711:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page mats"},[i("div",{staticClass:"mw-page-header"},[i("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("span",[t._v("物料列表")]),t._v(" "),i("i",{staticClass:"right"})]),t._v(" "),i("div",{staticClass:"mw-page-content"},t._l(t.list,function(e,a){return i("div",{staticClass:"bom-swipe-item",on:{touchstart:function(e){t.touchstart(e)},touchend:function(e){t.touchend(e)}}},[i("div",{staticClass:"swipe-content",on:{click:function(i){t.onClick(e)}}},[i("div",[i("h3",[t._v("物料编号："),i("span",[t._v(t._s(e.mat_no))])]),t._v(" "),i("h3",[t._v("物料名称："),i("span",[t._v(t._s(e.mat_name))])]),t._v(" "),i("p",[i("span",[t._v("规格尺寸("+t._s(e.spec)+")")])]),t._v(" "),i("p",[i("span",[t._v("材质("+t._s(e.rawnature_name)+")")]),t._v(" "),i("span",[t._v("数量("+t._s(e.total_qty)+")")])])])]),t._v(" "),i("div",{staticClass:"swipe-click",on:{click:function(e){t.offSwipe("点击事件")}}}),t._v(" "),i("div",{staticClass:"swipe-side",on:{click:function(i){t.bomNodeDelete(e,a)}}},[t._v("删除")])])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"step30"!==this.app_flag,expression:"this.app_flag!=='step30'"}],staticClass:"mw-page-footer"},[i("div",{staticClass:"btns"},[i("div",{staticClass:"btn",on:{click:t.add}},[t._v("添加")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=79.9dc510bc87a8d94277b1.js.map