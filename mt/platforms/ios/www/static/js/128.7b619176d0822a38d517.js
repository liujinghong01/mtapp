webpackJsonp([128],{267:function(t,n,e){e(758);var o=e(0)(e(465),e(905),"data-v-44312df4",null);t.exports=o.exports},465:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(14),a=e.n(o),i=e(5),s=e(21),r=e.n(s),c=e(22),A=e(80);n.default={name:"computeDraft",data:function(){return{searchList:[],currCustomer:{cst_company_name:""},compute_history:[],types:[{name:"冲压模",code:"1"},{name:"压铸模",code:"2"},{name:"注塑模",code:"3"}],chosenType:{}}},computed:a()({},e.i(i.a)(["chosenCompany"])),methods:{setCustomer:function(t){this.currCustomer=t,this.searchList.length=0,this.getHistory()},chooseType:function(t){if(t.chosen)return void this.$set(t,"chosen",!1);this.chosenType.name&&(this.chosenType.chosen=!1),this.chosenType=t,this.$set(t,"chosen",!0),this.getHistory()},matchCustomer:r.a.debounce(function(){var t=this,n={};n.cst_sup_name=this.currCustomer.cst_company_name,n.cst_sup_type=1,n.curr_page=1,n.page_size=10,e.i(c.a)(n).then(function(n){$loading.hide(),console.log(n),t.searchList=n.cst_sup}).catch(function(t){$toast.show("搜索出错了!"),console.log(t)})},300),getHistory:function(){var t=this,n={curr_page:1,page_size:15,query:{cst_company_id:this.currCustomer.cst_company_id?[this.currCustomer.cst_company_id]:[],type:this.chosenType.code?[this.chosenType.code]:[],cst_prod_name:"",compute_no:"",approve_step:[]}};e.i(A.m)(n).then(function(n){t.compute_history=n.list}).catch(function(t){$toast.show(t.description)})},ok:function(){return this.currCustomer.cst_company_id?this.chosenType.code?void this.$router.forward({path:"/customerOrder/compute/detail/new/null",query:{cst_company:this.currCustomer,type:this.chosenType}}):void $toast.show("请选模具类型"):void $toast.show("请填写客户信息")},associateCompute:function(t){this.$router.forward("/customerOrder/compute/detail/associate/"+t.compute_id)}},watch:{"currCustomer.cst_company_name":function(){if(0===this.currCustomer.cst_company_name.trim().length)return this.currCustomer.cst_company_id="",void(this.searchList.length=0);this.currCustomer.cst_company_id||this.matchCustomer()}}}},619:function(t,n,e){n=t.exports=e(225)(),n.push([t.i,"\n.searchList[data-v-44312df4] {\n  background-color: whitesmoke;\n  width: 100%;\n  height: auto;\n  position: absolute;\n  z-index: 10;\n  padding-left: 10px;\n}\n.searchList li[data-v-44312df4] {\n    padding: 8px;\n    height: 40px;\n    transition: height .2s;\n}\n.prod-type[data-v-44312df4] {\n  width: 100%;\n  height: auto;\n  margin-top: 10px;\n  background-color: white;\n}\n.prod-type .title[data-v-44312df4] {\n    padding: 10px 15px;\n    width: 100%;\n    margin: 0;\n}\n.prod-type .types[data-v-44312df4] {\n    width: 90%;\n    margin: 0 auto;\n    position: relative;\n    padding-bottom: 5px;\n}\n.prod-type .types li[data-v-44312df4] {\n      padding: 5px 20px;\n      text-align: center;\n      border-radius: 15px;\n      background-color: #FFFFFF;\n      transform: scale(0.8, 0.8);\n      -webkit-transform: scale(0.8, 0.8);\n      /* Chrome, Safari, Opera */\n      -moz-transform: scale(0.8, 0.8);\n      border: thin solid #ababab;\n      color: #ababab;\n      width: 30%;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n      display: inline-block;\n}\n.prod-type .types li.active[data-v-44312df4] {\n        color: #416eb6;\n        border: thin solid #416eb6;\n}\n.compute-history[data-v-44312df4] {\n  width: 100%;\n  margin-top: 10px;\n  background-color: white;\n  position: relative;\n}\n.compute-history .title[data-v-44312df4] {\n    padding: 10px 15px;\n    width: 100%;\n    margin: 0;\n}\n.compute-history .history[data-v-44312df4] {\n    width: 100%;\n    position: absolute;\n    top: 40px;\n    height: auto;\n}\n.compute-history .history span[data-v-44312df4] {\n      width: 45%;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      float: left;\n      padding: 5px;\n      overflow: hidden;\n}\n.btns[data-v-44312df4] {\n  height: 50px;\n  width: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  position: fixed;\n  background-color: white;\n  bottom: 0;\n  -ms-flex-align: center;\n      align-items: center;\n  z-index: 10;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n}\n.btns .btn[data-v-44312df4] {\n    -ms-flex: 1;\n        flex: 1;\n    text-align: center;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/customerOrder/quotes/compute/newDraft.vue"],names:[],mappings:";AACA;EACE,6BAA6B;EAC7B,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,YAAY;EACZ,mBAAmB;CACpB;AACD;IACI,aAAa;IACb,aAAa;IACb,uBAAuB;CAC1B;AACD;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;EACjB,wBAAwB;CACzB;AACD;IACI,mBAAmB;IACnB,YAAY;IACZ,UAAU;CACb;AACD;IACI,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,oBAAoB;CACvB;AACD;MACM,kBAAkB;MAClB,mBAAmB;MACnB,oBAAoB;MACpB,0BAA0B;MAC1B,2BAA2B;MAC3B,mCAAmC;MACnC,2BAA2B;MAC3B,gCAAgC;MAChC,2BAA2B;MAC3B,eAAe;MACf,WAAW;MACX,wBAAwB;MACxB,oBAAoB;MACpB,iBAAiB;MACjB,sBAAsB;CAC3B;AACD;QACQ,eAAe;QACf,2BAA2B;CAClC;AACD;EACE,YAAY;EACZ,iBAAiB;EACjB,wBAAwB;EACxB,mBAAmB;CACpB;AACD;IACI,mBAAmB;IACnB,YAAY;IACZ,UAAU;CACb;AACD;IACI,YAAY;IACZ,mBAAmB;IACnB,UAAU;IACV,aAAa;CAChB;AACD;MACM,WAAW;MACX,wBAAwB;MACxB,oBAAoB;MACpB,YAAY;MACZ,aAAa;MACb,iBAAiB;CACtB;AACD;EACE,aAAa;EACb,YAAY;EACZ,qBAAqB;EACrB,cAAc;EACd,gBAAgB;EAChB,wBAAwB;EACxB,UAAU;EACV,uBAAuB;MACnB,oBAAoB;EACxB,YAAY;EACZ,yCAAyC;CAC1C;AACD;IACI,YAAY;QACR,QAAQ;IACZ,mBAAmB;CACtB",file:"newDraft.vue",sourcesContent:["\n.searchList[data-v-44312df4] {\n  background-color: whitesmoke;\n  width: 100%;\n  height: auto;\n  position: absolute;\n  z-index: 10;\n  padding-left: 10px;\n}\n.searchList li[data-v-44312df4] {\n    padding: 8px;\n    height: 40px;\n    transition: height .2s;\n}\n.prod-type[data-v-44312df4] {\n  width: 100%;\n  height: auto;\n  margin-top: 10px;\n  background-color: white;\n}\n.prod-type .title[data-v-44312df4] {\n    padding: 10px 15px;\n    width: 100%;\n    margin: 0;\n}\n.prod-type .types[data-v-44312df4] {\n    width: 90%;\n    margin: 0 auto;\n    position: relative;\n    padding-bottom: 5px;\n}\n.prod-type .types li[data-v-44312df4] {\n      padding: 5px 20px;\n      text-align: center;\n      border-radius: 15px;\n      background-color: #FFFFFF;\n      transform: scale(0.8, 0.8);\n      -webkit-transform: scale(0.8, 0.8);\n      /* Chrome, Safari, Opera */\n      -moz-transform: scale(0.8, 0.8);\n      border: thin solid #ababab;\n      color: #ababab;\n      width: 30%;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n      display: inline-block;\n}\n.prod-type .types li.active[data-v-44312df4] {\n        color: #416eb6;\n        border: thin solid #416eb6;\n}\n.compute-history[data-v-44312df4] {\n  width: 100%;\n  margin-top: 10px;\n  background-color: white;\n  position: relative;\n}\n.compute-history .title[data-v-44312df4] {\n    padding: 10px 15px;\n    width: 100%;\n    margin: 0;\n}\n.compute-history .history[data-v-44312df4] {\n    width: 100%;\n    position: absolute;\n    top: 40px;\n    height: auto;\n}\n.compute-history .history span[data-v-44312df4] {\n      width: 45%;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      float: left;\n      padding: 5px;\n      overflow: hidden;\n}\n.btns[data-v-44312df4] {\n  height: 50px;\n  width: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  position: fixed;\n  background-color: white;\n  bottom: 0;\n  -ms-flex-align: center;\n      align-items: center;\n  z-index: 10;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n}\n.btns .btn[data-v-44312df4] {\n    -ms-flex: 1;\n        flex: 1;\n    text-align: center;\n}\n"],sourceRoot:""}])},758:function(t,n,e){var o=e(619);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(226)("05c4e5e0",o,!0)},905:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page"},[e("div",{staticClass:"mw-page-header"},[e("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(n){t.$router.go(-1)}}}),t._v(" "),e("span",[t._v("新增核算单")]),t._v(" "),e("i",{staticClass:"right"})]),t._v(" "),e("div",{staticClass:"mw-page-content has-tab"},[e("div",{staticStyle:{position:"relative"}},[e("von-input",{attrs:{type:"text",placeholder:"请输入客户名称",label:"客户名称"},model:{value:t.currCustomer.cst_company_name,callback:function(n){t.$set(t.currCustomer,"cst_company_name",n)},expression:"currCustomer.cst_company_name"}}),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.searchList.length>0,expression:"searchList.length>0"}],staticClass:"searchList"},t._l(t.searchList,function(n){return e("li",{key:n.cst_company_id,on:{click:function(e){t.setCustomer(n)}}},[t._v(t._s(n.cst_company_name))])}))],1),t._v(" "),e("div",{staticClass:"prod-type"},[e("p",{staticClass:"title"},[t._v("产品类型")]),t._v(" "),e("ul",{staticClass:"types"},t._l(t.types,function(n){return e("li",{key:n.code,class:["type",{active:n.chosen}],on:{click:function(e){t.chooseType(n)}}},[t._v("\n            "+t._s(n.name)+"\n          ")])}))]),t._v(" "),e("div",{staticClass:"compute-history"},[e("p",{staticClass:"title"},[t._v("历史核算单")]),t._v(" "),e("list",{staticClass:"history"},t._l(t.compute_history,function(n){return e("item",[e("span",[t._v("客户:"+t._s(n.cst_company_name))]),t._v(" "),e("span",[t._v("类型:"+t._s(n.type_name))]),t._v(" "),e("span",[t._v("编号:"+t._s(n.compute_no))]),t._v(" "),e("span",[t._v("核算日期:"+t._s(n.created_at))]),t._v(" "),e("a",{staticClass:"action",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.associateCompute(n)}}},[t._v("参考")])])}))],1)]),t._v(" "),e("div",{staticClass:"mw-page-footer"},[e("div",{staticClass:"btns"},[e("div",{staticClass:"btn",on:{click:t.ok}},[t._v("确定")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=128.7b619176d0822a38d517.js.map