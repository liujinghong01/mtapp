webpackJsonp([16],{282:function(t,e,a){a(815);var i=a(0)(a(480),a(963),"data-v-89bee6c0",null);t.exports=i.exports},370:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={name:"cstItem",data:function(){return{selectId:"select-"+Math.random().toString(36).substring(3,6)}},props:{label:{type:String,required:!0},value:{type:"",default:""},placeholder:{type:String,default:""},canEdit:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!1},arrowText:{type:[String,Number],default:""},arrowClick:{type:Function},editType:{type:String,default:"text"},isSelect:{type:Boolean,default:!1},options:{type:Array},action:{type:String,default:"check"},color:""},methods:{noteClick:function(){this.arrowClick&&this.arrowClick()},input:function(t){var e=t.target.value;this.$emit("input",e)}}}},371:function(t,e,a){e=t.exports=a(225)(),e.push([t.i,"\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/cstItem.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,mBAAmB;EACnB,wBAAwB;EACxB,qBAAqB;EACrB,cAAc;CACf;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,mBAAmB;IACnB,YAAY;IACZ,UAAU;IACV,gBAAgB;CACnB;AACD;MACM,UAAU;CACf;AACD;IACI,oBAAoB;QAChB,gBAAgB;IACpB,aAAa;IACb,eAAe;IACf,0BAA0B;IAC1B,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,kBAAkB;CACrB;AACD;IACI,mBAAmB;QACf,eAAe;IACnB,kBAAkB;CACrB;AACD;MACM,UAAU;MACV,WAAW;MACX,aAAa;MACb,eAAe;MACf,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,kBAAkB;MAClB,wBAAwB;MACxB,oBAAoB;MACpB,iBAAiB;CACtB;AACD;MACM,aAAa;MACb,kBAAkB;CACvB;AACD;QACQ,sBAAsB;QACtB,YAAY;QACZ,aAAa;QACb,mBAAmB;CAC1B;AACD;IACI,iBAAiB;QACb,aAAa;CACpB;AACD;MACM,aAAa;MACb,eAAe;MACf,kBAAkB;MAClB,mBAAmB;MACnB,oBAAoB;CACzB",file:"cstItem.vue",sourcesContent:["\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n"],sourceRoot:""}])},372:function(t,e,a){var i=a(371);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(226)("6ea14c28",i,!0)},373:function(t,e,a){a(372);var i=a(0)(a(370),a(374),"data-v-19336c8e",null);t.exports=i.exports},374:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"compute-item"},[a("span",{staticClass:"label"},[t._v(t._s(t.label))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"color"!==t.editType,expression:"editType!=='color'"}],staticClass:"value"},[t.canEdit&&"check"!==t.action&&"approve"!==t.action&&"checkOnly"!==t.action?a("input",{ref:"input",attrs:{type:t.editType,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.input}}):a("span",[t._v(t._s(t.value))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"color"===t.editType,expression:"editType==='color'"}],staticClass:"value"},[a("span",{staticClass:"color",style:{background:t.color}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"note"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow&&t.arrowText,expression:"hasArrow&&arrowText"}],staticClass:"item-notes",on:{click:t.noteClick}},[t._v(t._s(t.arrowText))]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"icon ion-ios-arrow-right arrow "})]),t._v(" "),a("div",{staticClass:"hairline-top"})])},staticRenderFns:[]}},381:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={components:{},name:"timePicker",data:function(){return{currIndex:0,scrollTop:"",interval:"",width:"100%",result:[],selectList:[[],[]]}},computed:{},props:{showPicker:{type:Boolean,default:!1,required:!0},pickerType:{type:String,default:"time",required:!0},pickerValue:{},pickerList:{}},methods:{ok:function(){switch(this.pickerType){case"time":this.$emit("chosen",this.result[0]+":"+this.result[1]);break;case"shift":case"radio":this.$emit("chosen",this.result[0])}this.$emit("hideMask")},cancel:function(){this.$emit("hideMask")},touchend:function(){var t=this;t.scrollTop=event.currentTarget.scrollTop;var e=event.currentTarget;clearInterval(t.interval),t.interval=null,t.interval=setInterval(function(){t.scroll(e)},100)},scroll:function(t){if(t.scrollTop==this.scrollTop){clearInterval(this.interval),this.interval=null;var e=Math.round(t.scrollTop/32);t.scrollTop=32*e;var a="";a="radio"===this.pickerType?this.pickerList[e]:t.firstChild.children[e+2].innerText,console.log("取值"+e);for(var i=t.parentNode.children,n=this,o=0;o<i.length;o++)t===i[o]&&(n.result[o]=a)}else this.scrollTop=t.scrollTop},isscroll:function(){for(var t=Math.round(event.currentTarget.scrollTop/32),e=event.currentTarget.firstChild.children,a=0;a<e.length;a++)e[a].classList.contains("active")&&e[a].classList.remove("active"),e[a].classList.contains("activePrev")&&e[a].classList.remove("activePrev");e[t+1].classList.add("activePrev"),e[t+2].classList.add("active")},refresh:function(){var t=this;switch(this.pickerType){case"time":for(var e=0;e<24;e++)this.selectList[0][e]=e<10?"0"+e:e;for(var e=0;e<60;e++)this.selectList[1][e]=e<10?"0"+e:e;var a=document.querySelectorAll(".slideList");if(""!==this.pickerValue&&"请选择时间"!==this.pickerValue&&"请选择"!==this.pickerValue){var i=Number(this.pickerValue.split(":")[0]),n=Number(this.pickerValue.split(":")[1]);i<10&&(i="0"+i),n<10&&(n="0"+n),this.result[0]=i,this.result[1]=n,setTimeout(function(){a[0].scrollTop=32*i,a[1].scrollTop=32*n},100)}else this.result[0]="12",this.result[1]="00",setTimeout(function(){a[0].scrollTop=384,a[1].scrollTop=0},100);break;case"shift":this.selectList=[[]],this.pickerList.forEach(function(e,a){t.selectList[0].push(e.shift_name+"(工作时长:"+Math.floor(e.day_mins/60)+":"+e.day_mins%60+")")});var o=document.querySelectorAll(".slideList");if(""!==this.pickerValue&&"请选择班次"!==this.pickerValue){var s=this.pickerValue;this.result[0]=s;var l=0;this.pickerList.forEach(function(t,e){t.shift_name==s&&(l=e)}),setTimeout(function(){o[0].scrollTop=32*l},100)}else this.result[0]=this.selectList[0][0],setTimeout(function(){o[0].scrollTop=0},100);break;case"radio":this.selectList=[[]],this.pickerList.forEach(function(e,a){t.selectList[0].push(e.val)});var p=document.querySelectorAll(".slideList");if(""===this.pickerValue.id||void 0===this.pickerValue.id||null===this.pickerValue.id)this.result[0]=this.pickerList[0],setTimeout(function(){p[0].scrollTop=0},100);else{var c=this.pickerValue,r=0;this.pickerList.forEach(function(t,e){console.log(t.id+":"+c.id),t.id===c.id&&(r=e)});var d=this;setTimeout(function(){p[0].scrollTop=32*r,d.result[0]=d.pickerList[r]},100)}}this.width=100/this.selectList.length+"%"}},mounted:function(){},watch:{showPicker:function(t,e){clearInterval(this.interval),this.interval=null,t&&(this.filterStr="",this.refresh())}}}},383:function(t,e,a){e=t.exports=a(225)(),e.push([t.i,"\n.mask[data-v-58a8a9ae] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.pickerBox[data-v-58a8a9ae] {\n  width: 100%;\n  height: 205px;\n  background: #f5f5f5;\n  z-index: 100;\n  position: absolute;\n  bottom: -205px;\n  left: 0;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n  transition: all .5s;\n}\n.pickerBox.active[data-v-58a8a9ae] {\n    bottom: 0px;\n}\n.pickerBox .pkHeader[data-v-58a8a9ae] {\n    width: 100%;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n}\n.pickerBox .pkHeader span[data-v-58a8a9ae] {\n      width: 50px;\n      height: 45px;\n      text-align: center;\n      float: left;\n      line-height: 45px;\n}\n.pickerBox .pkHeader span.right[data-v-58a8a9ae] {\n        float: right;\n        color: #4c0;\n}\n.pickerBox .pkBody[data-v-58a8a9ae] {\n    width: 100%;\n    height: 160px;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae] {\n      width: 100%;\n      height: 100%;\n      float: left;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae]::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n}\n.pickerBox .pkBody .slideList div[data-v-58a8a9ae] {\n        width: 100%;\n}\n.pickerBox .pkBody .slideList div p[data-v-58a8a9ae] {\n          height: 32px;\n          line-height: 32px;\n          font-size: 17px;\n          text-align: center;\n          margin: 0;\n          color: #000;\n          opacity: 0.1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.activePrev[data-v-58a8a9ae] {\n            opacity: .4;\n}\n.pickerBox .pkBody .slideList div p.active + p[data-v-58a8a9ae] {\n            opacity: 0.4;\n}\n.pickerBox .pkBody .slideList div p.active + p + p[data-v-58a8a9ae] {\n            opacity: 0.1;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/timePicker.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,0BAA0B;EAC1B,YAAY;CACb;AACD;EACE,YAAY;EACZ,cAAc;EACd,oBAAoB;EACpB,aAAa;EACb,mBAAmB;EACnB,eAAe;EACf,QAAQ;EACR,uCAAuC;EACvC,oBAAoB;CACrB;AACD;IACI,YAAY;CACf;AACD;IACI,YAAY;IACZ,aAAa;IACb,iBAAiB;IACjB,uCAAuC;CAC1C;AACD;MACM,YAAY;MACZ,aAAa;MACb,mBAAmB;MACnB,YAAY;MACZ,kBAAkB;CACvB;AACD;QACQ,aAAa;QACb,YAAY;CACnB;AACD;IACI,YAAY;IACZ,cAAc;CACjB;AACD;MACM,YAAY;MACZ,aAAa;MACb,YAAY;MACZ,mBAAmB;MACnB,kCAAkC;CACvC;AACD;QACQ,SAAS;QACT,UAAU;CACjB;AACD;QACQ,YAAY;CACnB;AACD;UACU,aAAa;UACb,kBAAkB;UAClB,gBAAgB;UAChB,mBAAmB;UACnB,UAAU;UACV,YAAY;UACZ,aAAa;CACtB;AACD;YACY,WAAW;CACtB;AACD;YACY,WAAW;CACtB;AACD;YACY,YAAY;CACvB;AACD;YACY,aAAa;CACxB;AACD;YACY,aAAa;CACxB",file:"timePicker.vue",sourcesContent:["\n.mask[data-v-58a8a9ae] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.pickerBox[data-v-58a8a9ae] {\n  width: 100%;\n  height: 205px;\n  background: #f5f5f5;\n  z-index: 100;\n  position: absolute;\n  bottom: -205px;\n  left: 0;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n  transition: all .5s;\n}\n.pickerBox.active[data-v-58a8a9ae] {\n    bottom: 0px;\n}\n.pickerBox .pkHeader[data-v-58a8a9ae] {\n    width: 100%;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n}\n.pickerBox .pkHeader span[data-v-58a8a9ae] {\n      width: 50px;\n      height: 45px;\n      text-align: center;\n      float: left;\n      line-height: 45px;\n}\n.pickerBox .pkHeader span.right[data-v-58a8a9ae] {\n        float: right;\n        color: #4c0;\n}\n.pickerBox .pkBody[data-v-58a8a9ae] {\n    width: 100%;\n    height: 160px;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae] {\n      width: 100%;\n      height: 100%;\n      float: left;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae]::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n}\n.pickerBox .pkBody .slideList div[data-v-58a8a9ae] {\n        width: 100%;\n}\n.pickerBox .pkBody .slideList div p[data-v-58a8a9ae] {\n          height: 32px;\n          line-height: 32px;\n          font-size: 17px;\n          text-align: center;\n          margin: 0;\n          color: #000;\n          opacity: 0.1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.activePrev[data-v-58a8a9ae] {\n            opacity: .4;\n}\n.pickerBox .pkBody .slideList div p.active + p[data-v-58a8a9ae] {\n            opacity: 0.4;\n}\n.pickerBox .pkBody .slideList div p.active + p + p[data-v-58a8a9ae] {\n            opacity: 0.1;\n}\n"],sourceRoot:""}])},384:function(t,e,a){var i=a(383);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(226)("18b13ac2",i,!0)},385:function(t,e,a){a(384);var i=a(0)(a(381),a(386),"data-v-58a8a9ae",null);t.exports=i.exports},386:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPicker,expression:"showPicker"}],staticClass:"mask",on:{click:function(e){t.$emit("hideMask")}}}),t._v(" "),a("div",{staticClass:"pickerBox",class:t.showPicker?"active":""},[a("div",{staticClass:"pkHeader"},[a("span",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"right",on:{click:t.ok}},[t._v("确认")])]),t._v(" "),a("div",{staticClass:"pkBody"},t._l(t.selectList,function(e,i){return a("div",{staticClass:"slideList",style:{width:t.width},on:{touchend:t.touchend,scroll:t.isscroll}},[a("div",[a("p"),t._v(" "),a("p"),t._v(" "),t._l(e,function(e,i){return a("p",{staticClass:"active"},[t._v(t._s(e))])}),t._v(" "),a("p"),t._v(" "),a("p")],2)])}))])])},staticRenderFns:[]}},402:function(t,e,a){"use strict";function i(t){return a.i(l.a)({url:"/api/iv/apply_mat_bill/list",method:"post",data:t})}function n(t){return a.i(l.a)({url:"/api/iv/apply_mat_bill/detail",method:"post",data:t})}function o(t){return a.i(l.a)({url:"/api/iv/apply_mat_bill/modify",method:"post",data:t})}function s(t){return a.i(l.a)({url:"/api/workflow/process",method:"post",data:t})}e.d=i,e.c=n,e.a=o,e.b=s;var l=a(10)},415:function(t,e,a){"use strict";function i(t){return a.i(s.a)({url:"/api/iv/storehouse/list",method:"post",data:t})}function n(t){return a.i(s.a)({url:"/api/iv/storehouse/detail",method:"post",data:t})}function o(t){return a.i(s.a)({url:"/api/iv/store_mat/direct_change",method:"post",data:t})}e.c=i,e.b=n,e.a=o;var s=a(10)},480:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),n=a.n(i),o=(a(415),a(402)),s=a(373),l=a.n(s),p=a(385),c=a.n(p),r=a(1);e.default={name:"MaterialRequisitionDetaile",components:{CstItem:l.a,timePicker:c.a},data:function(){return{type:"请选择",action:"",apply_mat_info:{aplly_type:"",apply_id:"",apply_no:"",approve_step:"",approve_sugg:"",bom_type:"",dep_id:"",dep_name:"",mold_no:"",request_date:"",total_qty:"",apply_detail_list:[]}}},computed:{numberList:function(){},totalCount:function(){var t=0,e=0;return this.apply_mat_info.apply_detail_list.filter(function(a){e+=Number(a.quantity)*Number(a.total_price),t+=Number(a.quantity)}),"总数量:"+t}},activated:function(){var t=JSON.parse(r.a.get("mats"));t?(console.log(t[0].quantity),this.apply_mat_info.apply_detail_list=t,console.log(this.apply_mat_info.apply_detail_list),r.a.remove("mats")):console.log("本地储存为空")},mounted:function(){var t=this.$route.query;this.action=t.action,this.apply_id=t.apply_id,"check"===this.action&&this.billDetail()},methods:{submit:function(){if(""===this.apply_mat_info.aplly_type)return void $dialog.alert({effect:"ios",title:"提示",content:"请选择领料类型",okText:"确定",okTheme:"positive"});if("1"===this.apply_mat_info.aplly_type&&""===this.apply_mat_info.bom_type)return void $dialog.alert({effect:"ios",title:"提示",content:"请选择BOM类型",okText:"确定",okTheme:"positive"});if(""===this.apply_mat_info.mold_no)return void $dialog.alert({effect:"ios",title:"提示",content:"请输入模号",okText:"确定",okTheme:"positive"});if(this.apply_mat_info.apply_detail_list.length<1)return void $dialog.alert({effect:"ios",title:"提示",content:"请添加物料",okText:"确定",okTheme:"positive"});var t={apply_mat_info:this.apply_mat_info};a.i(o.a)(t).then(function(t){$toast.show("新建模具领料单成功"),$router.go(-1)}).catch(function(t){$toast.show(t.description)})},approve:function(){var t={bill_type:"8",bill_id:this.apply_mat_info.apply_id,approve_step:"step20",approve_flag:"0"};a.i(o.b)(t).then(function(t){$toast.show("新建模具领料单成功"),$router.go(-1)}).catch(function(t){$toast.show(t.description)})},onChange:function(t,e,a){var i=this;if("check"!=this.action){"-1"===e?t.quantity=Number(t.quantity)-1:"1"===e&&(console.log(t),1*this.apply_mat_info.aplly_type==1?t.quantity<t.undeal_qty&&(t.quantity=Number(t.quantity)+1):t.quantity<t.curr_stock_qty&&(t.quantity=Number(t.quantity)+1));var n=Number(t.quantity);n%1!=0&&(t.quantity=parseInt(n)),t.quantity<=0&&$dialog.confirm({theme:"ios",title:"确定要删除吗？",cancelText:"取消",okText:"确定"}).then(function(e){e?i.apply_mat_info.apply_detail_list.splice(a,1):t.quantity=1}),1*this.apply_mat_info.aplly_type==1?t.quantity>t.undeal_qty&&(t.quantity=t.undeal_qty):t.quantity>t.curr_stock_qty&&(t.quantity=t.curr_stock_qty)}},addMate:function(){if(""===this.apply_mat_info.aplly_type)return void $dialog.alert({effect:"ios",title:"提示",content:"请选择领料类型",okText:"确定",okTheme:"positive"});if("1"===this.apply_mat_info.aplly_type&&""===this.apply_mat_info.bom_type)return void $dialog.alert({effect:"ios",title:"提示",content:"请选择BOM类型",okText:"确定",okTheme:"positive"});if(""===this.apply_mat_info.mold_no)return void $dialog.alert({effect:"ios",title:"提示",content:"请输入BOM编码",okText:"确定",okTheme:"positive"});if(this.apply_mat_info.apply_detail_list.length>0){var t=n()(this.apply_mat_info.apply_detail_list);r.a.set("matList",t),console.log("本地储存成功"+t)}else console.log("本地储存为空");this.$router.forward({path:"MaterialList",query:{type:this.apply_mat_info.aplly_type,bom_type:this.apply_mat_info.bom_type,mold_no:this.apply_mat_info.mold_no}})},billDetail:function(){var t=this,e={query:{apply_id:this.apply_id}};a.i(o.c)(e).then(function(e){t.apply_mat_info=e.apply_mat_info}).catch(function(t){$toast.show(t.description)})}},watch:{"apply_mat_info.aplly_type":{handler:function(t,e){t!==e&&"check"!==this.action&&(this.apply_mat_info.bom_type="")},deep:!0},"apply_mat_info.bom_type":{handler:function(t,e){t!==e&&"check"!==this.action&&(this.apply_mat_info.apply_detail_list=[])},deep:!0}}}},676:function(t,e,a){e=t.exports=a(225)(),e.push([t.i,"\n.singleDetail .mateList[data-v-89bee6c0] {\n  padding-top: 102px;\n}\n.singleDetail .mateList .mateListTop[data-v-89bee6c0] {\n    top: 102px;\n}\n.singleDetail .mateList.active[data-v-89bee6c0] {\n    padding-top: 156px;\n}\n.singleDetail .mateList.active .mateListTop[data-v-89bee6c0] {\n      top: 156px;\n}\n.singleDetail.active .mateList[data-v-89bee6c0] {\n  padding-top: 152px;\n}\n.singleDetail.active .mateList .mateListTop[data-v-89bee6c0] {\n    top: 152px;\n}\n.singleDetail.active .mateList.active[data-v-89bee6c0] {\n    padding-top: 206px;\n}\n.singleDetail.active .mateList.active .mateListTop[data-v-89bee6c0] {\n      top: 206px;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/production/MaterialRequisition/detaile.vue"],names:[],mappings:";AACA;EACE,mBAAmB;CACpB;AACD;IACI,WAAW;CACd;AACD;IACI,mBAAmB;CACtB;AACD;MACM,WAAW;CAChB;AACD;EACE,mBAAmB;CACpB;AACD;IACI,WAAW;CACd;AACD;IACI,mBAAmB;CACtB;AACD;MACM,WAAW;CAChB",file:"detaile.vue",sourcesContent:["\n.singleDetail .mateList[data-v-89bee6c0] {\n  padding-top: 102px;\n}\n.singleDetail .mateList .mateListTop[data-v-89bee6c0] {\n    top: 102px;\n}\n.singleDetail .mateList.active[data-v-89bee6c0] {\n    padding-top: 156px;\n}\n.singleDetail .mateList.active .mateListTop[data-v-89bee6c0] {\n      top: 156px;\n}\n.singleDetail.active .mateList[data-v-89bee6c0] {\n  padding-top: 152px;\n}\n.singleDetail.active .mateList .mateListTop[data-v-89bee6c0] {\n    top: 152px;\n}\n.singleDetail.active .mateList.active[data-v-89bee6c0] {\n    padding-top: 206px;\n}\n.singleDetail.active .mateList.active .mateListTop[data-v-89bee6c0] {\n      top: 206px;\n}\n"],sourceRoot:""}])},815:function(t,e,a){var i=a(676);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(226)("4b7ad38f",i,!0)},963:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[a("div",{staticClass:"mw-page-header"},[a("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),a("span",[t._v("模具领料单")]),t._v(" "),"check"==t.action?a("i",{staticClass:"right",on:{click:function(e){t.action="action"}}},[t._v("编辑")]):t._e(),t._v(" "),"action"==t.action?a("i",{staticClass:"right"},[t._v("取消")]):t._e(),t._v(" "),"new"==t.action?a("i",{staticClass:"right"}):t._e()]),t._v(" "),a("div",{staticClass:"mw-page-content singleDetail",class:"new"!==t.action?"active":""},[a("div",{staticClass:"header"},[a("cst-item",{directives:[{name:"show",rawName:"v-show",value:"new"!==t.action,expression:"action!=='new'"}],attrs:{label:"领料单号",action:"check",editType:"text"},model:{value:t.apply_mat_info.apply_no,callback:function(e){t.$set(t.apply_mat_info,"apply_no",e)},expression:"apply_mat_info.apply_no"}}),t._v(" "),a("item",{staticStyle:{"margin-bottom":"0"}},[a("span",[t._v("领料类型：")]),t._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.apply_mat_info.aplly_type,expression:"apply_mat_info.aplly_type"}],attrs:{disabled:"check"==t.action,name:"aplly_type",type:"radio",value:"1"},domProps:{checked:t._q(t.apply_mat_info.aplly_type,"1")},on:{change:function(e){t.$set(t.apply_mat_info,"aplly_type","1")}}}),t._v(" 需求")]),t._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.apply_mat_info.aplly_type,expression:"apply_mat_info.aplly_type"}],attrs:{disabled:"check"==t.action,name:"aplly_type",type:"radio",value:"2"},domProps:{checked:t._q(t.apply_mat_info.aplly_type,"2")},on:{change:function(e){t.$set(t.apply_mat_info,"aplly_type","2")}}}),t._v(" 超领")])]),t._v(" "),a("item",{directives:[{name:"show",rawName:"v-show",value:1*t.apply_mat_info.aplly_type==1,expression:"apply_mat_info.aplly_type*1===1"}],staticStyle:{"margin-bottom":"0"}},[a("span",[t._v("BOM类型：")]),t._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.apply_mat_info.bom_type,expression:"apply_mat_info.bom_type"}],attrs:{disabled:"check"==t.action,name:"bom_type",type:"radio",value:"1"},domProps:{checked:t._q(t.apply_mat_info.bom_type,"1")},on:{change:function(e){t.$set(t.apply_mat_info,"bom_type","1")}}}),t._v(" 主BOM")]),t._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.apply_mat_info.bom_type,expression:"apply_mat_info.bom_type"}],attrs:{disabled:"check"==t.action,name:"bom_type",type:"radio",value:"2"},domProps:{checked:t._q(t.apply_mat_info.bom_type,"2")},on:{change:function(e){t.$set(t.apply_mat_info,"bom_type","2")}}}),t._v(" 电极BOM")])]),t._v(" "),a("cst-item",{attrs:{label:"模号：",placeholder:"请输入BOM编码",action:t.action,editType:"text"},model:{value:t.apply_mat_info.mold_no,callback:function(e){t.$set(t.apply_mat_info,"mold_no",e)},expression:"apply_mat_info.mold_no"}})],1),t._v(" "),a("div",{staticClass:"mateList",class:1*t.apply_mat_info.aplly_type==1?"active":""},[a("div",{staticClass:"mateListTop"},[a("span",[t._v("物料列表")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"check"!==t.action,expression:"action!=='check'"}],staticClass:"right",on:{click:function(e){t.addMate()}}},[t._v("添加")])]),t._v(" "),a("div",{staticClass:"list",staticStyle:{"padding-top":"29px"}},t._l(t.apply_mat_info.apply_detail_list,function(e,i){return a("div",{staticClass:"item"},[a("div",{staticClass:"itemInfo"},[a("div",{staticClass:"numberBox",staticStyle:{top:"17px",height:"70px",width:"100px"}},[a("span",{on:{click:function(a){t.onChange(e,"1")}}},[t._v("+")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],attrs:{disabled:"check"===t.action,type:"number"},domProps:{value:e.quantity},on:{change:function(a){t.onChange(e)},input:function(a){a.target.composing||t.$set(e,"quantity",a.target.value)}}}),t._v(" "),a("span",{on:{click:function(a){t.onChange(e,"-1")}}},[t._v("-")])]),t._v(" "),a("h3",[t._v("物料编码: "),a("span",[t._v(t._s(e.mat_no))])]),t._v(" "),a("p",[t._v("物料名称: "),a("span",[t._v(t._s(e.mat_desc))])]),t._v(" "),a("p",[t._v("规格型号: "),a("span",[t._v(t._s(e.mat_model))])]),t._v(" "),a("p",[t._v("物料类型: "),a("span",[t._v(t._s(e.mat_type_name))])])])])}))])]),t._v(" "),a("div",{staticClass:"mw-page-footer"},["check"!==t.action?a("div",{staticClass:"btns"},[a("div",{staticClass:"total",staticStyle:{flex:"0 0 80%"},attrs:{style:"flex: 0 0 80%;"}},[a("div",{staticStyle:{display:"flex"}},[a("span",{staticStyle:{width:"50%","text-align":"center"}},[t._v("物料种类:"+t._s(t.apply_mat_info.apply_detail_list.length))]),t._v(" "),a("span",{staticStyle:{width:"50%","text-align":"center"}},[t._v(t._s(t.totalCount))])])]),t._v(" "),a("div",{staticClass:"btn",staticStyle:{"background-color":"#416eb6",color:"white",padding:"15px 0"},on:{click:t.submit}},[t._v("\n        保存\n      ")])]):a("div",{staticClass:"btns"},[a("div",{staticClass:"btn",on:{click:t.approve}},[t._v("\n        提交审批\n      ")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=16.3fab66d8a7d5908c5b03.js.map