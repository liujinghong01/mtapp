{"version":3,"sources":["webpack:///static/js/93.5cbe46518b8242c4ec2f.js","webpack:///./src/views/company/subDeptDetail.vue","webpack:///subDeptDetail.vue","webpack:///./src/views/company/subDeptDetail.vue?b08c","webpack:///./src/views/company/subDeptDetail.vue?ac13","webpack:///./src/views/company/subDeptDetail.vue?464a"],"names":["webpackJsonp","241","module","exports","__webpack_require__","Component","398","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__api_company__","__WEBPACK_IMPORTED_MODULE_3__components_invite_vue__","__WEBPACK_IMPORTED_MODULE_3__components_invite_vue___default","__WEBPACK_IMPORTED_MODULE_4__components_mwPrompt__","__WEBPACK_IMPORTED_MODULE_4__components_mwPrompt___default","name","data","dep_id","dep_name","upperDepName","showPopup","addDepFlag","depList","members","newDepName","action","components","MwPrompt","a","invite","computed","i","activated","param","this","$route","query","console","log","getDepts","methods","turnCheck","that","chosenCompany","company_id","requestData","then","res","deps","memberInfos","catch","error","$toast","show","description","showEditAction","_this","btns","length","$router","forward","path","type","$actionSheet","buttons","title","cancelText","$t","addNewDep","trim","upper_id","496","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","597","content","locals","704","render","_vm","_h","$createElement","_c","_self","directives","rawName","hideNavbar","expression","staticClass","on","click","$event","go","_v","_s","_e","staticStyle","opacity","company_name","_l","item","key","nativeOn","member_id","attrs","src","icon","line-height","margin-left","member_name","userinfo","uid","hideInvite","okFunction","placeholder","hidePop","model","callback","$$v","staticRenderFns"],"mappings":"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","file":"static/js/93.5cbe46518b8242c4ec2f.js","sourcesContent":["webpackJsonp([93],{\n\n/***/ 241:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(597)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(398),\n  /* template */\n  __webpack_require__(704),\n  /* scopeId */\n  \"data-v-0e9269f8\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 398:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__api_company__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_invite_vue__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_invite_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_invite_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_mwPrompt__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_mwPrompt___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_mwPrompt__);\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'subDeptDetail',\n  data: function data() {\n    return {\n      dep_id: '',\n      dep_name: '',\n      upperDepName: '',\n      showPopup: false,\n      addDepFlag: false,\n      depList: [],\n      members: [],\n      newDepName: '',\n      action: 'check'\n    };\n  },\n\n  components: {\n    MwPrompt: __WEBPACK_IMPORTED_MODULE_4__components_mwPrompt___default.a,\n    invite: __WEBPACK_IMPORTED_MODULE_3__components_invite_vue___default.a\n  },\n  computed: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* mapGetters */])(['chosenCompany', 'userinfo']),\n  activated: function activated() {\n    var param = this.$route.query;\n    console.log(param);\n    this.dep_id = param.dep_id;\n    this.dep_name = param.dep_name;\n    this.upperDepName = param.upperDepName;\n    this.getDepts();\n  },\n\n  methods: {\n    turnCheck: function turnCheck() {\n      this.showPopup = false;\n      this.addDepFlag = false;\n      this.action = 'check';\n    },\n    getDepts: function getDepts() {\n      var that = this;\n      if (!that.chosenCompany.company_id) {\n        return;\n      }\n      var requestData = {\n        company_id: that.chosenCompany.company_id,\n        dep_id: that.dep_id\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_company__[\"h\" /* getDeptInfo */])(requestData).then(function (res) {\n        console.log(res);\n        that.depList = res.deps;\n        that.members = res.memberInfos;\n      }).catch(function (error) {\n        console.log(error);\n        $toast.show(error.description);\n      });\n    },\n    showEditAction: function showEditAction() {\n      var _this = this;\n\n      var that = this;\n      var btns = new Object();\n      btns['批量移动员工'] = function () {\n        if (that.members.length === 0) {\n          $toast.show('当前部门无可移动员工');\n          return;\n        }\n        that.$router.forward({ path: '/company/batchSelect', query: { members: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(that.members), type: 'move', dep_id: _this.dep_id } });\n      };\n      btns['批量删除员工'] = function () {\n        if (that.members.length === 0) {\n          $toast.show('当前部门无可删除员工');\n          return;\n        }\n        that.$router.forward({ path: '/company/batchSelect', query: { members: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(that.members), type: 'del', dep_id: _this.dep_id } });\n      };\n      $actionSheet.show({\n        buttons: btns,\n        title: '批量操作',\n        cancelText: that.$t('cancel')\n      });\n    },\n    addNewDep: function addNewDep() {\n      var that = this;\n      if (this.newDepName.trim() === '') {\n        $toast.show('部门名称不能为空');\n        return;\n      }\n      var requestData = {\n        company_id: that.chosenCompany.company_id,\n        dep_name: that.newDepName,\n        upper_id: that.dep_id ? that.dep_id : 'undefined'\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_company__[\"i\" /* createDepartment */])(requestData).then(function (res) {\n        that.getDepts();\n      }).catch(function (error) {\n        $toast.show(error.description);\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 496:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(220)();\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.item-img[data-v-0e9269f8] {\\n  width: 30px;\\n  height: 30px;\\n  float: left;\\n}\\n.text-btn[data-v-0e9269f8] {\\n  border: 1px solid #4a90e2;\\n  padding: 3px;\\n  border-radius: 2px;\\n  margin-right: 10px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/weibosi/webs-mt/mt/www_dev/src/views/company/subDeptDetail.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,YAAY;EACZ,aAAa;EACb,YAAY;CACb;AACD;EACE,0BAA0B;EAC1B,aAAa;EACb,mBAAmB;EACnB,mBAAmB;CACpB\",\"file\":\"subDeptDetail.vue\",\"sourcesContent\":[\"\\n.item-img[data-v-0e9269f8] {\\n  width: 30px;\\n  height: 30px;\\n  float: left;\\n}\\n.text-btn[data-v-0e9269f8] {\\n  border: 1px solid #4a90e2;\\n  padding: 3px;\\n  border-radius: 2px;\\n  margin-right: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 597:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(496);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(221)(\"0b045682\", content, true);\n\n/***/ }),\n\n/***/ 704:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page company\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.dep_name))]), _vm._v(\" \"), (_vm.action === 'check') ? _c('i', {\n    staticClass: \"right\",\n    on: {\n      \"click\": function($event) {\n        _vm.action = 'edit'\n      }\n    }\n  }, [_vm._v(\"管理\")]) : _vm._e(), _vm._v(\" \"), (_vm.action === 'edit') ? _c('i', {\n    staticClass: \"right\",\n    on: {\n      \"click\": _vm.turnCheck\n    }\n  }, [_vm._v(\"取消\")]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('list', [_c('item', [_c('span', {\n    staticStyle: {\n      \"opacity\": \".6\"\n    }\n  }, [_vm._v(_vm._s(_vm.chosenCompany.company_name))]), _vm._v(\" \"), _c('i', {\n    staticClass: \"icon ion-ios-arrow-right\"\n  }), _vm._v(\" \"), _c('span', {\n    staticStyle: {\n      \"opacity\": \".6\"\n    }\n  }, [_vm._v(_vm._s(_vm.upperDepName))]), _vm._v(\" \"), _c('i', {\n    staticClass: \"icon ion-ios-arrow-right\"\n  }), _vm._v(\" \" + _vm._s(_vm.dep_name) + \"\\n      \")])], 1), _vm._v(\" \"), _c('list', _vm._l((_vm.depList), function(item) {\n    return _c('item', {\n      key: \"item.dep_id\",\n      staticClass: \"item-icon-right\"\n    }, [_vm._v(\"\\n        \" + _vm._s(item.dep_name) + \"\\n        \")])\n  })), _vm._v(\" \"), _c('list', [_c('div', {\n    staticClass: \"item item-divider-ios\"\n  }, [_vm._v(\"\\n        成员\\n      \")]), _vm._v(\" \"), _vm._l((_vm.members), function(item) {\n    return _c('item', {\n      key: \"item.members\",\n      staticClass: \"item-icon-right item-contact\",\n      nativeOn: {\n        \"click\": function($event) {\n          _vm.$router.forward('/company/memberDetail/' + item.member_id)\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"item-img\",\n      attrs: {\n        \"src\": item.icon ? item.icon : 'static/images/company/contact2.png'\n      }\n    }), _vm._v(\" \"), _c('span', {\n      staticStyle: {\n        \"line-height\": \"30px\",\n        \"margin-left\": \"15px\"\n      }\n    }, [_vm._v(_vm._s(item.member_name))]), (item.member_id === _vm.userinfo.uid) ? _c('span', {\n      staticClass: \"label\"\n    }, [_vm._v(\"我自己\")]) : _vm._e()])\n  }), _vm._v(\" \"), _c('item', {\n    staticClass: \"item-icon-right\",\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showPopup = true\n      }\n    }\n  }, [_c('img', {\n    staticClass: \"item-img\",\n    attrs: {\n      \"src\": __webpack_require__(81)\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticStyle: {\n      \"line-height\": \"30px\",\n      \"margin-left\": \"15px\"\n    }\n  }, [_vm._v(\"邀请同事加入\")])])], 2), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showPopup),\n      expression: \"showPopup\"\n    }]\n  }, [_c('invite', {\n    attrs: {\n      \"dep_id\": _vm.dep_id,\n      \"dep_name\": _vm.dep_name,\n      \"type\": \"2\"\n    },\n    on: {\n      \"hideInvite\": function($event) {\n        _vm.showPopup = false\n      }\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('mw-prompt', {\n    attrs: {\n      \"show\": _vm.addDepFlag,\n      \"okFunction\": _vm.addNewDep,\n      \"placeholder\": \"请输入部门名称\"\n    },\n    on: {\n      \"hidePop\": function($event) {\n        _vm.addDepFlag = false\n      }\n    },\n    model: {\n      value: (_vm.newDepName),\n      callback: function($$v) {\n        _vm.newDepName = $$v\n      },\n      expression: \"newDepName\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'edit'),\n      expression: \"action==='edit'\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.addDepFlag = true\n      }\n    }\n  }, [_vm._v(\"添加子部门\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"divider\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.forward('/company/deptSetting/' + _vm.dep_id)\n      }\n    }\n  }, [_vm._v(\"部门设置\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"divider\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": _vm.showEditAction\n    }\n  }, [_vm._v(\"批量操作\")])])])], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/93.5cbe46518b8242c4ec2f.js","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-0e9269f8&scoped=true!sass-loader?sourceMap!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./subDeptDetail.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./subDeptDetail.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler?id=data-v-0e9269f8!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./subDeptDetail.vue\"),\n  /* scopeId */\n  \"data-v-0e9269f8\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/company/subDeptDetail.vue\n// module id = 241\n// module chunks = 93","<template>\r\n  <div class=\"mw-page page company\" v-nav=\"{hideNavbar:true}\">\r\n    <div class=\"mw-page-header\">\r\n      <i class=\"left icon ion-ios-arrow-back\" @click=\"$router.go(-1)\"></i>\r\n      <span>{{dep_name}}</span>\r\n      <i class=\"right\" v-if=\"action === 'check'\" @click=\"action = 'edit'\">管理</i>\r\n      <i class=\"right\" v-if=\"action === 'edit'\" @click=\"turnCheck\">取消</i>\r\n    </div>\r\n    <div class=\"mw-page-content\">\r\n      <list>\r\n        <item>\r\n          <span style=\"opacity: .6\">{{chosenCompany.company_name}}</span>\r\n          <i class=\"icon ion-ios-arrow-right\"></i>\r\n          <span style=\"opacity: .6\">{{upperDepName}}</span>\r\n          <i class=\"icon ion-ios-arrow-right\"></i> {{dep_name}}\r\n        </item>\r\n      </list>\r\n      <list>\r\n        <item class=\"item-icon-right\" v-for=\"item in depList\" key=\"item.dep_id\">\r\n          {{item.dep_name}}\r\n          <!--<span class=\"item-note\">{{item.member_num}}</span>-->\r\n          <!--<i class=\"icon ion-ios-arrow-right\" style=\"color: #DDD;\"></i>-->\r\n        </item>\r\n      </list>\r\n      <list>\r\n        <div class=\"item item-divider-ios\">\r\n          成员\r\n        </div>\r\n        <item class=\"item-icon-right item-contact\" v-for=\"item in members\" key=\"item.members\"  @click.native=\"$router.forward('/company/memberDetail/'+item.member_id)\">\r\n          <img :src=\"item.icon?item.icon:'static/images/company/contact2.png'\" class=\"item-img\">\r\n          <span style=\"line-height: 30px;margin-left: 15px\">{{item.member_name}}</span><span class=\"label\" v-if=\"item.member_id===userinfo.uid\">我自己</span>\r\n        </item>\r\n        <item class=\"item-icon-right\" @click.native=\"showPopup=true\">\r\n          <img src=\"../../../static/images/company/logo_company.png\" class=\"item-img\">\r\n          <span style=\"line-height: 30px;margin-left: 15px\">邀请同事加入</span>\r\n        </item>\r\n      </list>\r\n      <div v-show=\"showPopup\">\r\n        <invite v-on:hideInvite=\"showPopup=false\" :dep_id=\"dep_id\" :dep_name=\"dep_name\" type=\"2\"></invite>\r\n      </div>\r\n    </div>\r\n    <mw-prompt :show=\"addDepFlag\" :okFunction=\"addNewDep\" v-model=\"newDepName\" placeholder=\"请输入部门名称\" v-on:hidePop=\"addDepFlag=false\"></mw-prompt>\r\n    <div class=\"mw-page-footer\" v-show=\"action==='edit'\">\r\n      <div class=\"btns\">\r\n        <div class=\"btn\" @click=\"addDepFlag = true\">添加子部门</div>\r\n        <div class=\"divider\"></div>\r\n        <div class=\"btn\" @click=\"$router.forward('/company/deptSetting/'+dep_id)\">部门设置</div>\r\n        <div class=\"divider\"></div>\r\n        <div class=\"btn\" @click=\"showEditAction\">批量操作</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { mapGetters } from 'vuex'\r\n  import { getDeptInfo,createDepartment } from '@/api/company'\r\n  import invite from '@/components/invite.vue'\r\n  import MwPrompt from \"../../components/mwPrompt\";\r\n  export default{\r\n    name:'subDeptDetail',\r\n    data(){\r\n      return{\r\n        dep_id:'',\r\n        dep_name:'',\r\n        upperDepName:'',\r\n        showPopup:false,\r\n        addDepFlag:false,\r\n        depList:[],\r\n        members:[],\r\n        newDepName:'',\r\n        action:'check'\r\n      }\r\n    },\r\n    components:{\r\n      MwPrompt,\r\n      invite\r\n    },\r\n    computed:mapGetters([\r\n      'chosenCompany',\r\n      'userinfo'\r\n    ]),\r\n    activated(){\r\n      const param = this.$route.query;\r\n      console.log(param)\r\n      this.dep_id = param.dep_id;\r\n      this.dep_name = param.dep_name;\r\n      this.upperDepName = param.upperDepName\r\n      this.getDepts();\r\n    },\r\n    methods:{\r\n      turnCheck(){\r\n        //action 从edit 变成check\r\n        this.showPopup = false\r\n        this.addDepFlag = false\r\n        this.action = 'check'\r\n      },\r\n      //获取公司部门以及成员\r\n      getDepts(){\r\n        const that = this;\r\n        if(!that.chosenCompany.company_id){\r\n          return\r\n        }\r\n        const requestData = {\r\n          company_id:that.chosenCompany.company_id,\r\n          dep_id:that.dep_id\r\n        }\r\n        getDeptInfo(requestData).then(res=>{\r\n          console.log(res);\r\n          that.depList = res.deps;\r\n          that.members = res.memberInfos;\r\n        }).catch(error=>{\r\n          console.log(error);\r\n          $toast.show(error.description)\r\n        })\r\n      },\r\n      showEditAction(){\r\n        let that = this;\r\n        let btns = new Object();\r\n        btns['批量移动员工'] = ()=>{\r\n          if(that.members.length===0){\r\n            $toast.show('当前部门无可移动员工')\r\n            return;\r\n          }\r\n          that.$router.forward({path:'/company/batchSelect',query:{members:JSON.stringify(that.members),type:'move',dep_id: this.dep_id}})\r\n        }\r\n        btns['批量删除员工'] = ()=>{\r\n          if(that.members.length===0){\r\n            $toast.show('当前部门无可删除员工')\r\n            return;\r\n          }\r\n          that.$router.forward({path:'/company/batchSelect',query:{members:JSON.stringify(that.members),type:'del',dep_id:this.dep_id}})\r\n        }\r\n        $actionSheet.show({\r\n          buttons: btns,\r\n          title:'批量操作',\r\n          cancelText:that.$t('cancel')\r\n        })\r\n      },\r\n      addNewDep(){\r\n        const that = this;\r\n        if(this.newDepName.trim()===''){\r\n          $toast.show('部门名称不能为空');\r\n          return;\r\n        }\r\n        let requestData = {\r\n          company_id:that.chosenCompany.company_id,\r\n          dep_name:that.newDepName,\r\n          upper_id:that.dep_id?that.dep_id:'undefined'\r\n        }\r\n        createDepartment(requestData).then(res=>{\r\n          that.getDepts();\r\n        }).catch(error=>{\r\n          $toast.show(error.description)\r\n        })\r\n      },\r\n    },\r\n  }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n  .item-img{\r\n    width: 30px;height: 30px;float:left;\r\n  }\r\n  .text-btn{\r\n    border: 1px solid #4a90e2;\r\n    padding: 3px;\r\n    border-radius: 2px;\r\n    margin-right: 10px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// subDeptDetail.vue?1f0dc630","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.item-img[data-v-0e9269f8] {\\n  width: 30px;\\n  height: 30px;\\n  float: left;\\n}\\n.text-btn[data-v-0e9269f8] {\\n  border: 1px solid #4a90e2;\\n  padding: 3px;\\n  border-radius: 2px;\\n  margin-right: 10px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/weibosi/webs-mt/mt/www_dev/src/views/company/subDeptDetail.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,YAAY;EACZ,aAAa;EACb,YAAY;CACb;AACD;EACE,0BAA0B;EAC1B,aAAa;EACb,mBAAmB;EACnB,mBAAmB;CACpB\",\"file\":\"subDeptDetail.vue\",\"sourcesContent\":[\"\\n.item-img[data-v-0e9269f8] {\\n  width: 30px;\\n  height: 30px;\\n  float: left;\\n}\\n.text-btn[data-v-0e9269f8] {\\n  border: 1px solid #4a90e2;\\n  padding: 3px;\\n  border-radius: 2px;\\n  margin-right: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-0e9269f8&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/company/subDeptDetail.vue\n// module id = 496\n// module chunks = 93","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-0e9269f8&scoped=true!../../../node_modules/sass-loader/lib/loader.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./subDeptDetail.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"0b045682\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-0e9269f8&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/company/subDeptDetail.vue\n// module id = 597\n// module chunks = 93","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page company\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.dep_name))]), _vm._v(\" \"), (_vm.action === 'check') ? _c('i', {\n    staticClass: \"right\",\n    on: {\n      \"click\": function($event) {\n        _vm.action = 'edit'\n      }\n    }\n  }, [_vm._v(\"管理\")]) : _vm._e(), _vm._v(\" \"), (_vm.action === 'edit') ? _c('i', {\n    staticClass: \"right\",\n    on: {\n      \"click\": _vm.turnCheck\n    }\n  }, [_vm._v(\"取消\")]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('list', [_c('item', [_c('span', {\n    staticStyle: {\n      \"opacity\": \".6\"\n    }\n  }, [_vm._v(_vm._s(_vm.chosenCompany.company_name))]), _vm._v(\" \"), _c('i', {\n    staticClass: \"icon ion-ios-arrow-right\"\n  }), _vm._v(\" \"), _c('span', {\n    staticStyle: {\n      \"opacity\": \".6\"\n    }\n  }, [_vm._v(_vm._s(_vm.upperDepName))]), _vm._v(\" \"), _c('i', {\n    staticClass: \"icon ion-ios-arrow-right\"\n  }), _vm._v(\" \" + _vm._s(_vm.dep_name) + \"\\n      \")])], 1), _vm._v(\" \"), _c('list', _vm._l((_vm.depList), function(item) {\n    return _c('item', {\n      key: \"item.dep_id\",\n      staticClass: \"item-icon-right\"\n    }, [_vm._v(\"\\n        \" + _vm._s(item.dep_name) + \"\\n        \")])\n  })), _vm._v(\" \"), _c('list', [_c('div', {\n    staticClass: \"item item-divider-ios\"\n  }, [_vm._v(\"\\n        成员\\n      \")]), _vm._v(\" \"), _vm._l((_vm.members), function(item) {\n    return _c('item', {\n      key: \"item.members\",\n      staticClass: \"item-icon-right item-contact\",\n      nativeOn: {\n        \"click\": function($event) {\n          _vm.$router.forward('/company/memberDetail/' + item.member_id)\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"item-img\",\n      attrs: {\n        \"src\": item.icon ? item.icon : 'static/images/company/contact2.png'\n      }\n    }), _vm._v(\" \"), _c('span', {\n      staticStyle: {\n        \"line-height\": \"30px\",\n        \"margin-left\": \"15px\"\n      }\n    }, [_vm._v(_vm._s(item.member_name))]), (item.member_id === _vm.userinfo.uid) ? _c('span', {\n      staticClass: \"label\"\n    }, [_vm._v(\"我自己\")]) : _vm._e()])\n  }), _vm._v(\" \"), _c('item', {\n    staticClass: \"item-icon-right\",\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showPopup = true\n      }\n    }\n  }, [_c('img', {\n    staticClass: \"item-img\",\n    attrs: {\n      \"src\": require(\"../../../static/images/company/logo_company.png\")\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticStyle: {\n      \"line-height\": \"30px\",\n      \"margin-left\": \"15px\"\n    }\n  }, [_vm._v(\"邀请同事加入\")])])], 2), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showPopup),\n      expression: \"showPopup\"\n    }]\n  }, [_c('invite', {\n    attrs: {\n      \"dep_id\": _vm.dep_id,\n      \"dep_name\": _vm.dep_name,\n      \"type\": \"2\"\n    },\n    on: {\n      \"hideInvite\": function($event) {\n        _vm.showPopup = false\n      }\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('mw-prompt', {\n    attrs: {\n      \"show\": _vm.addDepFlag,\n      \"okFunction\": _vm.addNewDep,\n      \"placeholder\": \"请输入部门名称\"\n    },\n    on: {\n      \"hidePop\": function($event) {\n        _vm.addDepFlag = false\n      }\n    },\n    model: {\n      value: (_vm.newDepName),\n      callback: function($$v) {\n        _vm.newDepName = $$v\n      },\n      expression: \"newDepName\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'edit'),\n      expression: \"action==='edit'\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.addDepFlag = true\n      }\n    }\n  }, [_vm._v(\"添加子部门\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"divider\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.forward('/company/deptSetting/' + _vm.dep_id)\n      }\n    }\n  }, [_vm._v(\"部门设置\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"divider\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": _vm.showEditAction\n    }\n  }, [_vm._v(\"批量操作\")])])])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-0e9269f8!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/company/subDeptDetail.vue\n// module id = 704\n// module chunks = 93"],"sourceRoot":""}