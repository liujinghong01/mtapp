webpackJsonp([108],{295:function(t,e,i){i(776);var n=i(0)(i(493),i(923),"data-v-54298343",null);t.exports=n.exports},388:function(t,e,i){"use strict";function n(t){return i.i(y.a)({url:"/api/pm/pg/detail",method:"post",data:t})}function a(t){return i.i(y.a)({url:"/api/pm/pg/list",method:"post",data:t})}function o(t){return i.i(y.a)({url:"/api/pm/pg_device/list",method:"post",data:t})}function c(t){return i.i(y.a)({url:"/api/pm/device_maintain_curr/query",method:"post",data:t})}function s(t){return i.i(y.a)({url:"/api/pm/pg_device/maintain_record",method:"post",data:t})}function r(t){return i.i(y.a)({url:"/api/pm/pg_device_check_allocate/list",method:"post",data:t})}function p(t){return i.i(y.a)({url:"/api/pm/pg_device/check_allocate_delete",method:"post",data:t})}function d(t){return i.i(y.a)({url:"/api/pm/pg_device_check/list",method:"post",data:t})}function m(t){return i.i(y.a)({url:"/api/pm/pg_device/detail",method:"post",data:t})}function l(t){return i.i(y.a)({url:"/api/pm/pg/delete",method:"post",data:t})}function u(t){return i.i(y.a)({url:"/api/pm/pg/modify",method:"post",data:t})}function h(t){return i.i(y.a)({url:"/api/pm/pg_device/delete",method:"post",data:t})}function f(t){return i.i(y.a)({url:"/api/pm/pg_device/modify",method:"post",data:t})}function v(t){return i.i(y.a)({url:"/api/pm/device_maintain_bill/save",method:"post",data:t})}function _(t){return i.i(y.a)({url:"/api/pm/device_maintain/start",method:"post",data:t})}function A(t){return i.i(y.a)({url:"/api/pm/pg_device/check",method:"post",data:t})}function g(t){return i.i(y.a)({url:"/api/pm/pg_device/check_allocate_modify",method:"post",data:t})}function k(t){return i.i(y.a)({url:"/api/pm/pg_device_check_allocate/detail",method:"post",data:t})}function b(t){return i.i(y.a)({url:"/api/company/getAllDeptMember",method:"post",data:t})}function C(t){return i.i(y.a)({url:"/api/pm/pg_member/delete",method:"post",data:t})}function x(t){return i.i(y.a)({url:"/api/pm/pg_member/modify",method:"post",data:t})}function w(t){return i.i(y.a)({url:"api/company/get-all-members",method:"post",data:t})}e.o=n,e.a=a,e.n=o,e.e=c,e.g=s,e.j=r,e.k=p,e.d=d,e.b=m,e.v=l,e.t=u,e.s=h,e.i=f,e.f=v,e.h=_,e.c=A,e.m=g,e.l=k,e.u=b,e.r=C,e.q=x,e.p=w;var y=i(10)},493:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(6),a=i.n(n),o=i(5),c=(i(79),i(388)),s=i(20),r=i.n(s),p=i(1);e.default={name:"personnelList",components:{SwipeItem:r.a},data:function(){return{dep_id:"",parent_id:"",type:"",list:[]}},computed:i.i(o.a)(["chosenCompany","userinfo"]),activated:function(){},mounted:function(){var t=this.$route.query;this.type=t.type,this.dep_id=t.dep_id,"dep"==this.type?this.pgDetail():"parent"==this.type&&(this.parent_id=t.parent_id,this.getDepts())},methods:{onInfinite:function(){},onRefresh:function(){},ascertain:function(){var t=[];if(this.list.forEach(function(e,i){e.check&&t.push({check_uid_name:e.work_name,check_uid:e.member_id})}),!(t.length>0))return void $toast.show("请选择人员");p.a.set("personnel",a()(t)),this.$router.go(-1)},pgDetail:function(){var t=this,e={query:{pg_id:this.dep_id}};i.i(c.o)(e).then(function(e){var i=[];null!==p.a.get("staffList")&&(i=JSON.parse(p.a.get("staffList")),p.a.remove("staffList")),t.list=e.pg_info.memeber_list,i.length>0&&t.list.forEach(function(e,n){i.forEach(function(i,n){e.member_id==i.check_uid&&e.work_name==i.check_uid_name&&t.$set(e,"check",!0)})})}).catch(function(t){$toast.show(t.description)})},getDepts:function(){var t=this,e=this;if(e.chosenCompany.company_id){var n={company_id:e.chosenCompany.company_id,dep_id:""};i.i(c.p)(n).then(function(i){if(e.list=i.memberInfos,null!==p.a.get("memeber_list")){var n=JSON.parse(p.a.get("memeber_list"));e.list.forEach(function(e,i){n.forEach(function(i,n){e.member_id==i.member_id&&t.$set(e,"check",!0)})})}}).catch(function(t){$toast.show(t.description)})}},pgMemberModify:function(t,e){var n=this,a={member_info:{furlough_end_date:null,furlough_start_date:null,is_leader:null,member_id:t.member_id,pg_id:this.dep_id,position_code:null,position_name:"",work_mail:t.work_mail,work_name:t.work_name,work_phone:t.work_phone,work_state:t.work_state}};i.i(c.q)(a).then(function(t){$toast.show("添加人员成功"),n.$set(n.list[e],"check",!0)}).catch(function(t){$toast.show(t.description)})},pgMemberDelete:function(t,e){var n=this,a={member_info:{member_id:t.member_id,pg_id:this.dep_id}};i.i(c.r)(a).then(function(t){$toast.show("删除人员成功"),n.$set(n.list[e],"check",!1)}).catch(function(t){$toast.show(t.description)})},checked:function(t,e){"dep"==this.type?void 0==t.check?this.$set(t,"check",!0):t.check=!t.check:"parent"==this.type&&(void 0==t.check?this.pgMemberModify(t,e):t.check?this.pgMemberDelete(t,e):this.pgMemberModify(t,e))}}}},637:function(t,e,i){e=t.exports=i(225)(),e.push([t.i,"\n.item[data-v-54298343] {\n  padding-left: 40px;\n}\n.item > div[data-v-54298343] {\n    line-height: 20px;\n}\n.item.active[data-v-54298343] {\n    background: #fff;\n}\n.item.active > div.checkbox > i[data-v-54298343] {\n      color: #416eb6;\n}\n.item.active > div.checkbox > i.ion-android-checkbox[data-v-54298343] {\n        display: block;\n}\n.item .checkbox[data-v-54298343] {\n    width: 40px;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.item .checkbox i[data-v-54298343] {\n      position: absolute;\n      width: 14px;\n      height: 20px;\n      font-size: 18px;\n      left: 50%;\n      top: 50%;\n      margin-top: -10px;\n      margin-left: -5px;\n}\n.item .checkbox i.ion-android-checkbox[data-v-54298343] {\n        display: none;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/production/equipment/personnelList.vue"],names:[],mappings:";AACA;EACE,mBAAmB;CACpB;AACD;IACI,kBAAkB;CACrB;AACD;IACI,iBAAiB;CACpB;AACD;MACM,eAAe;CACpB;AACD;QACQ,eAAe;CACtB;AACD;IACI,YAAY;IACZ,aAAa;IACb,mBAAmB;IACnB,OAAO;IACP,QAAQ;CACX;AACD;MACM,mBAAmB;MACnB,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,UAAU;MACV,SAAS;MACT,kBAAkB;MAClB,kBAAkB;CACvB;AACD;QACQ,cAAc;CACrB",file:"personnelList.vue",sourcesContent:["\n.item[data-v-54298343] {\n  padding-left: 40px;\n}\n.item > div[data-v-54298343] {\n    line-height: 20px;\n}\n.item.active[data-v-54298343] {\n    background: #fff;\n}\n.item.active > div.checkbox > i[data-v-54298343] {\n      color: #416eb6;\n}\n.item.active > div.checkbox > i.ion-android-checkbox[data-v-54298343] {\n        display: block;\n}\n.item .checkbox[data-v-54298343] {\n    width: 40px;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.item .checkbox i[data-v-54298343] {\n      position: absolute;\n      width: 14px;\n      height: 20px;\n      font-size: 18px;\n      left: 50%;\n      top: 50%;\n      margin-top: -10px;\n      margin-left: -5px;\n}\n.item .checkbox i.ion-android-checkbox[data-v-54298343] {\n        display: none;\n}\n"],sourceRoot:""}])},776:function(t,e,i){var n=i(637);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(226)("dd62813a",n,!0)},923:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[i("div",{staticClass:"mw-page-header"},[i("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("span",[t._v("人员列表")]),t._v(" "),i("i",{staticClass:"right"})]),t._v(" "),i("div",{staticClass:"mw-page-content "},[i("div",{staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"}},[t._l(t.list,function(e,n){return i("item",{class:e.check?"active":"",nativeOn:{click:function(i){t.checked(e,n)}}},[i("div",{staticClass:"checkbox"},[i("i",{staticClass:"icon ion-android-checkbox-outline-blank"}),t._v(" "),i("i",{staticClass:"icon ion-android-checkbox"})]),t._v(" "),i("span",[t._v(t._s(e.work_name))])])}),t._v(" "),i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"})],2)],1)]),t._v(" "),i("div",{staticClass:"mw-page-footer"},[i("div",{staticClass:"btns"},[i("div",{staticClass:"btn",on:{click:t.ascertain}},[t._v("\n        确定\n      ")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=108.0b35afed831b4d666977.js.map