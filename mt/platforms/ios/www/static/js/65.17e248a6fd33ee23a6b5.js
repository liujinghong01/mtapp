webpackJsonp([65],{308:function(t,a,e){e(632);var n=e(0)(e(465),e(741),"data-v-4c9a893c",null);t.exports=n.exports},333:function(t,a,e){"use strict";function n(t){return e.i(h.a)({url:"/api/iv/storehouse/modify",method:"post",data:t})}function i(t){return e.i(h.a)({url:"/api/iv/storehouse/list",method:"post",data:t})}function s(t){return e.i(h.a)({url:"/api/iv/storehouse/detail",method:"post",data:t})}function o(t){return e.i(h.a)({url:"/api/iv/storehouse/delete",method:"post",data:t})}function c(t){return e.i(h.a)({url:"/api/iv/storeroom/delete",method:"post",data:t})}function u(t){return e.i(h.a)({url:"/api/iv/mat_type/list",method:"post",data:t})}function r(t){return e.i(h.a)({url:"/api/iv/mat_type/modify",method:"post",data:t})}function l(t){return e.i(h.a)({url:"/api/iv/store_room/search_mat",method:"post",data:t})}a.g=n,a.c=i,a.e=s,a.h=o,a.f=c,a.b=u,a.d=r,a.a=l;var h=e(7)},465:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(8),i=e.n(n),s=e(333),o=e(21),c=e.n(o),u=e(1);a.default={name:"matList",data:function(){return{matSearch:"",matList:[],list:[],house_id:"",chosenMats:[],action:"check"}},methods:{searchMats:c.a.debounce(function(){var t=this;e.i(s.a)({query:{is_include_process_type:1,mat_desc:this.matSearch,store_house_id:this.house_id}}).then(function(a){a.store_mat_list.length>0?(t.matList=a.store_mat_list,t.chosenMats.length>0&&t.matList.forEach(function(a,e){t.chosenMats.forEach(function(e,n){a.mat_no===e.mat_no&&t.$set(a,"quantity",e.quantity)})})):($toast.show("结果查询为空"),t.matList=[])}).catch(function(t){$toast.show(t.description)})},1e3),addCount:function(t){t.quantity?""===this.house_id?(this.$set(t,"quantity",++t.quantity),this.chosenMats.forEach(function(a,e){a.mat_no==t.mat_no&&(a.quantity=t.quantity)})):t.quantity<t.stock_qty&&(this.$set(t,"quantity",++t.quantity),this.chosenMats.forEach(function(a,e){a.mat_no==t.mat_no&&(a.quantity=t.quantity)})):(this.$set(t,"quantity",1),this.chosenMats.push(t))},countChange:function(t){t.quantity<=0&&(t.quantity=1)},minCount:function(t){var a=this;if(1===t.quantity)return void $dialog.confirm({theme:"ios",title:"要删除物料吗？",okText:"确定",cancelText:"取消"}).then(function(e){e&&(t.quantity=0,a.chosenMats.forEach(function(e,n){e.mat_no==t.mat_no&&(t.checked=!1,a.chosenMats.splice(n,1))}))});this.$set(t,"quantity",--t.quantity)},ok:function(){if(0===this.chosenMats.length)return void $toast.show("请选择物料");if(this.chosenMats.length>0){var t=i()(this.chosenMats);u.a.set("mats",t),console.log("本地储存成功2"+t)}else console.log("本地储存为空2");$router.go(-1)}},computed:{totalCount:function(){var t=0;return this.chosenMats.filter(function(a){t+=a.quantity}),"总数量"+t}},watch:{matSearch:function(){this.searchMats()}},mounted:function(){this.house_id=this.$route.query.house_id,console.log(u.a.get("matList"));var t=JSON.parse(u.a.get("matList"));t.length>0?(this.chosenMats=t,u.a.remove("matList"),console.log("获取本地储存成功2"+t)):console.log("获取本地储存为空2"+t)}}},531:function(t,a,e){a=t.exports=e(220)(),a.push([t.i,"\n.total[data-v-4c9a893c] {\n  -ms-flex: 0 0 80%;\n      flex: 0 0 80%;\n}\n.total span[data-v-4c9a893c] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: center;\n}\n","",{version:3,sources:["E:/weibosi/webs-mt/mt/www_dev/src/views/storage/management/matList.vue"],names:[],mappings:";AACA;EACE,kBAAkB;MACd,cAAc;CACnB;AACD;IACI,mBAAmB;QACf,eAAe;IACnB,mBAAmB;CACtB",file:"matList.vue",sourcesContent:["\n.total[data-v-4c9a893c] {\n  -ms-flex: 0 0 80%;\n      flex: 0 0 80%;\n}\n.total span[data-v-4c9a893c] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: center;\n}\n"],sourceRoot:""}])},632:function(t,a,e){var n=e(531);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(221)("3ab1c6ea",n,!0)},741:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[e("div",{staticClass:"mw-page-header"},[e("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(a){t.$router.go(-1)}}}),t._v(" "),e("span",[t._v("物料清单")]),t._v(" "),e("i",{staticClass:"right"})]),t._v(" "),e("div",{staticClass:"mw-page-content has-tab"},[e("div",{staticStyle:{height:"50px"}},[e("div",{staticStyle:{display:"flex",width:"100%",margin:"10px 15px","justify-content":"center","align-items":"center"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.matSearch,expression:"matSearch"}],staticStyle:{flex:"0 0 80%","border-radius":"5px"},attrs:{type:"search"},domProps:{value:t.matSearch},on:{input:function(a){a.target.composing||(t.matSearch=a.target.value)}}}),t._v(" "),e("i",{staticClass:"iconfont icon-saoyisao",staticStyle:{flex:"1","text-align":"center"}})])]),t._v(" "),e("div",{staticStyle:{flex:"1",position:"relative"}},[e("div",{staticClass:"hairline-top"}),t._v(" "),t._l(t.matList,function(a){return e("item",[e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"matBill-content",staticStyle:{width:"80%"}},[e("p",{staticClass:"title"},[t._v("物料名称: "+t._s(a.mat_desc))]),t._v(" "),e("p",{staticClass:"title"},[t._v("物料编码: "+t._s(a.mat_no))]),t._v(" "),e("p",{staticClass:"title"},[t._v("规格型号: "+t._s(a.mat_model))]),t._v(" "),e("span",[t._v("所在仓库: "+t._s(a.store_house_name))]),t._v(" "),e("span",[t._v("库存量: "+t._s(a.stock_qty))]),t._v("   \n            ")]),t._v(" "),a.quantity>0?e("div",{staticClass:"edit-zone",staticStyle:{width:"25%"}},[e("span",{on:{click:function(e){t.minCount(a)}}},[t._v("-")]),t._v("  \n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],attrs:{type:"number"},domProps:{value:a.quantity},on:{change:function(e){t.countChange(a)},input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),t._v("\n                  "),e("span",{on:{click:function(e){t.addCount(a)}}},[t._v("+")])]):e("div",{staticClass:"edit-zone"},[e("span",{on:{click:function(e){t.addCount(a)}}},[t._v("+")])])])])})],2)]),t._v(" "),e("div",{staticClass:"mw-page-footer"},[e("div",{staticClass:"btns"},[e("div",{staticClass:"total"},[e("div",{staticStyle:{display:"flex"}},[e("span",[t._v("物料种类:"+t._s(this.chosenMats.length))]),t._v(" "),e("span",{staticStyle:{padding:"0 15px"}},[t._v(t._s(t.totalCount))])])]),t._v(" "),e("div",{staticClass:"btn",staticStyle:{"background-color":"#416eb6",color:"white",padding:"15px 0"},on:{click:t.ok}},[t._v("\n            确定\n        ")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=65.17e248a6fd33ee23a6b5.js.map