webpackJsonp([77],{272:function(t,e,i){i(668);var a=i(0)(i(429),i(778),"data-v-939f8f7a",null);t.exports=a.exports},346:function(t,e,i){"use strict";function a(t){return i.i(u.a)({url:"/api/bom/list",method:"post",data:t})}function s(t){return i.i(u.a)({url:"api/bom_node/list",method:"post",data:t})}function n(t){return i.i(u.a)({url:"/api/bom_node/update",method:"post",data:t})}function o(t){return i.i(u.a)({url:"/api/cascade_type/list",method:"post",data:t})}function r(t){return i.i(u.a)({url:"/api/mat_name/list",method:"post",data:t})}function c(t){return i.i(u.a)({url:"/api/mat_name_spec/list",method:"post",data:t})}function l(t){return i.i(u.a)({url:"/api/cascade_mat/list",method:"post",data:t})}function p(t){return i.i(u.a)({url:"/api/rawnature/list",method:"post",data:t})}function _(t){return i.i(u.a)({url:"/api/rawnature/price",method:"post",data:t})}function d(t){return i.i(u.a)({url:"/api/bom_node/info",method:"post",data:t})}function v(t){return i.i(u.a)({url:"/api/bom_node/delete",method:"post",data:t})}e.k=a,e.i=s,e.h=n,e.a=o,e.b=r,e.c=c,e.d=l,e.e=p,e.g=_,e.f=d,e.j=v;var u=i(7)},429:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(20),s=i.n(a),n=i(346);e.default={name:"bomList",components:{SwipeItem:s.a},data:function(){return{tabIndex:0,tabs:["编制中","审批中","已审批","退回","筛选"],pageModels:[{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0}],query:{app_flag:"step10",cst_name:"",prod_name:""},list:[{bom_list:[]},{bom_list:[]},{bom_list:[]},{bom_list:[]}]}},activated:function(){this.getData(!0)},methods:{onTabClick:function(t){var e=this;if(t!==this.tabIndex){switch(t){case 0:this.query.app_flag="step10";break;case 1:this.query.app_flag="step30";break;case 2:this.query.app_flag="step0";break;case 3:this.query.app_flag="step11"}if(4===t)return void(e.showFilter=!0);e.tabIndex=t,this.getData(!0)}},prodTypeName:function(t){var e="";switch(parseInt(t)){case 1:e="注塑模";break;case 2:e="压铸模"}return e},onInfinite:function(t){var e=this;if(e.pageModels[e.tabIndex].total_page<=e.pageModels[e.tabIndex].curr_page)return void t();setTimeout(function(){e.pageModels[e.tabIndex].total_page<2?t():(e.getData(),t())},400)},onRefresh:function(t){var e=this;setTimeout(function(){e.getData(!0),t()},500)},onItemClick:function(t){this.$router.forward("/mats/bom/nodes/check/"+t.node_id+"/"+t.bom_id+"/"+this.query.app_flag)},getData:function(t){var e=this,a={curr_page:t?1:1+e.pageModels[e.tabIndex].curr_page,page_size:e.pageModels[e.tabIndex].page_size,query:this.query};i.i(n.k)(a).then(function(i){console.log(i),i.bom_list.length>0&&(t&&(e.list[e.tabIndex].bom_list.length=0),e.list[e.tabIndex].bom_list=e.list[e.tabIndex].bom_list.concat(i.bom_list),e.pageModels[e.tabIndex].total_page=i.total_page,e.pageModels[e.tabIndex].curr_page=i.curr_page,e.pageModels[e.tabIndex].total_count=i.total_count)}).catch(function(t){$toast.show(t.description)})},delItem:function(t){var e=this;$dialog.confirm({theme:"ios",title:"确定要删除吗？",cancelText:"取消",okText:"确定"}).then(function(i){i&&(e.list[e.tabIndex].bom_list=e.list[e.tabIndex].bom_list.filter(function(e){return e.request_id!==t.request_id}))})}}}},567:function(t,e,i){e=t.exports=i(220)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},668:function(t,e,i){var a=i(567);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(221)("49e6ca24",a,!0)},778:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page purchase"},[i("div",{staticClass:"mw-page-header"},[i("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("span",[t._v("BOM列表")]),t._v(" "),i("i",{staticClass:"right"})]),t._v(" "),i("div",{staticClass:"mw-page-content has-tab"},[i("div",{staticStyle:{height:"60px"}},[i("tabs",{attrs:{"tab-items":t.tabs,"tab-index":t.tabIndex,"on-tab-click":t.onTabClick}})],1),t._v(" "),i("div",{staticStyle:{flex:"1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tabIndex,expression:"tabIndex===0"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].bom_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("客户名称 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.cst_name))]),i("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),i("div",{staticClass:"req-item-title"},[t._v("项目模号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.mold_no))])]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("产品名称 : "+t._s(e.cst_prod_name))]),t._v(" "),i("span",[t._v("产品类型 : "+t._s(t.prodTypeName(e.prod_type)))])])])])],1)}),t._v(" "),t.pageModels[0].curr_page>=t.pageModels[0].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex===1"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].bom_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("客户名称 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.cst_name))]),i("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),i("div",{staticClass:"req-item-title"},[t._v("项目模号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.mold_no))])]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("产品名称 : "+t._s(e.cst_prod_name))]),t._v(" "),i("span",[t._v("产品类型 : "+t._s(t.prodTypeName(e.prod_type)))])])])])],1)}),t._v(" "),t.pageModels[1].curr_page>=t.pageModels[1].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tabIndex,expression:"tabIndex===2"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].bom_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{canSwipe:!1,obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}},nativeOn:{click:function(i){t.onItemClick(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("客户名称 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.cst_name))]),i("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),i("div",{staticClass:"req-item-title"},[t._v("项目模号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.mold_no))])]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("产品名称 : "+t._s(e.cst_prod_name))]),t._v(" "),i("span",[t._v("产品类型 : "+t._s(t.prodTypeName(e.prod_type)))])])])])],1)}),t._v(" "),t.pageModels[2].curr_page>=t.pageModels[2].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.tabIndex,expression:"tabIndex===3"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].bom_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("客户名称 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.cst_name))]),i("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),i("div",{staticClass:"req-item-title"},[t._v("项目模号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.mold_no))])]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("产品名称 : "+t._s(e.cst_prod_name))]),t._v(" "),i("span",[t._v("产品类型 : "+t._s(t.prodTypeName(e.prod_type)))])])])])],1)}),t._v(" "),t.pageModels[3].curr_page>=t.pageModels[3].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1)])])])},staticRenderFns:[]}}});
//# sourceMappingURL=77.c397e2aca72d84691af2.js.map