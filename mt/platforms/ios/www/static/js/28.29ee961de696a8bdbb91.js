webpackJsonp([28],{297:function(t,e,a){a(663);var n=a(0)(a(454),a(773),"data-v-7e31c4f2",null);t.exports=n.exports},328:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={name:"cstItem",data:function(){return{selectId:"select-"+Math.random().toString(36).substring(3,6)}},props:{label:{type:String,required:!0},value:{type:"",default:""},placeholder:{type:String,default:""},canEdit:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!1},arrowText:{type:[String,Number],default:""},arrowClick:{type:Function},editType:{type:String,default:"text"},isSelect:{type:Boolean,default:!1},options:{type:Array},action:{type:String,default:"check"},color:""},methods:{noteClick:function(){this.arrowClick&&this.arrowClick()},input:function(t){var e=t.target.value;this.$emit("input",e)}}}},329:function(t,e,a){e=t.exports=a(220)(),e.push([t.i,"\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n","",{version:3,sources:["E:/weibosi/webs-mt/mt/www_dev/src/components/cstItem.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,mBAAmB;EACnB,wBAAwB;EACxB,qBAAqB;EACrB,cAAc;CACf;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,mBAAmB;IACnB,YAAY;IACZ,UAAU;IACV,gBAAgB;CACnB;AACD;MACM,UAAU;CACf;AACD;IACI,oBAAoB;QAChB,gBAAgB;IACpB,aAAa;IACb,eAAe;IACf,0BAA0B;IAC1B,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,kBAAkB;CACrB;AACD;IACI,mBAAmB;QACf,eAAe;IACnB,kBAAkB;CACrB;AACD;MACM,UAAU;MACV,WAAW;MACX,aAAa;MACb,eAAe;MACf,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,kBAAkB;MAClB,wBAAwB;MACxB,oBAAoB;MACpB,iBAAiB;CACtB;AACD;MACM,aAAa;MACb,kBAAkB;CACvB;AACD;QACQ,sBAAsB;QACtB,YAAY;QACZ,aAAa;QACb,mBAAmB;CAC1B;AACD;IACI,iBAAiB;QACb,aAAa;CACpB;AACD;MACM,aAAa;MACb,eAAe;MACf,kBAAkB;MAClB,mBAAmB;MACnB,oBAAoB;CACzB",file:"cstItem.vue",sourcesContent:["\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n"],sourceRoot:""}])},330:function(t,e,a){var n=a(329);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(221)("6ea14c28",n,!0)},331:function(t,e,a){a(330);var n=a(0)(a(328),a(332),"data-v-19336c8e",null);t.exports=n.exports},332:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"compute-item"},[a("span",{staticClass:"label"},[t._v(t._s(t.label))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"color"!==t.editType,expression:"editType!=='color'"}],staticClass:"value"},[t.canEdit&&"check"!==t.action&&"approve"!==t.action?"check"!==t.action||"approve"!==t.action?a("input",{ref:"input",attrs:{type:t.editType,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.input}}):t._e():a("span",[t._v(t._s(t.value))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"color"===t.editType,expression:"editType==='color'"}],staticClass:"value"},[a("span",{staticClass:"color",style:{background:t.color}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"note"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow&&t.arrowText,expression:"hasArrow&&arrowText"}],staticClass:"item-notes",on:{click:t.noteClick}},[t._v(t._s(t.arrowText))]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"icon ion-ios-arrow-right arrow "})]),t._v(" "),a("div",{staticClass:"hairline-top"})])},staticRenderFns:[]}},367:function(t,e,a){"use strict";function n(t){return a.i(s.a)({url:"/api/iv/apply_mat_bill/list",method:"post",data:t})}function i(t){return a.i(s.a)({url:"/api/iv/apply_mat_bill/detail",method:"post",data:t})}function o(t){return a.i(s.a)({url:"/api/iv/apply_mat_bill/modify",method:"post",data:t})}e.c=n,e.a=i,e.b=o;var s=a(7)},454:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(13),i=a.n(n),o=a(331),s=a.n(o),l=a(4),p=a(48),c=a(367),r=a(79),d=a(1);e.default={name:"applyMatBillDetail",components:{CstItem:s.a},data:function(){return{apply_mat_info:{apply_detail_list:[],apply_id:"",apply_no:"",approve_step:"",approve_sugg:"",dep_id:1,dep_name:"",request_date:a.i(p.a)()},action:"",bill_id:""}},computed:i()({},a.i(l.a)(["userinfo","chosenCompany"])),created:function(){this.action=this.$route.params.action,"new"!==this.action&&(this.bill_id=this.$route.params.bill_id,this.getData())},activated:function(){var t=d.a.get("mats");console.log(t),t&&(this.apply_mat_info.apply_detail_list=this.apply_mat_info.apply_detail_list.concat(JSON.parse(t)),d.a.remove("mats"))},methods:{getData:function(){var t=this,e={query:{apply_id:this.bill_id}};a.i(c.a)(e).then(function(e){console.log(e),t.apply_mat_info=e.apply_mat_info}).catch(function(t){$toast.show(t.description)})},saveData:function(t){var e=this,n={apply_mat_info:this.apply_mat_info};return this.apply_mat_info.dep_id=this.chosenCompany.deps[0].dep_id,this.apply_mat_info.dep_name=this.chosenCompany.deps[0].dep_name,this.apply_mat_info.dep_id&&this.apply_mat_info.dep_name?this.apply_mat_info.apply_detail_list&&0!==this.apply_mat_info.apply_detail_list.length?void a.i(c.b)(n).then(function(t){console.log(t),e.action="check",$toast.show("保存成功")}).catch(function(t){$toast.show(t.description)}):void $toast.show("请先填写物料信息"):void $toast.show("部门信息不能为空")},submitApprove:function(){var t={bill_id:this.apply_mat_info.apply_id,bill_type:8,approve_flag:1,approve_step:"new"===this.action?"step10":this.apply_mat_info.approve_step};a.i(r.a)(t).then(function(t){console.log(t)}).catch(function(t){$toast.show(t.description)})},addCount:function(t){if("check"!==this.action)return t.quantity>=t.curr_stock_qty?void $toast.show("不能再加了"):void this.$set(t,"quantity",++t.quantity)},minCount:function(t){var e=this;if("check"!==this.action)return 1===t.quantity?void $dialog.confirm({theme:"ios",title:"要删除物料吗？",okText:"确定",cancelText:"取消"}).then(function(a){a&&(e.apply_mat_info.apply_detail_list=e.apply_mat_info.apply_detail_list.filter(function(e){return e.mat_id!==t.mat_id}))}):void this.$set(t,"quantity",--t.quantity)},countChange:function(t){console.log(t),(t.quantity+"").indexOf(".")>-1&&this.$set(t,"quantity",(t.quantity+"").substring(0,(t.quantity+"").indexOf(".")))}}}},562:function(t,e,a){e=t.exports=a(220)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"detail.vue",sourceRoot:""}])},663:function(t,e,a){var n=a(562);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(221)("6716fb19",n,!0)},773:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[a("div",{staticClass:"mw-page-header"},[a("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),a("span",[t._v("领料审请单")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:"check"===t.action,expression:"action==='check'"}],staticClass:"right",on:{click:function(e){t.action="edit"}}},[t._v("编辑")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:"edit"===t.action,expression:"action==='edit'"}],staticClass:"right",on:{click:function(e){t.action="check"}}},[t._v("取消")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:"new"===t.action,expression:"action==='new'"}],staticClass:"right"})]),t._v(" "),a("div",{staticClass:"mw-page-content"},[a("cst-item",{attrs:{label:"申请人",canEdit:!1},model:{value:t.userinfo.fullname,callback:function(e){t.$set(t.userinfo,"fullname",e)},expression:"userinfo.fullname"}}),t._v(" "),a("cst-item",{attrs:{label:"申请日期",canEdit:!1},model:{value:t.apply_mat_info.request_date,callback:function(e){t.$set(t.apply_mat_info,"request_date",e)},expression:"apply_mat_info.request_date"}}),t._v(" "),a("cst-item",{attrs:{label:"申请部门",canEdit:!1},model:{value:t.chosenCompany.deps[0].dep_name,callback:function(e){t.$set(t.chosenCompany.deps[0],"dep_name",e)},expression:"chosenCompany.deps[0].dep_name"}}),t._v(" "),a("cst-item",{attrs:{label:"领料总数量",canEdit:!1},model:{value:t.apply_mat_info.apply_detail_list.length,callback:function(e){t.$set(t.apply_mat_info.apply_detail_list,"length",e)},expression:"apply_mat_info.apply_detail_list.length"}}),t._v(" "),a("div",{staticClass:"item-divider"},[a("span",{staticClass:"left"},[t._v("领用物料列表")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"check"!=t.action,expression:"action!='check'"}],staticClass:"right",on:{click:function(e){t.$router.forward("/storage/applyMatBill/matList")}}},[t._v("添加")])]),t._v(" "),t._l(t.apply_mat_info.apply_detail_list,function(e){return a("item",[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"matBill-content"},[a("p",{staticClass:"title"},[t._v("物料名称: "+t._s(e.mat_desc))]),t._v(" "),a("p",{staticClass:"title"},[t._v("物料编码: "+t._s(e.mat_no))]),t._v(" "),a("p",{staticClass:"title"},[t._v("规格型号: "+t._s(e.mat_model))])]),t._v(" "),a("div",{staticClass:"edit-zone"},[a("span",{on:{click:function(a){t.minCount(e)}}},[t._v("-")]),t._v("  \n            "),"check"===t.action?a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],attrs:{type:"number",disabled:""},domProps:{value:e.quantity},on:{input:function(a){a.target.composing||t.$set(e,"quantity",a.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],attrs:{type:"number"},domProps:{value:e.quantity},on:{input:[function(a){a.target.composing||t.$set(e,"quantity",a.target.value)},function(a){t.countChange(e)}]}}),t._v("\n              "),a("span",{on:{click:function(a){t.addCount(e)}}},[t._v("+")])])])])})],2),t._v(" "),a("div",{staticClass:"mw-page-footer"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"check"!==t.action,expression:"action!=='check'"}],staticClass:"btns"},[a("div",{staticClass:"btn",on:{click:t.saveData}},[t._v("保存")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"check"===t.action,expression:"action==='check'"}],staticClass:"btns"},[a("div",{staticClass:"btn",on:{click:t.submitApprove}},[t._v("提交审批")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=28.29ee961de696a8bdbb91.js.map