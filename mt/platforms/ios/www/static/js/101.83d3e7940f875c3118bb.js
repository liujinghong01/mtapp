webpackJsonp([101],{323:function(t,e,i){i(814);var s=i(0)(i(522),i(962),"data-v-87af0474",null);t.exports=s.exports},410:function(t,e,i){"use strict";function s(t){return i.i(r.a)({url:"/api/pc/purch_order/list",method:"post",data:t})}function a(t){return i.i(r.a)({url:"/api/pc/purch_order/detail",method:"post",data:t})}function n(t){return i.i(r.a)({url:"/api/pc/purch_order/delete",method:"post",data:t})}function o(t){return i.i(r.a)({url:"/api/pc/purch_order/modify",method:"post",data:t})}e.c=s,e.a=a,e.d=n,e.b=o;var r=i(10)},522:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(20),a=i.n(s),n=i(410);e.default={name:"purchaseList",components:{SwipeItem:a.a},data:function(){return{tabIndex:0,tabs:["单价审批","一级审批","二级审批","退回","已审批"],pageModels:[{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0}],query:{approve_step:[],approve_type:""},list:[{request_list:[]},{request_list:[]},{request_list:[]},{request_list:[]},{request_list:[]}]}},created:function(){this.query.approve_type=0,this.query.approve_step=["step30"],this.getData()},methods:{onTabClick:function(t){var e=this;switch(t){case 0:e.query.approve_type=0,e.query.approve_step=["step30"];break;case 1:e.query.approve_type=1,e.query.approve_step=["step30"];break;case 2:e.query.approve_type=2,e.query.approve_step=["step30"];break;case 3:e.query.approve_type=0,e.query.approve_step=["step11"];break;case 4:e.query.approve_type="",e.query.approve_step=["step0","step00"]}e.tabIndex=t,this.list[e.tabIndex].request_list.length,this.getData(!0)},onInfinite:function(t){var e=this;if(e.pageModels[e.tabIndex].total_page<=e.pageModels[e.tabIndex].curr_page)return void t();setTimeout(function(){e.pageModels[e.tabIndex].total_page<2?t():(e.getData(),t())},400)},onRefresh:function(t){var e=this;setTimeout(function(){e.getData(!0),t()},500)},onItemClick:function(t){this.$router.forward("/purchase/purchase/detail/check/"+t.purch_id)},getData:function(t){var e=this,s={curr_page:t?1:e.pageModels[e.tabIndex].curr_page+1,page_size:e.pageModels[e.tabIndex].page_size,query:this.query};i.i(n.c)(s).then(function(i){e.list[e.tabIndex].request_list=t?i.purch_list:e.list[e.tabIndex].request_list.concat(i.purch_list),e.pageModels[e.tabIndex].total_page=i.total_page,e.pageModels[e.tabIndex].curr_page=i.curr_page,e.pageModels[e.tabIndex].total_count=i.total_count}).catch(function(t){$toast.show(t.description)})},delItem:function(t){var e=this;$dialog.confirm({theme:"ios",title:"确定要删除吗？",cancelText:"取消",okText:"确定"}).then(function(s){s&&i.i(n.d)({purch_id:t.purch_id}).then(function(i){$toast.show("删除成功"),e.list[e.tabIndex].request_list=e.list[e.tabIndex].request_list.filter(function(e){return e.purch_id!==t.purch_id})}).catch(function(t){$toast.show(t.description)})})}}}},675:function(t,e,i){e=t.exports=i(225)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},814:function(t,e,i){var s=i(675);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(226)("2bcdae94",s,!0)},962:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page purchase"},[i("div",{staticClass:"mw-page-header"},[i("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("span",[t._v("采购单列表")]),t._v(" "),i("i",{staticClass:"right"})]),t._v(" "),i("div",{staticClass:"mw-page-content has-tab"},[i("div",{staticStyle:{height:"60px"}},[i("tabs",{attrs:{"tab-items":t.tabs,"tab-index":t.tabIndex,"on-tab-click":t.onTabClick}})],1),t._v(" "),i("div",{staticStyle:{flex:"1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tabIndex,expression:"tabIndex===0"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].request_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("采购单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.purch_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})])])])],1)}),t._v(" "),t.pageModels[0].curr_page>=t.pageModels[0].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex===1"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].request_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("采购单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.purch_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})])])])],1)}),t._v(" "),t.pageModels[1].curr_page>=t.pageModels[1].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tabIndex,expression:"tabIndex===2"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].request_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{canSwipe:!1,obj:e,swipeItemText:"删除"},on:{SwipeItemClick:function(i){t.delItem(e)}},nativeOn:{click:function(i){t.onItemClick(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("采购单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.purch_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})])])])],1)}),t._v(" "),t.pageModels[2].curr_page>=t.pageModels[2].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.tabIndex,expression:"tabIndex===3"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[t.tabIndex].request_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("采购单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.purch_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})])])])],1)}),t._v(" "),t.pageModels[3].curr_page>=t.pageModels[3].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4===t.tabIndex,expression:"tabIndex===4"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[4].request_list,function(e){return i("div",[i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(i){t.onItemClick(e)},SwipeItemClick:function(i){t.delItem(e)}}},[i("div",{class:["swipe-content",e.swipe?"active":""]},[i("div",{staticClass:"req-item-title"},[t._v("采购单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.purch_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})])])])],1)}),t._v(" "),t.pageModels[3].curr_page>=t.pageModels[3].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1)])])])},staticRenderFns:[]}}});
//# sourceMappingURL=101.83d3e7940f875c3118bb.js.map