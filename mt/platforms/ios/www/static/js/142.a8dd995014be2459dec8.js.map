{"version":3,"sources":["webpack:///static/js/142.a8dd995014be2459dec8.js","webpack:///./src/views/company/chooseDep.vue","webpack:///chooseDep.vue","webpack:///./src/views/company/chooseDep.vue?428e"],"names":["webpackJsonp","240","module","exports","__webpack_require__","Component","438","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_2_vuex__","__WEBPACK_IMPORTED_MODULE_3__api_company__","name","data","depList","chosenDeps","depNames","members","dep_id","type","chosenDep","created","this","$route","query","params","getSubDeps","computed","methods","that","chosenCompany","company_id","requestData","i","then","res","console","log","deps","length","tmpDeps","tmpNames","push","dep_name","j","catch","error","$toast","show","description","menuClick","dep_ids","member_ids","member_dep_id","history","go","_this","a","forEach","o","indexOf","885","render","_vm","_h","$createElement","_c","_self","directives","rawName","hideNavbar","expression","staticClass","on","click","$event","$router","_v","attrs","options","theme","model","callback","$$v","_e","staticRenderFns"],"mappings":"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","file":"static/js/142.a8dd995014be2459dec8.js","sourcesContent":["webpackJsonp([142],{\n\n/***/ 240:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(438),\n  /* template */\n  __webpack_require__(885),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 438:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(87);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__api_company__ = __webpack_require__(79);\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()({\n  name: 'chooseDep',\n  data: function data() {\n    return {\n      depList: [],\n      chosenDeps: [],\n      depNames: [],\n      members: [],\n      dep_id: '',\n      type: 'batch',\n      chosenDep: ''\n    };\n  },\n  created: function created() {\n    this.members = this.$route.query.members;\n    this.dep_id = this.$route.params.dep_id != 'null' ? this.$route.params.dep_id : '';\n    this.type = this.$route.params.type;\n    this.getSubDeps();\n  },\n\n  computed: {},\n  methods: {\n    getSubDeps: function getSubDeps() {\n      var that = this;\n      if (!that.chosenCompany.company_id) {\n        return;\n      }\n      var requestData = {\n        company_id: that.chosenCompany.company_id\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__api_company__[\"c\" /* getSubDeps */])(requestData).then(function (res) {\n        console.log(res);\n\n        if (!res.deps || res.deps.length === 0) {\n          return;\n        }\n        var tmpDeps = [];\n        var tmpNames = [];\n        for (var i in res.deps) {\n          tmpNames.push(res.deps[i].dep_name);\n          tmpDeps.push(res.deps[i]);\n          if (res.deps[i].deps.length > 0) {\n            for (var j in res.deps[i].deps) {\n              tmpNames.push(res.deps[i].dep_name + '>' + res.deps[i].deps[j].dep_name);\n              tmpDeps.push(res.deps[i].deps[j]);\n            }\n          }\n        }\n        that.depList = tmpDeps;\n        that.depNames = tmpNames;\n      }).catch(function (error) {\n        console.log(error);\n        $toast.show(error.description);\n      });\n    },\n    menuClick: function menuClick() {\n      var that = this;\n      var requestData = {\n        company_id: that.chosenCompany.company_id,\n        dep_ids: that.type === 'single' ? that.chosenDep : this.dep_ids,\n        member_ids: that.members,\n        member_dep_id: that.dep_id\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__api_company__[\"d\" /* batchMoveMember */])(requestData).then(function (res) {\n        history.go(-1);\n      }).catch(function (error) {\n        $toast.show(error.description);\n      });\n    }\n  }\n}, 'computed', __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"a\" /* mapGetters */])(['chosenCompany']), {\n  dep_ids: function dep_ids() {\n    var _this = this;\n\n    var a = [];\n    this.depList.forEach(function (o, i) {\n      if (_this.chosenDeps.indexOf(i) > -1) {\n        a.push(o.dep_id);\n      }\n    });\n    return a;\n  }\n})));\n\n/***/ }),\n\n/***/ 885:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page company\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(\"选择部门\")]), _vm._v(\" \"), _c('i', {\n    staticClass: \"right\"\n  })]), _vm._v(\" \"), (_vm.type === 'batch') ? _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('von-checkbox', {\n    attrs: {\n      \"options\": _vm.depNames,\n      \"theme\": \"positive\"\n    },\n    model: {\n      value: (_vm.chosenDeps),\n      callback: function($$v) {\n        _vm.chosenDeps = $$v\n      },\n      expression: \"chosenDeps\"\n    }\n  })], 1) : (_vm.type === 'single') ? _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('von-radio', {\n    attrs: {\n      \"options\": _vm.depNames\n    },\n    model: {\n      value: (_vm.chosenDep),\n      callback: function($$v) {\n        _vm.chosenDep = $$v\n      },\n      expression: \"chosenDep\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": _vm.menuClick\n    }\n  }, [_vm._v(\"确定\")])])])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/142.a8dd995014be2459dec8.js","var Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chooseDep.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler?id=data-v-2b2d231a!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chooseDep.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/company/chooseDep.vue\n// module id = 240\n// module chunks = 142","<template>\n  <div class=\"mw-page page company\" v-nav=\"{hideNavbar:true}\">\n    <div class=\"mw-page-header\">\n      <i class=\"left icon ion-ios-arrow-back\" @click=\"$router.go(-1)\"></i>\n      <span>选择部门</span>\n      <i class=\"right\"></i>\n    </div>\n    <div class=\"mw-page-content\" v-if=\"type==='batch'\">\n      <von-checkbox :options=\"depNames\" v-model=\"chosenDeps\" theme=\"positive\"></von-checkbox>\n    </div>\n    <div class=\"mw-page-content\" v-else-if=\"type==='single'\">\n      <von-radio :options=\"depNames\" v-model=\"chosenDep\"></von-radio>\n    </div>\n    <div class=\"mw-page-footer\">\n      <div class=\"btns\">\n        <div class=\"btn\" @click=\"menuClick\">确定</div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import { mapGetters } from 'vuex'\n  import { getSubDeps ,batchMoveMember} from '@/api/company'\n  export default{\n    name:'chooseDep',\n    data(){\n      return{\n        depList:[],\n        chosenDeps:[],\n        depNames:[],\n        members:[],\n        dep_id:'',\n        type:'batch',\n        chosenDep:''\n      }\n    },\n    created(){\n      this.members = this.$route.query.members\n      this.dep_id = this.$route.params.dep_id!='null'?this.$route.params.dep_id:''\n      this.type = this.$route.params.type\n      this.getSubDeps();\n    },\n    computed:{\n\n    },\n    methods:{\n      //获取公司部门以及成员\n      getSubDeps(){\n        const that = this;\n        if(!that.chosenCompany.company_id){\n          return\n        }\n        const requestData = {\n          company_id:that.chosenCompany.company_id,\n        }\n        getSubDeps(requestData).then(res=>{\n          console.log(res);\n//          that.depList = res.deps;\n          if(!res.deps||res.deps.length===0){\n              return\n          }\n          let tmpDeps = [];\n          let tmpNames = [];\n          for(let i in res.deps){\n            tmpNames.push(res.deps[i].dep_name)\n            tmpDeps.push(res.deps[i])\n            if(res.deps[i].deps.length>0){\n              for(let j in res.deps[i].deps){\n                tmpNames.push(res.deps[i].dep_name+'>'+res.deps[i].deps[j].dep_name);\n                tmpDeps.push(res.deps[i].deps[j])\n              }\n            }\n          }\n          that.depList = tmpDeps;\n          that.depNames = tmpNames;\n        }).catch(error=>{\n          console.log(error);\n          $toast.show(error.description)\n        })\n      },\n\n      menuClick(){\n        const that = this;\n        const requestData = {\n          company_id:that.chosenCompany.company_id,\n          dep_ids:that.type === 'single'?that.chosenDep:this.dep_ids,\n          member_ids:that.members,\n          member_dep_id:that.dep_id\n        }\n        batchMoveMember(requestData).then(res=>{\n          history.go(-1);\n        }).catch(error=>{\n          $toast.show(error.description)\n        })\n      },\n\n    },\n    computed:{\n      ...mapGetters(['chosenCompany']),\n      dep_ids(){\n        let a = []\n        this.depList.forEach((o,i)=>{\n          if (this.chosenDeps.indexOf(i)>-1) {\n            a.push(o.dep_id)\n          }\n        })\n        return a\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// chooseDep.vue?7112dfbb","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page company\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(\"选择部门\")]), _vm._v(\" \"), _c('i', {\n    staticClass: \"right\"\n  })]), _vm._v(\" \"), (_vm.type === 'batch') ? _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('von-checkbox', {\n    attrs: {\n      \"options\": _vm.depNames,\n      \"theme\": \"positive\"\n    },\n    model: {\n      value: (_vm.chosenDeps),\n      callback: function($$v) {\n        _vm.chosenDeps = $$v\n      },\n      expression: \"chosenDeps\"\n    }\n  })], 1) : (_vm.type === 'single') ? _c('div', {\n    staticClass: \"mw-page-content\"\n  }, [_c('von-radio', {\n    attrs: {\n      \"options\": _vm.depNames\n    },\n    model: {\n      value: (_vm.chosenDep),\n      callback: function($$v) {\n        _vm.chosenDep = $$v\n      },\n      expression: \"chosenDep\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": _vm.menuClick\n    }\n  }, [_vm._v(\"确定\")])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-2b2d231a!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/company/chooseDep.vue\n// module id = 885\n// module chunks = 142"],"sourceRoot":""}