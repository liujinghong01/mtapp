webpackJsonp([19],{312:function(t,i,e){e(809);var n=e(0)(e(511),e(957),"data-v-7c8cf35e",null);t.exports=n.exports},370:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default={name:"cstItem",data:function(){return{selectId:"select-"+Math.random().toString(36).substring(3,6)}},props:{label:{type:String,required:!0},value:{type:"",default:""},placeholder:{type:String,default:""},canEdit:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!1},arrowText:{type:[String,Number],default:""},arrowClick:{type:Function},editType:{type:String,default:"text"},isSelect:{type:Boolean,default:!1},options:{type:Array},action:{type:String,default:"check"},color:""},methods:{noteClick:function(){this.arrowClick&&this.arrowClick()},input:function(t){var i=t.target.value;this.$emit("input",i)}}}},371:function(t,i,e){i=t.exports=e(225)(),i.push([t.i,"\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/cstItem.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,mBAAmB;EACnB,wBAAwB;EACxB,qBAAqB;EACrB,cAAc;CACf;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,mBAAmB;IACnB,YAAY;IACZ,UAAU;IACV,gBAAgB;CACnB;AACD;MACM,UAAU;CACf;AACD;IACI,oBAAoB;QAChB,gBAAgB;IACpB,aAAa;IACb,eAAe;IACf,0BAA0B;IAC1B,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,kBAAkB;CACrB;AACD;IACI,mBAAmB;QACf,eAAe;IACnB,kBAAkB;CACrB;AACD;MACM,UAAU;MACV,WAAW;MACX,aAAa;MACb,eAAe;MACf,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,kBAAkB;MAClB,wBAAwB;MACxB,oBAAoB;MACpB,iBAAiB;CACtB;AACD;MACM,aAAa;MACb,kBAAkB;CACvB;AACD;QACQ,sBAAsB;QACtB,YAAY;QACZ,aAAa;QACb,mBAAmB;CAC1B;AACD;IACI,iBAAiB;QACb,aAAa;CACpB;AACD;MACM,aAAa;MACb,eAAe;MACf,kBAAkB;MAClB,mBAAmB;MACnB,oBAAoB;CACzB",file:"cstItem.vue",sourcesContent:["\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n"],sourceRoot:""}])},372:function(t,i,e){var n=e(371);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(226)("6ea14c28",n,!0)},373:function(t,i,e){e(372);var n=e(0)(e(370),e(374),"data-v-19336c8e",null);t.exports=n.exports},374:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"compute-item"},[e("span",{staticClass:"label"},[t._v(t._s(t.label))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"color"!==t.editType,expression:"editType!=='color'"}],staticClass:"value"},[t.canEdit&&"check"!==t.action&&"approve"!==t.action&&"checkOnly"!==t.action?e("input",{ref:"input",attrs:{type:t.editType,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.input}}):e("span",[t._v(t._s(t.value))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"color"===t.editType,expression:"editType==='color'"}],staticClass:"value"},[e("span",{staticClass:"color",style:{background:t.color}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"note"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow&&t.arrowText,expression:"hasArrow&&arrowText"}],staticClass:"item-notes",on:{click:t.noteClick}},[t._v(t._s(t.arrowText))]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"icon ion-ios-arrow-right arrow "})]),t._v(" "),e("div",{staticClass:"hairline-top"})])},staticRenderFns:[]}},381:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={components:{},name:"timePicker",data:function(){return{currIndex:0,scrollTop:"",interval:"",width:"100%",result:[],selectList:[[],[]]}},computed:{},props:{showPicker:{type:Boolean,default:!1,required:!0},pickerType:{type:String,default:"time",required:!0},pickerValue:{},pickerList:{}},methods:{ok:function(){switch(this.pickerType){case"time":this.$emit("chosen",this.result[0]+":"+this.result[1]);break;case"shift":case"radio":this.$emit("chosen",this.result[0])}this.$emit("hideMask")},cancel:function(){this.$emit("hideMask")},touchend:function(){var t=this;t.scrollTop=event.currentTarget.scrollTop;var i=event.currentTarget;clearInterval(t.interval),t.interval=null,t.interval=setInterval(function(){t.scroll(i)},100)},scroll:function(t){if(t.scrollTop==this.scrollTop){clearInterval(this.interval),this.interval=null;var i=Math.round(t.scrollTop/32);t.scrollTop=32*i;var e="";e="radio"===this.pickerType?this.pickerList[i]:t.firstChild.children[i+2].innerText,console.log("取值"+i);for(var n=t.parentNode.children,a=this,s=0;s<n.length;s++)t===n[s]&&(a.result[s]=e)}else this.scrollTop=t.scrollTop},isscroll:function(){for(var t=Math.round(event.currentTarget.scrollTop/32),i=event.currentTarget.firstChild.children,e=0;e<i.length;e++)i[e].classList.contains("active")&&i[e].classList.remove("active"),i[e].classList.contains("activePrev")&&i[e].classList.remove("activePrev");i[t+1].classList.add("activePrev"),i[t+2].classList.add("active")},refresh:function(){var t=this;switch(this.pickerType){case"time":for(var i=0;i<24;i++)this.selectList[0][i]=i<10?"0"+i:i;for(var i=0;i<60;i++)this.selectList[1][i]=i<10?"0"+i:i;var e=document.querySelectorAll(".slideList");if(""!==this.pickerValue&&"请选择时间"!==this.pickerValue&&"请选择"!==this.pickerValue){var n=Number(this.pickerValue.split(":")[0]),a=Number(this.pickerValue.split(":")[1]);n<10&&(n="0"+n),a<10&&(a="0"+a),this.result[0]=n,this.result[1]=a,setTimeout(function(){e[0].scrollTop=32*n,e[1].scrollTop=32*a},100)}else this.result[0]="12",this.result[1]="00",setTimeout(function(){e[0].scrollTop=384,e[1].scrollTop=0},100);break;case"shift":this.selectList=[[]],this.pickerList.forEach(function(i,e){t.selectList[0].push(i.shift_name+"(工作时长:"+Math.floor(i.day_mins/60)+":"+i.day_mins%60+")")});var s=document.querySelectorAll(".slideList");if(""!==this.pickerValue&&"请选择班次"!==this.pickerValue){var o=this.pickerValue;this.result[0]=o;var r=0;this.pickerList.forEach(function(t,i){t.shift_name==o&&(r=i)}),setTimeout(function(){s[0].scrollTop=32*r},100)}else this.result[0]=this.selectList[0][0],setTimeout(function(){s[0].scrollTop=0},100);break;case"radio":this.selectList=[[]],this.pickerList.forEach(function(i,e){t.selectList[0].push(i.val)});var c=document.querySelectorAll(".slideList");if(""===this.pickerValue.id||void 0===this.pickerValue.id||null===this.pickerValue.id)this.result[0]=this.pickerList[0],setTimeout(function(){c[0].scrollTop=0},100);else{var l=this.pickerValue,d=0;this.pickerList.forEach(function(t,i){console.log(t.id+":"+l.id),t.id===l.id&&(d=i)});var h=this;setTimeout(function(){c[0].scrollTop=32*d,h.result[0]=h.pickerList[d]},100)}}this.width=100/this.selectList.length+"%"}},mounted:function(){},watch:{showPicker:function(t,i){clearInterval(this.interval),this.interval=null,t&&(this.filterStr="",this.refresh())}}}},383:function(t,i,e){i=t.exports=e(225)(),i.push([t.i,"\n.mask[data-v-58a8a9ae] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.pickerBox[data-v-58a8a9ae] {\n  width: 100%;\n  height: 205px;\n  background: #f5f5f5;\n  z-index: 100;\n  position: absolute;\n  bottom: -205px;\n  left: 0;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n  transition: all .5s;\n}\n.pickerBox.active[data-v-58a8a9ae] {\n    bottom: 0px;\n}\n.pickerBox .pkHeader[data-v-58a8a9ae] {\n    width: 100%;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n}\n.pickerBox .pkHeader span[data-v-58a8a9ae] {\n      width: 50px;\n      height: 45px;\n      text-align: center;\n      float: left;\n      line-height: 45px;\n}\n.pickerBox .pkHeader span.right[data-v-58a8a9ae] {\n        float: right;\n        color: #4c0;\n}\n.pickerBox .pkBody[data-v-58a8a9ae] {\n    width: 100%;\n    height: 160px;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae] {\n      width: 100%;\n      height: 100%;\n      float: left;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae]::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n}\n.pickerBox .pkBody .slideList div[data-v-58a8a9ae] {\n        width: 100%;\n}\n.pickerBox .pkBody .slideList div p[data-v-58a8a9ae] {\n          height: 32px;\n          line-height: 32px;\n          font-size: 17px;\n          text-align: center;\n          margin: 0;\n          color: #000;\n          opacity: 0.1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.activePrev[data-v-58a8a9ae] {\n            opacity: .4;\n}\n.pickerBox .pkBody .slideList div p.active + p[data-v-58a8a9ae] {\n            opacity: 0.4;\n}\n.pickerBox .pkBody .slideList div p.active + p + p[data-v-58a8a9ae] {\n            opacity: 0.1;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/timePicker.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,0BAA0B;EAC1B,YAAY;CACb;AACD;EACE,YAAY;EACZ,cAAc;EACd,oBAAoB;EACpB,aAAa;EACb,mBAAmB;EACnB,eAAe;EACf,QAAQ;EACR,uCAAuC;EACvC,oBAAoB;CACrB;AACD;IACI,YAAY;CACf;AACD;IACI,YAAY;IACZ,aAAa;IACb,iBAAiB;IACjB,uCAAuC;CAC1C;AACD;MACM,YAAY;MACZ,aAAa;MACb,mBAAmB;MACnB,YAAY;MACZ,kBAAkB;CACvB;AACD;QACQ,aAAa;QACb,YAAY;CACnB;AACD;IACI,YAAY;IACZ,cAAc;CACjB;AACD;MACM,YAAY;MACZ,aAAa;MACb,YAAY;MACZ,mBAAmB;MACnB,kCAAkC;CACvC;AACD;QACQ,SAAS;QACT,UAAU;CACjB;AACD;QACQ,YAAY;CACnB;AACD;UACU,aAAa;UACb,kBAAkB;UAClB,gBAAgB;UAChB,mBAAmB;UACnB,UAAU;UACV,YAAY;UACZ,aAAa;CACtB;AACD;YACY,WAAW;CACtB;AACD;YACY,WAAW;CACtB;AACD;YACY,YAAY;CACvB;AACD;YACY,aAAa;CACxB;AACD;YACY,aAAa;CACxB",file:"timePicker.vue",sourcesContent:["\n.mask[data-v-58a8a9ae] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.pickerBox[data-v-58a8a9ae] {\n  width: 100%;\n  height: 205px;\n  background: #f5f5f5;\n  z-index: 100;\n  position: absolute;\n  bottom: -205px;\n  left: 0;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n  transition: all .5s;\n}\n.pickerBox.active[data-v-58a8a9ae] {\n    bottom: 0px;\n}\n.pickerBox .pkHeader[data-v-58a8a9ae] {\n    width: 100%;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n}\n.pickerBox .pkHeader span[data-v-58a8a9ae] {\n      width: 50px;\n      height: 45px;\n      text-align: center;\n      float: left;\n      line-height: 45px;\n}\n.pickerBox .pkHeader span.right[data-v-58a8a9ae] {\n        float: right;\n        color: #4c0;\n}\n.pickerBox .pkBody[data-v-58a8a9ae] {\n    width: 100%;\n    height: 160px;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae] {\n      width: 100%;\n      height: 100%;\n      float: left;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae]::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n}\n.pickerBox .pkBody .slideList div[data-v-58a8a9ae] {\n        width: 100%;\n}\n.pickerBox .pkBody .slideList div p[data-v-58a8a9ae] {\n          height: 32px;\n          line-height: 32px;\n          font-size: 17px;\n          text-align: center;\n          margin: 0;\n          color: #000;\n          opacity: 0.1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.activePrev[data-v-58a8a9ae] {\n            opacity: .4;\n}\n.pickerBox .pkBody .slideList div p.active + p[data-v-58a8a9ae] {\n            opacity: 0.4;\n}\n.pickerBox .pkBody .slideList div p.active + p + p[data-v-58a8a9ae] {\n            opacity: 0.1;\n}\n"],sourceRoot:""}])},384:function(t,i,e){var n=e(383);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(226)("18b13ac2",n,!0)},385:function(t,i,e){e(384);var n=e(0)(e(381),e(386),"data-v-58a8a9ae",null);t.exports=n.exports},386:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("section",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPicker,expression:"showPicker"}],staticClass:"mask",on:{click:function(i){t.$emit("hideMask")}}}),t._v(" "),e("div",{staticClass:"pickerBox",class:t.showPicker?"active":""},[e("div",{staticClass:"pkHeader"},[e("span",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),e("span",{staticClass:"right",on:{click:t.ok}},[t._v("确认")])]),t._v(" "),e("div",{staticClass:"pkBody"},t._l(t.selectList,function(i,n){return e("div",{staticClass:"slideList",style:{width:t.width},on:{touchend:t.touchend,scroll:t.isscroll}},[e("div",[e("p"),t._v(" "),e("p"),t._v(" "),t._l(i,function(i,n){return e("p",{staticClass:"active"},[t._v(t._s(i))])}),t._v(" "),e("p"),t._v(" "),e("p")],2)])}))])])},staticRenderFns:[]}},401:function(t,i,e){"use strict";function n(t){return e.i(h.a)({url:"/api/pm/shift/list",method:"post",data:t})}function a(t){return e.i(h.a)({url:"/api/pm/calendar/list",method:"post",data:t})}function s(t){return e.i(h.a)({url:"/api/pm/calendar/delete",method:"post",data:t})}function o(t){return e.i(h.a)({url:"/api/pm/calendar/modify",method:"post",data:t})}function r(t){return e.i(h.a)({url:"/api/pm/shift/delete",method:"post",data:t})}function c(t){return e.i(h.a)({url:"/api/pm/shift/modify",method:"post",data:t})}function l(t){return e.i(h.a)({url:"/api/pm/shift/detail",method:"post",data:t})}function d(t){return e.i(h.a)({url:"/api/pm/calendar/detail",method:"post",data:t})}i.a=n,i.f=a,i.h=s,i.c=o,i.g=r,i.e=c,i.d=l,i.b=d;var h=e(10)},511:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(401),a=e(373),s=e.n(a),o=e(385),r=e.n(o);i.default={name:"shift",components:{CstItem:s.a,timePicker:r.a},data:function(){return{action:"action",shift_id:"",currIndex:"",attribute:"",showPicker:!1,showColorBox:!1,pickerType:"time",pickerValue:"",colorList:["#81B1FF","#9FE3FF","#FF6059","#FF66DD","#B566FF","#FFAC5B","#FFF66D","#8DFF72","#98FFC6"],value:[],shiftlist:[],shift_info:{shift_name:"",shift_color:"#81B1FF",shift_id:"",day_mins:"",detail_list:[{detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0}]}}},computed:{},filters:{mins:function(t){var i=Math.round(t/60),e=t%60;return i<10&&(i="0"+i),e<10&&(e="0"+e),i+":"+e}},activated:function(){},mounted:function(){this.action=this.$route.params.action,this.shift_id=this.$route.params.shift_id,"check"===this.action&&this.shiftDetail(),this.getShiftList()},methods:{getShiftList:function(){var t=this,i={curr_page:1,page_size:100,query:{shift_name:"",calendar_name:""}};e.i(n.a)(i).then(function(i){t.shiftlist=i.shift_list}).catch(function(t){$toast.show(t.description)})},add:function(){var t={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0};this.shift_info.detail_list.push(t)},deleteTime:function(t){this.shift_info.detail_list.splice(t,1)},shiftDetail:function(){var t=this,i={query:{shift_id:this.shift_id}};e.i(n.d)(i).then(function(i){t.shift_info=i.shift_info}).catch(function(t){$toast.show(t.description)})},shiftModify:function(){var t=this,i=[];this.shift_info.detail_list.forEach(function(t,e){i.push({detail_id:t.detail_id,end_time:t.end_time,shift_mins:t.shift_mins,start_time:t.start_time,is_over_day:t.is_over_day,seq:e})}),this.shift_info.detail_list=i;var a={shift_info:this.shift_info};if(""==this.shift_info.shift_name)return void $toast.show("请输入班次名称");var s=0;if(this.shiftlist.forEach(function(i,e){if(i.shift_name===t.shift_info.shift_name&&i.shift_id!=t.shift_id)return void(s=1)}),1===s)return void $toast.show("班次名称重名，请重新设置");if(!this.shift_info.detail_list.length>0)return void $toast.show("至少添加一个工作时间段");var o="";if(this.shift_info.day_mins=0,this.shift_info.detail_list.forEach(function(i,e){t.shift_info.day_mins+=i.shift_mins,""===i.shift_mins&&(o=e+1)}),""!==o)return void $toast.show("时间段"+o+"设置有误");e.i(n.e)(a).then(function(t){$toast.show("班次编辑成功"),$router.go(-1)}).catch(function(t){$toast.show(t.description)})},timePicker:function(t,i,e){"check"!==this.action&&(this.showPicker=!0,this.pickerValue=t[i],this.currIndex=e,this.attribute=i)},chosen:function(t){"end_time"===this.attribute?this.endTime(t):this.startTime(t)},endTime:function(t){var i=this;if(this.shift_info.detail_list[this.currIndex].end_time!=t){var e=this.shift_info.detail_list[this.currIndex].start_time.split(":"),n=t.split(":"),a=60*Number(e[0])+Number(e[1]),s=60*Number(n[0])+Number(n[1]);if(0===this.currIndex)s>a?(this.shift_info.detail_list[this.currIndex].shift_mins=s-a,this.shift_info.detail_list[this.currIndex].is_over_day=0):(this.shift_info.detail_list[this.currIndex].shift_mins=1440+s-a,this.shift_info.detail_list[this.currIndex].is_over_day=1),this.shift_info.detail_list[this.currIndex].end_time=t,this.shift_info.detail_list.forEach(function(t,e){e>i.currIndex&&(i.shift_info.detail_list[e]={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0})});else{var o="";if(s>a){if(1==this.shift_info.detail_list[this.currIndex-1].is_over_day){var r=this.shift_info.detail_list[0].start_time.split(":");if(r=60*Number(r[0])+Number(r[1]),!(s<=r))return void $toast.show("一个班次不能超出24h");o=s-a,this.shift_info.detail_list[this.currIndex].is_over_day=1,this.shift_info.detail_list[this.currIndex].shift_mins=o}else o=s-a,this.shift_info.detail_list[this.currIndex].is_over_day=0,this.shift_info.detail_list[this.currIndex].shift_mins=o;this.shift_info.detail_list[this.currIndex].end_time=t,this.shift_info.detail_list.forEach(function(t,e){e>i.currIndex&&(i.shift_info.detail_list[e]={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0})})}else o=1440+s-a,this.shift_info.detail_list[this.currIndex].shift_mins=o,this.shift_info.detail_list[this.currIndex].is_over_day=1,this.shift_info.detail_list[this.currIndex].end_time=t}}},startTime:function(t){var i=this;if(this.shift_info.detail_list[this.currIndex].start_time!==t){if(0===this.currIndex)this.shift_info.detail_list[this.currIndex].start_time=t,this.shift_info.detail_list.forEach(function(t,e){e>i.currIndex&&(i.shift_info.detail_list[e]={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0})});else{var e=this.shift_info.detail_list[this.currIndex-1].end_time.split(":"),n=this.shift_info.detail_list[0].start_time.split(":");n=60*Number(n[0])+Number(n[1]);var a=t.split(":"),s=60*Number(e[0])+Number(e[1]),o=60*Number(a[0])+Number(a[1]);if(o>=s)1==this.shift_info.detail_list[this.currIndex-1].is_over_day?o<n?(this.shift_info.detail_list[this.currIndex].start_time=t,this.shift_info.detail_list.forEach(function(t,e){e>i.currIndex&&(i.shift_info.detail_list[e]={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0})}),this.shift_info.detail_list[this.currIndex].is_over_day=1):$toast.show("一个班次不能超出24h"):(this.shift_info.detail_list[this.currIndex].start_time=t,this.shift_info.detail_list.forEach(function(t,e){e>i.currIndex&&(i.shift_info.detail_list[e]={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0})}),this.shift_info.detail_list[this.currIndex].is_over_day=0);else if(o<n)if(1==this.shift_info.detail_list[this.currIndex-1].is_over_day)$toast.show("开始时间必须大于上个时间段的结束时间");else{if(this.shift_info.detail_list[this.currIndex].start_time==t)return;this.shift_info.detail_list[this.currIndex].start_time=t,this.shift_info.detail_list.forEach(function(t,e){e>i.currIndex&&(i.shift_info.detail_list[e]={detail_id:"",end_time:"请选择时间",shift_mins:"",start_time:"请选择时间",is_over_day:0})}),this.shift_info.detail_list[this.currIndex].is_over_day=1}else $toast.show("一个班次不能超出24h")}this.shift_info.detail_list[this.currIndex].end_time="请选择时间"}},selectColor:function(){"check"!==this.action&&(this.showColorBox=!0)},checkedColor:function(t){this.shift_info.shift_color=t,this.showColorBox=!1}}}},670:function(t,i,e){i=t.exports=e(225)(),i.push([t.i,"\n.compute-item[data-v-7c8cf35e] {\n  margin-top: -1px !important;\n}\n.mask[data-v-7c8cf35e] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.addBtn[data-v-7c8cf35e] {\n  text-align: center;\n  margin: 20px 0;\n  color: #416EB6;\n  background: #fff;\n  border-top: 1px solid #eee;\n  border-bottom: 1px solid #eee;\n  line-height: 40px;\n}\n.selectColor .colorBox[data-v-7c8cf35e] {\n  width: 100%;\n  height: 225px;\n  position: absolute;\n  bottom: -100%;\n  left: 0;\n  background: #fff;\n  z-index: 20;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  transition: all .3s;\n}\n.selectColor .colorBox.active[data-v-7c8cf35e] {\n    bottom: 0;\n}\n.selectColor .colorBox p[data-v-7c8cf35e] {\n    text-align: center;\n    line-height: 60px;\n    margin: 0;\n}\n.selectColor .colorBox ul[data-v-7c8cf35e] {\n    width: 270px;\n    height: 165px;\n    margin: 0 auto;\n    border-radius: 10px;\n    overflow: hidden;\n}\n.selectColor .colorBox ul li[data-v-7c8cf35e] {\n      width: 80px;\n      height: 35px;\n      float: left;\n      margin: 5px;\n      background: #007aff;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/production/shopCalendar/shift.vue"],names:[],mappings:";AACA;EACE,4BAA4B;CAC7B;AACD;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,0BAA0B;EAC1B,YAAY;CACb;AACD;EACE,mBAAmB;EACnB,eAAe;EACf,eAAe;EACf,iBAAiB;EACjB,2BAA2B;EAC3B,8BAA8B;EAC9B,kBAAkB;CACnB;AACD;EACE,YAAY;EACZ,cAAc;EACd,mBAAmB;EACnB,cAAc;EACd,QAAQ;EACR,iBAAiB;EACjB,YAAY;EACZ,6BAA6B;EAC7B,8BAA8B;EAC9B,oBAAoB;CACrB;AACD;IACI,UAAU;CACb;AACD;IACI,mBAAmB;IACnB,kBAAkB;IAClB,UAAU;CACb;AACD;IACI,aAAa;IACb,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,iBAAiB;CACpB;AACD;MACM,YAAY;MACZ,aAAa;MACb,YAAY;MACZ,YAAY;MACZ,oBAAoB;CACzB",file:"shift.vue",sourcesContent:["\n.compute-item[data-v-7c8cf35e] {\n  margin-top: -1px !important;\n}\n.mask[data-v-7c8cf35e] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.addBtn[data-v-7c8cf35e] {\n  text-align: center;\n  margin: 20px 0;\n  color: #416EB6;\n  background: #fff;\n  border-top: 1px solid #eee;\n  border-bottom: 1px solid #eee;\n  line-height: 40px;\n}\n.selectColor .colorBox[data-v-7c8cf35e] {\n  width: 100%;\n  height: 225px;\n  position: absolute;\n  bottom: -100%;\n  left: 0;\n  background: #fff;\n  z-index: 20;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  transition: all .3s;\n}\n.selectColor .colorBox.active[data-v-7c8cf35e] {\n    bottom: 0;\n}\n.selectColor .colorBox p[data-v-7c8cf35e] {\n    text-align: center;\n    line-height: 60px;\n    margin: 0;\n}\n.selectColor .colorBox ul[data-v-7c8cf35e] {\n    width: 270px;\n    height: 165px;\n    margin: 0 auto;\n    border-radius: 10px;\n    overflow: hidden;\n}\n.selectColor .colorBox ul li[data-v-7c8cf35e] {\n      width: 80px;\n      height: 35px;\n      float: left;\n      margin: 5px;\n      background: #007aff;\n}\n"],sourceRoot:""}])},809:function(t,i,e){var n=e(670);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(226)("fd09919a",n,!0)},957:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[e("div",{staticClass:"mw-page-header"},[e("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(i){t.$router.go(-1)}}}),t._v(" "),e("span",[t._v("新增班次")]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:"check"===t.action,expression:"action==='check'"}],staticClass:"right",on:{click:function(i){t.action="action"}}},[t._v("编辑")]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:"action"===t.action,expression:"action==='action'"}],staticClass:"right",on:{click:function(i){t.action="check"}}},[t._v("取消")]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:"new"===t.action,expression:"action==='new'"}],staticClass:"right"})]),t._v(" "),e("div",{staticClass:"mw-page-content "},[e("cst-item",{attrs:{label:"班次名称",placeholder:""===t.shift_info.shift_name?"请输入班次名称":"",action:t.action,editType:"text"},model:{value:t.shift_info.shift_name,callback:function(i){t.$set(t.shift_info,"shift_name",i)},expression:"shift_info.shift_name"}}),t._v(" "),e("cst-item",{attrs:{label:"选择颜色",color:t.shift_info.shift_color,editType:"color"},nativeOn:{click:function(i){t.selectColor()}}}),t._v(" "),t._l(t.shift_info.detail_list,function(i,n){return e("div",[e("div",{staticClass:"item-divider"},[e("span",{staticClass:"left"},[t._v("时间段"+t._s(n+1))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:"check"!=t.action,expression:"action!='check'"}],staticClass:"right",on:{click:function(i){t.deleteTime(n)}}},[t._v("删除")])]),t._v(" "),e("cst-item",{attrs:{label:"开始时间",hasArrow:"action"===t.action,action:t.action,canEdit:!1,editType:"text"},nativeOn:{click:function(e){t.timePicker(i,"start_time",n)}},model:{value:i.start_time,callback:function(e){t.$set(i,"start_time",e)},expression:"item.start_time"}}),t._v(" "),e("cst-item",{attrs:{label:"结束时间",hasArrow:"action"===t.action,action:t.action,canEdit:!1,editType:"text"},nativeOn:{click:function(e){t.timePicker(i,"end_time",n)}},model:{value:i.end_time,callback:function(e){t.$set(i,"end_time",e)},expression:"item.end_time"}}),t._v(" "),e("item",{staticClass:"item-icon-right"},[t._v("\n        工作时长\n        "),e("span",{staticClass:"item-note",staticStyle:{"margin-right":"0"}},[t._v(t._s(t._f("mins")(i.shift_mins)))])])],1)}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:"check"!==t.action,expression:"action!=='check'"}],staticClass:"addBtn",on:{click:function(i){t.add()}}},[t._v("+添加时间段")])],2),t._v(" "),e("div",{staticClass:"mw-page-footer"},[e("div",{staticClass:"btns"},[e("div",{staticClass:"btn",on:{click:t.shiftModify}},[t._v("\n        确定\n      ")])])]),t._v(" "),e("time-picker",{attrs:{showPicker:t.showPicker,pickerType:t.pickerType,pickerValue:t.pickerValue},on:{chosen:t.chosen,hideMask:function(i){t.showPicker=!1}}}),t._v(" "),e("div",{staticClass:"selectColor"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showColorBox,expression:"showColorBox"}],staticClass:"mask",on:{click:function(i){t.showColorBox=!1}}}),t._v(" "),e("div",{staticClass:"colorBox",class:t.showColorBox?"active":""},[e("p",[t._v("颜色选择")]),t._v(" "),e("ul",t._l(t.colorList,function(i,n){return e("li",{style:{background:i},on:{click:function(e){t.checkedColor(i)}}})}))])])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=19.2711f30a995b996ea0aa.js.map