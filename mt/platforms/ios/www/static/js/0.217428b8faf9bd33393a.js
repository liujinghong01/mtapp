webpackJsonp([0],{370:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={name:"cstItem",data:function(){return{selectId:"select-"+Math.random().toString(36).substring(3,6)}},props:{label:{type:String,required:!0},value:{type:"",default:""},placeholder:{type:String,default:""},canEdit:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!1},arrowText:{type:[String,Number],default:""},arrowClick:{type:Function},editType:{type:String,default:"text"},isSelect:{type:Boolean,default:!1},options:{type:Array},action:{type:String,default:"check"},color:""},methods:{noteClick:function(){this.arrowClick&&this.arrowClick()},input:function(e){var t=e.target.value;this.$emit("input",t)}}}},371:function(e,t,o){t=e.exports=o(225)(),t.push([e.i,"\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/cstItem.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,mBAAmB;EACnB,wBAAwB;EACxB,qBAAqB;EACrB,cAAc;CACf;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,mBAAmB;IACnB,YAAY;IACZ,UAAU;IACV,gBAAgB;CACnB;AACD;MACM,UAAU;CACf;AACD;IACI,oBAAoB;QAChB,gBAAgB;IACpB,aAAa;IACb,eAAe;IACf,0BAA0B;IAC1B,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,kBAAkB;CACrB;AACD;IACI,mBAAmB;QACf,eAAe;IACnB,kBAAkB;CACrB;AACD;MACM,UAAU;MACV,WAAW;MACX,aAAa;MACb,eAAe;MACf,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,kBAAkB;MAClB,wBAAwB;MACxB,oBAAoB;MACpB,iBAAiB;CACtB;AACD;MACM,aAAa;MACb,kBAAkB;CACvB;AACD;QACQ,sBAAsB;QACtB,YAAY;QACZ,aAAa;QACb,mBAAmB;CAC1B;AACD;IACI,iBAAiB;QACb,aAAa;CACpB;AACD;MACM,aAAa;MACb,eAAe;MACf,kBAAkB;MAClB,mBAAmB;MACnB,oBAAoB;CACzB",file:"cstItem.vue",sourcesContent:["\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n"],sourceRoot:""}])},372:function(e,t,o){var n=o(371);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(226)("6ea14c28",n,!0)},373:function(e,t,o){o(372);var n=o(0)(o(370),o(374),"data-v-19336c8e",null);e.exports=n.exports},374:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"compute-item"},[o("span",{staticClass:"label"},[e._v(e._s(e.label))]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"color"!==e.editType,expression:"editType!=='color'"}],staticClass:"value"},[e.canEdit&&"check"!==e.action&&"approve"!==e.action&&"checkOnly"!==e.action?o("input",{ref:"input",attrs:{type:e.editType,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.input}}):o("span",[e._v(e._s(e.value))])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"color"===e.editType,expression:"editType==='color'"}],staticClass:"value"},[o("span",{staticClass:"color",style:{background:e.color}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.hasArrow,expression:"hasArrow"}],staticClass:"note"},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.hasArrow&&e.arrowText,expression:"hasArrow&&arrowText"}],staticClass:"item-notes",on:{click:e.noteClick}},[e._v(e._s(e.arrowText))]),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.hasArrow,expression:"hasArrow"}],staticClass:"icon ion-ios-arrow-right arrow "})]),e._v(" "),o("div",{staticClass:"hairline-top"})])},staticRenderFns:[]}},381:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},name:"timePicker",data:function(){return{currIndex:0,scrollTop:"",interval:"",width:"100%",result:[],selectList:[[],[]]}},computed:{},props:{showPicker:{type:Boolean,default:!1,required:!0},pickerType:{type:String,default:"time",required:!0},pickerValue:{},pickerList:{}},methods:{ok:function(){switch(this.pickerType){case"time":this.$emit("chosen",this.result[0]+":"+this.result[1]);break;case"shift":case"radio":this.$emit("chosen",this.result[0])}this.$emit("hideMask")},cancel:function(){this.$emit("hideMask")},touchend:function(){var e=this;e.scrollTop=event.currentTarget.scrollTop;var t=event.currentTarget;clearInterval(e.interval),e.interval=null,e.interval=setInterval(function(){e.scroll(t)},100)},scroll:function(e){if(e.scrollTop==this.scrollTop){clearInterval(this.interval),this.interval=null;var t=Math.round(e.scrollTop/32);e.scrollTop=32*t;var o="";o="radio"===this.pickerType?this.pickerList[t]:e.firstChild.children[t+2].innerText,console.log("取值"+t);for(var n=e.parentNode.children,i=this,a=0;a<n.length;a++)e===n[a]&&(i.result[a]=o)}else this.scrollTop=e.scrollTop},isscroll:function(){for(var e=Math.round(event.currentTarget.scrollTop/32),t=event.currentTarget.firstChild.children,o=0;o<t.length;o++)t[o].classList.contains("active")&&t[o].classList.remove("active"),t[o].classList.contains("activePrev")&&t[o].classList.remove("activePrev");t[e+1].classList.add("activePrev"),t[e+2].classList.add("active")},refresh:function(){var e=this;switch(this.pickerType){case"time":for(var t=0;t<24;t++)this.selectList[0][t]=t<10?"0"+t:t;for(var t=0;t<60;t++)this.selectList[1][t]=t<10?"0"+t:t;var o=document.querySelectorAll(".slideList");if(""!==this.pickerValue&&"请选择时间"!==this.pickerValue&&"请选择"!==this.pickerValue){var n=Number(this.pickerValue.split(":")[0]),i=Number(this.pickerValue.split(":")[1]);n<10&&(n="0"+n),i<10&&(i="0"+i),this.result[0]=n,this.result[1]=i,setTimeout(function(){o[0].scrollTop=32*n,o[1].scrollTop=32*i},100)}else this.result[0]="12",this.result[1]="00",setTimeout(function(){o[0].scrollTop=384,o[1].scrollTop=0},100);break;case"shift":this.selectList=[[]],this.pickerList.forEach(function(t,o){e.selectList[0].push(t.shift_name+"(工作时长:"+Math.floor(t.day_mins/60)+":"+t.day_mins%60+")")});var a=document.querySelectorAll(".slideList");if(""!==this.pickerValue&&"请选择班次"!==this.pickerValue){var c=this.pickerValue;this.result[0]=c;var s=0;this.pickerList.forEach(function(e,t){e.shift_name==c&&(s=t)}),setTimeout(function(){a[0].scrollTop=32*s},100)}else this.result[0]=this.selectList[0][0],setTimeout(function(){a[0].scrollTop=0},100);break;case"radio":this.selectList=[[]],this.pickerList.forEach(function(t,o){e.selectList[0].push(t.val)});var r=document.querySelectorAll(".slideList");if(""===this.pickerValue.id||void 0===this.pickerValue.id||null===this.pickerValue.id)this.result[0]=this.pickerList[0],setTimeout(function(){r[0].scrollTop=0},100);else{var p=this.pickerValue,l=0;this.pickerList.forEach(function(e,t){console.log(e.id+":"+p.id),e.id===p.id&&(l=t)});var d=this;setTimeout(function(){r[0].scrollTop=32*l,d.result[0]=d.pickerList[l]},100)}}this.width=100/this.selectList.length+"%"}},mounted:function(){},watch:{showPicker:function(e,t){clearInterval(this.interval),this.interval=null,e&&(this.filterStr="",this.refresh())}}}},383:function(e,t,o){t=e.exports=o(225)(),t.push([e.i,"\n.mask[data-v-58a8a9ae] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.pickerBox[data-v-58a8a9ae] {\n  width: 100%;\n  height: 205px;\n  background: #f5f5f5;\n  z-index: 100;\n  position: absolute;\n  bottom: -205px;\n  left: 0;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n  transition: all .5s;\n}\n.pickerBox.active[data-v-58a8a9ae] {\n    bottom: 0px;\n}\n.pickerBox .pkHeader[data-v-58a8a9ae] {\n    width: 100%;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n}\n.pickerBox .pkHeader span[data-v-58a8a9ae] {\n      width: 50px;\n      height: 45px;\n      text-align: center;\n      float: left;\n      line-height: 45px;\n}\n.pickerBox .pkHeader span.right[data-v-58a8a9ae] {\n        float: right;\n        color: #4c0;\n}\n.pickerBox .pkBody[data-v-58a8a9ae] {\n    width: 100%;\n    height: 160px;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae] {\n      width: 100%;\n      height: 100%;\n      float: left;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae]::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n}\n.pickerBox .pkBody .slideList div[data-v-58a8a9ae] {\n        width: 100%;\n}\n.pickerBox .pkBody .slideList div p[data-v-58a8a9ae] {\n          height: 32px;\n          line-height: 32px;\n          font-size: 17px;\n          text-align: center;\n          margin: 0;\n          color: #000;\n          opacity: 0.1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.activePrev[data-v-58a8a9ae] {\n            opacity: .4;\n}\n.pickerBox .pkBody .slideList div p.active + p[data-v-58a8a9ae] {\n            opacity: 0.4;\n}\n.pickerBox .pkBody .slideList div p.active + p + p[data-v-58a8a9ae] {\n            opacity: 0.1;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/timePicker.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,0BAA0B;EAC1B,YAAY;CACb;AACD;EACE,YAAY;EACZ,cAAc;EACd,oBAAoB;EACpB,aAAa;EACb,mBAAmB;EACnB,eAAe;EACf,QAAQ;EACR,uCAAuC;EACvC,oBAAoB;CACrB;AACD;IACI,YAAY;CACf;AACD;IACI,YAAY;IACZ,aAAa;IACb,iBAAiB;IACjB,uCAAuC;CAC1C;AACD;MACM,YAAY;MACZ,aAAa;MACb,mBAAmB;MACnB,YAAY;MACZ,kBAAkB;CACvB;AACD;QACQ,aAAa;QACb,YAAY;CACnB;AACD;IACI,YAAY;IACZ,cAAc;CACjB;AACD;MACM,YAAY;MACZ,aAAa;MACb,YAAY;MACZ,mBAAmB;MACnB,kCAAkC;CACvC;AACD;QACQ,SAAS;QACT,UAAU;CACjB;AACD;QACQ,YAAY;CACnB;AACD;UACU,aAAa;UACb,kBAAkB;UAClB,gBAAgB;UAChB,mBAAmB;UACnB,UAAU;UACV,YAAY;UACZ,aAAa;CACtB;AACD;YACY,WAAW;CACtB;AACD;YACY,WAAW;CACtB;AACD;YACY,YAAY;CACvB;AACD;YACY,aAAa;CACxB;AACD;YACY,aAAa;CACxB",file:"timePicker.vue",sourcesContent:["\n.mask[data-v-58a8a9ae] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 16;\n  background-color: #2e2e2d;\n  opacity: .4;\n}\n.pickerBox[data-v-58a8a9ae] {\n  width: 100%;\n  height: 205px;\n  background: #f5f5f5;\n  z-index: 100;\n  position: absolute;\n  bottom: -205px;\n  left: 0;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n  transition: all .5s;\n}\n.pickerBox.active[data-v-58a8a9ae] {\n    bottom: 0px;\n}\n.pickerBox .pkHeader[data-v-58a8a9ae] {\n    width: 100%;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n}\n.pickerBox .pkHeader span[data-v-58a8a9ae] {\n      width: 50px;\n      height: 45px;\n      text-align: center;\n      float: left;\n      line-height: 45px;\n}\n.pickerBox .pkHeader span.right[data-v-58a8a9ae] {\n        float: right;\n        color: #4c0;\n}\n.pickerBox .pkBody[data-v-58a8a9ae] {\n    width: 100%;\n    height: 160px;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae] {\n      width: 100%;\n      height: 100%;\n      float: left;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n}\n.pickerBox .pkBody .slideList[data-v-58a8a9ae]::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n}\n.pickerBox .pkBody .slideList div[data-v-58a8a9ae] {\n        width: 100%;\n}\n.pickerBox .pkBody .slideList div p[data-v-58a8a9ae] {\n          height: 32px;\n          line-height: 32px;\n          font-size: 17px;\n          text-align: center;\n          margin: 0;\n          color: #000;\n          opacity: 0.1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.active[data-v-58a8a9ae] {\n            opacity: 1;\n}\n.pickerBox .pkBody .slideList div p.activePrev[data-v-58a8a9ae] {\n            opacity: .4;\n}\n.pickerBox .pkBody .slideList div p.active + p[data-v-58a8a9ae] {\n            opacity: 0.4;\n}\n.pickerBox .pkBody .slideList div p.active + p + p[data-v-58a8a9ae] {\n            opacity: 0.1;\n}\n"],sourceRoot:""}])},384:function(e,t,o){var n=o(383);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(226)("18b13ac2",n,!0)},385:function(e,t,o){o(384);var n=o(0)(o(381),o(386),"data-v-58a8a9ae",null);e.exports=n.exports},386:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showPicker,expression:"showPicker"}],staticClass:"mask",on:{click:function(t){e.$emit("hideMask")}}}),e._v(" "),o("div",{staticClass:"pickerBox",class:e.showPicker?"active":""},[o("div",{staticClass:"pkHeader"},[o("span",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("span",{staticClass:"right",on:{click:e.ok}},[e._v("确认")])]),e._v(" "),o("div",{staticClass:"pkBody"},e._l(e.selectList,function(t,n){return o("div",{staticClass:"slideList",style:{width:e.width},on:{touchend:e.touchend,scroll:e.isscroll}},[o("div",[o("p"),e._v(" "),o("p"),e._v(" "),e._l(t,function(t,n){return o("p",{staticClass:"active"},[e._v(e._s(t))])}),e._v(" "),o("p"),e._v(" "),o("p")],2)])}))])])},staticRenderFns:[]}},409:function(e,t,o){"use strict";function n(e){return o.i(p.a)({url:"api/customerOrder/dict/processCostItemUnitList",method:"post",data:e})}function i(e){return o.i(p.a)({url:"/api/pm/proc/modify",method:"post",data:e})}function a(e){return o.i(p.a)({url:"/api/pm/proc/list",method:"post",data:e})}function c(e){return o.i(p.a)({url:"/api/pm/proc/delete",method:"post",data:e})}function s(e){return o.i(p.a)({url:"/api/pm/proc/detail",method:"post",data:e})}function r(e){return o.i(p.a)({url:"/api/pm/pg/detail",method:"post",data:e})}t.c=n,t.e=i,t.b=a,t.f=c,t.a=s,t.d=r;var p=o(10)},494:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(6),i=o.n(n),a=(o(79),o(409)),c=o(385),s=o.n(c),r=o(373),p=o.n(r),l=o(1);t.default={name:"templateAddProc",components:{timePicker:s.a,CstItem:p.a},computed:{},data:function(){return{showPicker:!1,currSelect:"",pickerType:"radio",pickerValue:"",pickerList:[],action:"new",proc_id:"",proc_name_list:[{val:"name",id:"id"}],pgList:[],devList:[],proc_info:{ass_add_time:"",id:"",is_can_ass:1,proc_desc:"",proc_name:"",proc_no:"",proc_type:1,company:"请选择",company_id:"",proc_pg_list:[{}]},procInfo:{ass_calc_qty:"",ass_price:"",ass_time:"",ass_unit:"",ass_up:"",device_id:"",device_name:"请选择",id:"",is_need_qc:"1",labor_time:"",machine_time:"",other_time:"",pg_id:"",pg_name:"请选择",pg_type:0,pic_path:"",proc_desc:"",proc_id:"",proc_name:"请选择工序",proc_qty:"",proc_seq:"",proc_type:"1"}}},activated:function(){this.action},mounted:function(){var e=this.$route.query;this.action=e.action,"new"===this.action?this.processList():"action"===this.action&&(this.getProcInfo(),this.processList(),this.processDetail(),this.pgDetail())},watch:{procInfo:{handler:function(e){e.ass_price=Number(e.ass_up)*Number(e.ass_calc_qty)*Number(e.proc_qty)},deep:!0}},methods:{getProcInfo:function(){this.procInfo=l.a.get("procInfo"),l.a.remove("procInfo")},storage:function(){if(1==this.procInfo.proc_type)if(0==this.procInfo.pg_type){if(""==this.procInfo.device_id||null==this.procInfo.device_id)return void $toast.show("请选择设备");if(""===this.procInfo.machine_time||null===this.procInfo.machine_time)return void $toast.show("请输入机器工时");if(""===this.procInfo.proc_desc||null===this.procInfo.proc_desc)return void $toast.show("请输入加工内容");this.procInfo.labor_time="",l.a.set("procInfo",i()(this.procInfo)),this.$router.go(-1)}else{if(""==this.procInfo.labor_time||null==this.procInfo.labor_time)return void $toast.show("请输入人工工时");if(""===this.procInfo.proc_desc||null===this.procInfo.proc_desc)return void $toast.show("请输入加工内容");this.procInfo.device_id="",this.procInfo.machine_time="",l.a.set("procInfo",i()(this.procInfo)),this.$router.go(-1)}else if(2==this.procInfo.proc_type){if(""==this.procInfo.ass_calc_qty||null==this.procInfo.ass_calc_qty)return void $toast.show("请输入单位数量");if(""==this.procInfo.proc_qty||null==this.procInfo.proc_qty)return void $toast.show("请输入生产数量");if(""==this.procInfo.ass_up||null==this.procInfo.ass_up)return void $toast.show("请输入单位价格");if(isNaN(this.procInfo.ass_price))return void $toast.show("参数错误");if(""===this.procInfo.proc_desc||null===this.procInfo.proc_desc)return void $toast.show("请输入加工内容");l.a.set("procInfo",i()(this.procInfo)),this.$router.go(-1)}},processDetail:function(){var e=this,t={query:{proc_id:this.procInfo.proc_id}};o.i(a.a)(t).then(function(t){null!==t.proc_info?(e.procInfo.proc_type=t.proc_info.proc_type,e.procInfo.ass_time=t.proc_info.ass_time,e.procInfo.other_time=t.proc_info.other_time,e.procInfo.ass_unit=t.proc_info.ass_unit,e.pgList=[],t.proc_info.pg_list.forEach(function(t,o){"1"==t.is_default&&"new"===e.action&&(e.procInfo.pg_id=t.pg_id,e.procInfo.pg_name=t.pg_name,e.pgDetail()),e.pgList.push({val:t.pg_name,id:t.pg_id})})):$toast.show("工序已失效，请重新选择")}).catch(function(e){$toast.show(e.description)})},select:function(e){"name"===e?(this.showPicker=!0,this.currSelect=e,this.pickerValue={val:this.procInfo.proc_name,id:this.procInfo.proc_id},this.pickerList=this.proc_name_list):"dep"===e?(this.showPicker=!0,this.currSelect=e,this.pickerValue={val:this.procInfo.pg_name,id:this.procInfo.pg_id},this.pickerList=this.pgList,console.log(this.pickerList)):"dev"===e&&(this.devList.length>0?(this.showPicker=!0,this.currSelect=e,this.pickerValue={val:this.procInfo.device_name,id:this.procInfo.device_id},this.pickerList=this.devList):$toast.show("该生产小组暂未配置设备"))},processList:function(){var e=this;this.proc_name_list=[];var t={query:{proc_nameL:"",proc_no:"",status:""}};o.i(a.b)(t).then(function(t){t.proc_info.forEach(function(t,o){e.proc_name_list.push({val:t.proc_name,id:t.id})})}).catch(function(e){$toast.show(e.description)})},processCostItemUnitList:function(){var e=this,t={};o.i(a.c)(t).then(function(t){t.unit_list.forEach(function(t,o){e.pickerList.push({val:t.name,id:t.code})})}).catch(function(e){$toast.show(e.description)})},pgDetail:function(){var e=this,t={query:{pg_id:this.procInfo.pg_id}};o.i(a.d)(t).then(function(t){e.procInfo.pg_type=t.pg_info.pg_type,0==e.procInfo.pg_type&&(t.pg_info.device_list.length>0?(e.devList=[],t.pg_info.device_list.forEach(function(t,o){e.devList.push({val:t.device_name,id:t.device_id})})):e.devList=[])}).catch(function(e){$toast.show(e.description)})},chosen:function(e){"name"==this.currSelect?(this.procInfo.proc_name=e.val,this.procInfo.proc_id=e.id,this.processDetail()):"dep"===this.currSelect?(this.procInfo.pg_id=e.id,this.procInfo.pg_name=e.val,this.pgDetail()):"dev"===this.currSelect&&(this.procInfo.device_name=e.val,this.procInfo.device_id=e.id)}}}},587:function(e,t,o){t=e.exports=o(225)(),t.push([e.i,'\n@charset "UTF-8";\n.item-img[data-v-1798f697] {\n  width: 30px;\n  height: 30px;\n  float: left;\n}\n.item .rigth[data-v-1798f697] {\n  float: right;\n  padding-right: 15px;\n}\n.item .arrow[data-v-1798f697] {\n  color: #DDD;\n  position: absolute;\n  right: 15px;\n  top: 14px;\n  font-size: 20px;\n}\n.item > span.stopIcon[data-v-1798f697]:before {\n  content: "\\3001";\n}\n.item > span.stopIcon[data-v-1798f697]:first-of-type:before {\n  content: "\\FF1A";\n}\n',"",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/production/procTemplate/addProcedure.vue"],names:[],mappings:";AACA,iBAAiB;AACjB;EACE,YAAY;EACZ,aAAa;EACb,YAAY;CACb;AACD;EACE,aAAa;EACb,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,mBAAmB;EACnB,YAAY;EACZ,UAAU;EACV,gBAAgB;CACjB;AACD;EACE,iBAAa;CACd;AACD;EACE,iBAAa;CACd",file:"addProcedure.vue",sourcesContent:['\n@charset "UTF-8";\n.item-img[data-v-1798f697] {\n  width: 30px;\n  height: 30px;\n  float: left;\n}\n.item .rigth[data-v-1798f697] {\n  float: right;\n  padding-right: 15px;\n}\n.item .arrow[data-v-1798f697] {\n  color: #DDD;\n  position: absolute;\n  right: 15px;\n  top: 14px;\n  font-size: 20px;\n}\n.item > span.stopIcon[data-v-1798f697]:before {\n  content: "、";\n}\n.item > span.stopIcon[data-v-1798f697]:first-of-type:before {\n  content: "：";\n}\n'],sourceRoot:""}])},726:function(e,t,o){var n=o(587);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(226)("40a03ae4",n,!0)},871:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[o("div",{staticClass:"mw-page-header"},[o("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(t){e.$router.go(-1)}}}),e._v(" "),"new"===e.action?o("span",[e._v("添加工序")]):o("span",[e._v("工序详情")]),e._v(" "),o("i",{staticClass:"right"})]),e._v(" "),o("div",{staticClass:"mw-page-content "},[o("cst-item",{attrs:{label:"工序名称",placeholder:"请选择工序",action:"check",hasArrow:!0},nativeOn:{click:function(t){e.select("name")}},model:{value:e.procInfo.proc_name,callback:function(t){e.$set(e.procInfo,"proc_name",t)},expression:"procInfo.proc_name"}}),e._v(" "),o("item",{directives:[{name:"show",rawName:"v-show",value:"请选择工序"!==e.procInfo.proc_name,expression:"procInfo.proc_name!=='请选择工序'"}],staticStyle:{"margin-bottom":"0"}},[o("span",[e._v("工序类型：")]),e._v(" "),o("label",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type,expression:"procInfo.proc_type==1"}]},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.proc_type,expression:"procInfo.proc_type"}],attrs:{name:"isType",disabled:"",type:"radio",value:"1"},domProps:{checked:e._q(e.procInfo.proc_type,"1")},on:{change:function(t){e.$set(e.procInfo,"proc_type","1")}}}),e._v(" 生产")]),e._v(" "),o("label",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}]},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.proc_type,expression:"procInfo.proc_type"}],attrs:{name:"isType",disabled:"",type:"radio",value:"2"},domProps:{checked:e._q(e.procInfo.proc_type,"2")},on:{change:function(t){e.$set(e.procInfo,"proc_type","2")}}}),e._v(" 外协")])]),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}],attrs:{label:"外协工期(小时)",action:"check"},model:{value:e.procInfo.ass_time,callback:function(t){e.$set(e.procInfo,"ass_time",t)},expression:"procInfo.ass_time"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}],attrs:{label:"计价单位",action:"check"},model:{value:e.procInfo.ass_unit,callback:function(t){e.$set(e.procInfo,"ass_unit",t)},expression:"procInfo.ass_unit"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}],attrs:{label:"单位数量",placeholder:"请输入单位数量",action:e.action},model:{value:e.procInfo.ass_calc_qty,callback:function(t){e.$set(e.procInfo,"ass_calc_qty",t)},expression:"procInfo.ass_calc_qty"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}],attrs:{label:"生产数量",placeholder:"请输入生产数量",action:e.action},model:{value:e.procInfo.proc_qty,callback:function(t){e.$set(e.procInfo,"proc_qty",t)},expression:"procInfo.proc_qty"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}],attrs:{label:"计价单价",placeholder:"请输入外协单价",action:e.action},model:{value:e.procInfo.ass_up,callback:function(t){e.$set(e.procInfo,"ass_up",t)},expression:"procInfo.ass_up"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:2==e.procInfo.proc_type,expression:"procInfo.proc_type==2"}],attrs:{label:"外协金额",action:"check"},model:{value:e.procInfo.ass_price,callback:function(t){e.$set(e.procInfo,"ass_price",t)},expression:"procInfo.ass_price"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type,expression:"procInfo.proc_type==1"}],attrs:{label:"生产小组",action:"check",hasArrow:!0},nativeOn:{click:function(t){e.select("dep")}},model:{value:e.procInfo.pg_name,callback:function(t){e.$set(e.procInfo,"pg_name",t)},expression:"procInfo.pg_name"}}),e._v(" "),o("item",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type,expression:"procInfo.proc_type==1"}],staticStyle:{"margin-bottom":"0"}},[o("span",[e._v("部门类型："+e._s(e.procInfo.pg_type))]),e._v(" "),o("label",{directives:[{name:"show",rawName:"v-show",value:0==e.procInfo.pg_type,expression:"procInfo.pg_type==0"}]},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.pg_type,expression:"procInfo.pg_type"}],attrs:{name:"isPgType",disabled:"",type:"radio",value:"0"},domProps:{checked:e._q(e.procInfo.pg_type,"0")},on:{change:function(t){e.$set(e.procInfo,"pg_type","0")}}}),e._v(" 机器")]),e._v(" "),o("label",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.pg_type,expression:"procInfo.pg_type==1"}]},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.pg_type,expression:"procInfo.pg_type"}],attrs:{name:"isPgType",disabled:"",type:"radio",value:"1"},domProps:{checked:e._q(e.procInfo.pg_type,"1")},on:{change:function(t){e.$set(e.procInfo,"pg_type","1")}}}),e._v(" 人工")])]),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type&&0==e.procInfo.pg_type,expression:"procInfo.proc_type==1&&procInfo.pg_type==0"}],attrs:{label:"设备",action:"check",hasArrow:!0},nativeOn:{click:function(t){e.select("dev")}},model:{value:e.procInfo.device_name,callback:function(t){e.$set(e.procInfo,"device_name",t)},expression:"procInfo.device_name"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type&&0==e.procInfo.pg_type,expression:"procInfo.proc_type==1&&procInfo.pg_type==0"}],attrs:{label:"机器工时(小时)",placeholder:"请输入机器工时",action:e.action},model:{value:e.procInfo.machine_time,callback:function(t){e.$set(e.procInfo,"machine_time",t)},expression:"procInfo.machine_time"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type&&0!=e.procInfo.pg_type,expression:"procInfo.proc_type==1&&procInfo.pg_type!=0"}],attrs:{label:"人工工时(小时)",placeholder:"请输入人工工时",action:e.action},model:{value:e.procInfo.labor_time,callback:function(t){e.$set(e.procInfo,"labor_time",t)},expression:"procInfo.labor_time"}}),e._v(" "),o("cst-item",{directives:[{name:"show",rawName:"v-show",value:1==e.procInfo.proc_type&&0==e.procInfo.pg_type,expression:"procInfo.proc_type==1&&procInfo.pg_type==0"}],attrs:{label:"辅助时间(小时)",action:"check"},model:{value:e.procInfo.other_time,callback:function(t){e.$set(e.procInfo,"other_time",t)},expression:"procInfo.other_time"}}),e._v(" "),o("item",{staticStyle:{"margin-bottom":"0"}},[o("span",[e._v("是否质检：")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.is_need_qc,expression:"procInfo.is_need_qc"}],attrs:{name:"isQc",type:"radio",value:"1"},domProps:{checked:e._q(e.procInfo.is_need_qc,"1")},on:{change:function(t){e.$set(e.procInfo,"is_need_qc","1")}}}),e._v(" 是")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.is_need_qc,expression:"procInfo.is_need_qc"}],attrs:{name:"isQc",type:"radio",value:"2"},domProps:{checked:e._q(e.procInfo.is_need_qc,"2")},on:{change:function(t){e.$set(e.procInfo,"is_need_qc","2")}}}),e._v(" 否")])]),e._v(" "),o("item",[o("span",[e._v("加工内容:")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.procInfo.proc_desc,expression:"procInfo.proc_desc"}],staticStyle:{resize:"none",width:"100%",height:"68px","line-height":"16px","font-size":"12px"},attrs:{placeholder:"加工内容"},domProps:{value:e.procInfo.proc_desc},on:{input:function(t){t.target.composing||e.$set(e.procInfo,"proc_desc",t.target.value)}}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"check"!==e.action,expression:"action!=='check'"}],staticClass:"mw-page-footer"},[o("div",{staticClass:"btns"},[o("div",{staticClass:"btn",on:{click:function(t){e.storage()}}},[e._v("\n          确定\n        ")])])]),e._v(" "),o("time-picker",{attrs:{showPicker:e.showPicker,pickerType:e.pickerType,pickerValue:e.pickerValue,pickerList:e.pickerList},on:{chosen:e.chosen,hideMask:function(t){e.showPicker=!1}}})],1)])},staticRenderFns:[]}},90:function(e,t,o){o(726);var n=o(0)(o(494),o(871),"data-v-1798f697",null);e.exports=n.exports}});
//# sourceMappingURL=0.217428b8faf9bd33393a.js.map