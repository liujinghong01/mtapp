{"version":3,"sources":["webpack:///static/js/52.3787a90413d2dd93e0fb.js","webpack:///./src/views/storage/scrap/detail.vue","webpack:///./src/api/approve.js?a958*","webpack:///./src/api/storage/scrap.js?93a0","webpack:///detail.vue?f3fa","webpack:///./src/views/storage/scrap/detail.vue?b6e5","webpack:///./src/views/storage/scrap/detail.vue?bfb7","webpack:///./src/views/storage/scrap/detail.vue?ebcc"],"names":["webpackJsonp","310","module","exports","__webpack_require__","Component","347","__webpack_exports__","submitApprove","data","i","__WEBPACK_IMPORTED_MODULE_0__utils_fetch__","url","method","approveSuggests","358","searchMat","scrapSubmit","scrapList","getScrapDetail","scrap","467","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__api_storage_scrap__","__WEBPACK_IMPORTED_MODULE_1__api_approve__","__WEBPACK_IMPORTED_MODULE_2__components_swipeItem__","__WEBPACK_IMPORTED_MODULE_2__components_swipeItem___default","n","__WEBPACK_IMPORTED_MODULE_3__utils__","__WEBPACK_IMPORTED_MODULE_4_vuex__","name","components","SwipeItem","a","step","scrap_no","is_scraped","action","depsList","dep_name","dep_id","mat_no","bill_id","request_date","searchMatLit","store_mat_list","selectInfo","switch","selectType","title","list","activated","methods","requestData","scrap_id","this","$dialog","confirm","theme","cancelText","okText","then","res","scrap_info","$toast","show","$router","go","catch","error","description","CancelEdit","scrapDetail","_this","query","scrap_mat_info","scrap_detail_list","approve_step","approve_flag","approve_man_id","approve_man_name","approve_sugg","bill_type","submit","_this2","listIndexOf","length","forEach","e","remark","onSelect","_this3","push","Delete","index","splice","onCheck","item","$set","_this4","mat_desc","mat_id","mat_model","onChange","type","_this5","Number","quantity","stock_qty","computed","mounted","$route","params","chosenCompany","deps","512","version","sources","names","mappings","file","sourcesContent","sourceRoot","613","content","locals","722","render","_vm","_h","$createElement","_c","_self","directives","rawName","hideNavbar","expression","staticClass","on","click","$event","_v","class","_s","userinfo","username","staticStyle","overflow","color","float","font-size","margin-top","_l","attrs","disabled","domProps","change","input","target","composing","mat_type_name","placeholder","keyup","height","staticRenderFns"],"mappings":"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","file":"static/js/52.3787a90413d2dd93e0fb.js","sourcesContent":["webpackJsonp([52],{\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(613)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(467),\n  /* template */\n  __webpack_require__(722),\n  /* scopeId */\n  \"data-v-32b6f242\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 347:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = submitApprove;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = approveSuggests;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_fetch__ = __webpack_require__(7);\n\n\n\nfunction submitApprove(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/workflow/process',\n    method: 'post',\n    data: data\n  });\n}\n\nfunction approveSuggests(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/workflow/show_opinion',\n    method: 'post',\n    data: data\n  });\n}\n\n/***/ }),\n\n/***/ 358:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = searchMat;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = scrapSubmit;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = scrapList;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getScrapDetail;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = scrap;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_fetch__ = __webpack_require__(7);\n\n\nfunction searchMat(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/iv/store_room/search_mat',\n    method: 'post',\n    data: data\n  });\n}\n\nfunction scrapSubmit(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/iv/scrap_mat_bill/modify',\n    method: 'post',\n    data: data\n  });\n}\n\nfunction scrapList(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/iv/scrap_mat_bill/list',\n    method: 'post',\n    data: data\n  });\n}\n\nfunction getScrapDetail(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/iv/scrap_mat_bill/detail',\n    method: 'post',\n    data: data\n  });\n}\n\nfunction scrap(data) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_fetch__[\"a\" /* default */])({\n    url: '/api/iv/scrap_mat_bill/scrap',\n    method: 'post',\n    data: data\n  });\n}\n\n/***/ }),\n\n/***/ 467:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__api_storage_scrap__ = __webpack_require__(358);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api_approve__ = __webpack_require__(347);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_swipeItem__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_swipeItem___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_swipeItem__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vuex__ = __webpack_require__(4);\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'scrapDetail',\n  components: { SwipeItem: __WEBPACK_IMPORTED_MODULE_2__components_swipeItem___default.a },\n  data: function data() {\n    return {\n      step: '',\n      scrap_no: '',\n      is_scraped: '',\n      action: '',\n      depsList: [],\n      dep_name: '请选择',\n      dep_id: '',\n      mat_no: '',\n      bill_id: '',\n      request_date: '',\n      searchMatLit: [],\n      store_mat_list: [],\n      selectInfo: {\n        switch: false,\n        selectType: '',\n        title: '请选择部门',\n        list: []\n      }\n    };\n  },\n  activated: function activated() {},\n\n  methods: {\n    scrapSubmit: function scrapSubmit() {\n      var requestData = {\n        scrap_id: this.scrap_id\n      };\n      $dialog.confirm({\n        theme: 'ios',\n        title: '确定要执行报废吗？',\n        cancelText: '取消',\n        okText: '确定'\n      }).then(function (res) {\n        if (res) {\n          __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__api_storage_scrap__[\"a\" /* scrap */])(requestData).then(function (res) {\n            if (res.scrap_info) {\n              $toast.show('执行报废成功');\n              $router.go(-1);\n            }\n          }).catch(function (error) {\n            $toast.show(error.description);\n          });\n        }\n      });\n    },\n    CancelEdit: function CancelEdit() {\n      this.scrapDetail();\n      this.action = 'check';\n    },\n    scrapDetail: function scrapDetail() {\n      var _this = this;\n\n      var requestData = {\n        query: {\n          scrap_id: this.scrap_id\n        }\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__api_storage_scrap__[\"b\" /* getScrapDetail */])(requestData).then(function (res) {\n        _this.scrap_no = res.scrap_mat_info.scrap_no;\n        _this.dep_name = res.scrap_mat_info.dep_name;\n        _this.request_date = res.scrap_mat_info.request_date;\n        _this.store_mat_list = res.scrap_mat_info.scrap_detail_list;\n        _this.step = res.scrap_mat_info.approve_step;\n        _this.is_scraped = res.scrap_mat_info.is_scraped;\n      }).catch(function (error) {\n        $toast.show(error.description);\n      });\n    },\n    submitApprove: function submitApprove() {\n      var requestData = {\n        approve_flag: '1',\n        approve_man_id: '',\n        approve_man_name: '',\n        approve_step: 'step10',\n        approve_sugg: '',\n        bill_id: this.bill_id,\n        bill_type: '10'\n      };\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__api_approve__[\"a\" /* submitApprove */])(requestData).then(function (res) {\n        $router.go(-1);\n        $toast.show('报废单信息提交成功');\n      }).catch(function (error) {\n        $toast.show(error.description);\n      });\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      if (this.dep_name === '请选择') {\n        $toast.show('请选择申请部门');\n        return;\n      }\n      var listIndexOf = 0;\n      if (this.store_mat_list.length > 0) {\n        this.store_mat_list.forEach(function (e, i) {\n          if (e.remark === '') {\n            listIndexOf = 1;\n            return;\n          }\n        });\n      } else {\n        $toast.show('报废物料不能为空');\n        return;\n      }\n\n      if (listIndexOf == 0) {\n        var requestData = {\n          scrap_mat_info: {\n            approve_step: '',\n            approve_sugg: '',\n            dep_id: this.dep_id,\n            dep_name: this.dep_name,\n            request_date: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils__[\"a\" /* todayDate */])(),\n            scrap_detail_list: this.store_mat_list,\n            scrap_id: '',\n            scrap_no: ''\n          }\n        };\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__api_storage_scrap__[\"c\" /* scrapSubmit */])(requestData).then(function (res) {\n          if (_this2.action === 'new') {\n            _this2.bill_id = res.scrap_id;\n            _this2.submitApprove();\n          } else {\n            _this2.CancelEdit();\n            $toast.show('报废单信息编辑成功');\n          }\n        }).catch(function (error) {\n          $toast.show(error.description);\n        });\n      } else {\n        $toast.show('请填写报废说明');\n      }\n    },\n    onSelect: function onSelect(data) {\n      var _this3 = this;\n\n      this.selectInfo.selectType = data;\n      this.selectInfo.list = [];\n      this.mat_no = '';\n      switch (data) {\n        case 'add':\n          {\n            this.selectInfo.switch = true;\n            break;\n          }\n        case 'depName':\n          {\n            this.depsList.forEach(function (e, i) {\n              _this3.selectInfo.list.push(e.dep_name);\n            });\n\n            this.selectInfo.switch = true;\n            break;\n          }\n      }\n    },\n    Delete: function Delete(index) {\n      this.store_mat_list.splice(index, 1);\n    },\n    onCheck: function onCheck(item, index) {\n      switch (this.selectInfo.selectType) {\n        case 'add':\n          {\n            var listIndexOf = 0;\n            this.store_mat_list.forEach(function (e, i) {\n              if (e.mat_no == item) {\n                listIndexOf = 1;\n                return;\n              }\n            });\n            if (listIndexOf === 0) {\n              var e = this.searchMatLit[index];\n              this.$set(e, 'deal_flag', '');\n              this.$set(e, 'detail_id', '');\n              this.$set(e, 'quantity', 1);\n              this.$set(e, 'remark', '');\n              this.store_mat_list.push(e);\n            } else {\n              $toast.show('该物料已被添加到列表中');\n            }\n            break;\n          }\n        case 'depNmae':\n          {\n            this.dep_name = this.depsList[index].dep_name;\n            this.dep_id = this.depsList[index].dep_id;\n            break;\n          }\n      }\n      this.selectInfo.switch = false;\n    },\n    searchMat: function searchMat() {\n      var _this4 = this;\n\n      if (this.mat_no.length > 0) {\n        var requestData = {\n          query: {\n            mat_desc: '',\n            mat_id: '',\n            mat_model: '',\n            mat_no: this.mat_no\n          }\n        };\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__api_storage_scrap__[\"d\" /* searchMat */])(requestData).then(function (res) {\n          _this4.searchMatLit = res.store_mat_list;\n          if (_this4.searchMatLit.length > 0) {\n            _this4.selectInfo.list = [];\n            _this4.searchMatLit.forEach(function (e, i) {\n              _this4.selectInfo.list.push(e.mat_no);\n            });\n          }\n        }).catch(function (error) {\n          $toast.show(error.description);\n        });\n      }\n    },\n    onChange: function onChange(e, type, index) {\n      var _this5 = this;\n\n      if (this.action !== 'check') {\n        if (type === '-1') {\n          if (Number(e.quantity) > 1) {\n            e.quantity = Number(e.quantity) - 1;\n          } else {\n            $dialog.confirm({\n              theme: 'ios',\n              title: '确定要删除吗？',\n              cancelText: '取消',\n              okText: '确定'\n            }).then(function (res) {\n              if (res) {\n                _this5.Delete(index);\n              }\n            });\n          }\n        } else if (type === '1') {\n          if (e.quantity < e.stock_qty) {\n            e.quantity = Number(e.quantity) + 1;\n          } else {\n            $toast.show('数量已达到库存数');\n          }\n        } else {\n          if (e.quantity < 1) {\n            $dialog.confirm({\n              theme: 'ios',\n              title: '确定要删除吗？',\n              cancelText: '取消',\n              okText: '确定'\n            }).then(function (res) {\n              if (res) {\n                _this5.Delete(index);\n              } else {\n                e.quantity = 1;\n              }\n            });\n          } else if (e.quantity > e.stock_qty) {\n            e.quantity = e.stock_qty;\n          }\n        }\n      }\n    }\n  },\n  computed: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_vuex__[\"a\" /* mapGetters */])(['userinfo', 'chosenCompany']),\n  mounted: function mounted() {\n    this.action = this.$route.params.action;\n    this.scrap_id = this.$route.params.scrap_id;\n    if (this.action === 'new') {\n      if (this.chosenCompany.deps.length > 1) {\n        this.depsList = this.chosenCompany.deps;\n      } else {\n        this.depsList = this.chosenCompany.deps;\n        this.dep_name = this.chosenCompany.deps[0].dep_name;\n        this.dep_id = this.chosenCompany.deps[0].dep_id;\n      }\n    } else if (this.action === 'check') {\n      this.scrapDetail();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 512:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(220)();\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.singleDetail > .new[data-v-32b6f242] {\\n  padding-top: 98px !important;\\n}\\n.singleDetail > .new .mateListTop[data-v-32b6f242] {\\n    top: 98px !important;\\n}\\n.singleDetail > .action[data-v-32b6f242], .singleDetail > .check[data-v-32b6f242] {\\n  padding-top: 196px !important;\\n}\\n.singleDetail > .action .mateListTop[data-v-32b6f242], .singleDetail > .check .mateListTop[data-v-32b6f242] {\\n    top: 196px !important;\\n}\\n.singleDetail .list[data-v-32b6f242] {\\n  padding-top: 30px;\\n}\\n.item span[data-v-32b6f242] {\\n  overflow: visible;\\n}\\ninput[data-v-32b6f242]:disabled {\\n  background: #fff;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/weibosi/webs-mt/mt/www_dev/src/views/storage/scrap/detail.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,6BAA6B;CAC9B;AACD;IACI,qBAAqB;CACxB;AACD;EACE,8BAA8B;CAC/B;AACD;IACI,sBAAsB;CACzB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,iBAAiB;CAClB\",\"file\":\"detail.vue\",\"sourcesContent\":[\"\\n.singleDetail > .new[data-v-32b6f242] {\\n  padding-top: 98px !important;\\n}\\n.singleDetail > .new .mateListTop[data-v-32b6f242] {\\n    top: 98px !important;\\n}\\n.singleDetail > .action[data-v-32b6f242], .singleDetail > .check[data-v-32b6f242] {\\n  padding-top: 196px !important;\\n}\\n.singleDetail > .action .mateListTop[data-v-32b6f242], .singleDetail > .check .mateListTop[data-v-32b6f242] {\\n    top: 196px !important;\\n}\\n.singleDetail .list[data-v-32b6f242] {\\n  padding-top: 30px;\\n}\\n.item span[data-v-32b6f242] {\\n  overflow: visible;\\n}\\ninput[data-v-32b6f242]:disabled {\\n  background: #fff;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 613:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(512);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(221)(\"615b17c5\", content, true);\n\n/***/ }),\n\n/***/ 722:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page storage\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), (_vm.action === 'new') ? _c('span', [_vm._v(\"新建物料报废单\")]) : _c('span', [_vm._v(\"物料报废单详情\")]), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'new'),\n      expression: \"action==='new'\"\n    }],\n    staticClass: \"right iconfont icon-saoyisao\"\n  }), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.step === 'step0'),\n      expression: \"step==='step0'\"\n    }],\n    staticClass: \"right \"\n  }), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'check' && _vm.step !== 'step0'),\n      expression: \"action==='check'&&step!=='step0'\"\n    }],\n    staticClass: \"right \",\n    on: {\n      \"click\": function($event) {\n        _vm.action = 'action'\n      }\n    }\n  }, [_vm._v(\"编辑\")]), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'action'),\n      expression: \"action==='action'\"\n    }],\n    staticClass: \"right \",\n    on: {\n      \"click\": function($event) {\n        _vm.CancelEdit()\n      }\n    }\n  }, [_vm._v(\"取消\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content singleDetail\",\n    class: _vm.action\n  }, [_c('div', {\n    staticClass: \"header\"\n  }, [_c('item', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action !== 'new'),\n      expression: \"action!=='new'\"\n    }]\n  }, [_vm._v(\"\\n          物料报废单号:\\n          \"), _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.scrap_no))])]), _vm._v(\" \"), _c('item', [_vm._v(\"\\n          申请人:\\n          \"), _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.userinfo.username))])]), _vm._v(\" \"), _c('item', [_vm._v(\"\\n          申请部门:\\n          \"), (_vm.depsList.length === 1 || _vm.action !== 'new') ? _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.dep_name))]) : _c('span', {\n    staticClass: \"item-note\",\n    staticStyle: {\n      \"overflow\": \"visible\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSelect('depName')\n      }\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.dep_name)), _c('i', {\n    staticClass: \"icon ion-ios-arrow-right\",\n    staticStyle: {\n      \"color\": \"#DDD\",\n      \"float\": \"right\",\n      \"font-size\": \"20px\",\n      \"margin-top\": \"-4px\"\n    }\n  })])]), _vm._v(\" \"), _c('item', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action !== 'new'),\n      expression: \"action!=='new'\"\n    }]\n  }, [_vm._v(\"\\n          申请日期:\\n          \"), _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.request_date))])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"mateList\",\n    class: _vm.action\n  }, [_c('div', {\n    staticClass: \"mateListTop\"\n  }, [_c('span', [_vm._v(\"报废物料列表\")]), _vm._v(\" \"), _c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action !== 'check'),\n      expression: \"action!=='check'\"\n    }],\n    staticClass: \"right\",\n    on: {\n      \"click\": function($event) {\n        _vm.onSelect('add')\n      }\n    }\n  }, [_vm._v(\"添加\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list\"\n  }, _vm._l((_vm.store_mat_list), function(item, index) {\n    return _c('div', {\n      staticClass: \"item\"\n    }, [_c('div', {\n      staticClass: \"itemInfo\"\n    }, [_c('div', {\n      staticClass: \"numberBox\"\n    }, [_c('span', {\n      on: {\n        \"click\": function($event) {\n          _vm.onChange(item, '1')\n        }\n      }\n    }, [_vm._v(\"+\")]), _vm._v(\" \"), _c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (item.quantity),\n        expression: \"item.quantity\"\n      }],\n      attrs: {\n        \"disabled\": _vm.action === 'check',\n        \"type\": \"number\"\n      },\n      domProps: {\n        \"value\": (item.quantity)\n      },\n      on: {\n        \"change\": function($event) {\n          _vm.onChange(item)\n        },\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.$set(item, \"quantity\", $event.target.value)\n        }\n      }\n    }), _vm._v(\" \"), _c('span', {\n      on: {\n        \"click\": function($event) {\n          _vm.onChange(item, '-1', index)\n        }\n      }\n    }, [_vm._v(\"-\")])]), _vm._v(\" \"), _c('h3', [_vm._v(\"物料编码: \"), _c('span', [_vm._v(_vm._s(item.mat_no))])]), _vm._v(\" \"), _c('p', [_vm._v(\"物料名称: \"), _c('span', [_vm._v(_vm._s(item.mat_desc))])]), _vm._v(\" \"), _c('p', [_vm._v(\"规格型号: \"), _c('span', [_vm._v(_vm._s(item.mat_model))])]), _vm._v(\" \"), _c('p', [_vm._v(\"物料类型: \"), _c('span', [_vm._v(_vm._s(item.mat_type_name))])]), _vm._v(\" \"), (_vm.action === 'new') ? _c('p', [_vm._v(\"报废原因: \"), _c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (item.remark),\n        expression: \"item.remark\"\n      }],\n      attrs: {\n        \"type\": \"text\",\n        \"placeholder\": \"请输入报废原因\"\n      },\n      domProps: {\n        \"value\": (item.remark)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.$set(item, \"remark\", $event.target.value)\n        }\n      }\n    })]) : _c('p', [_vm._v(\"报废原因: \"), _c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (item.reason),\n        expression: \"item.reason\"\n      }],\n      attrs: {\n        \"disabled\": \"\",\n        \"type\": \"text\",\n        \"placeholder\": \"请输入报废原因\"\n      },\n      domProps: {\n        \"value\": (item.reason)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.$set(item, \"reason\", $event.target.value)\n        }\n      }\n    })])])])\n  }))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-box\",\n    class: _vm.selectInfo.switch ? 'active' : ''\n  }, [_c('div', {\n    staticClass: \"select-click\",\n    on: {\n      \"click\": function($event) {\n        _vm.selectInfo.switch = false\n      }\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-main\"\n  }, [_c('div', {\n    staticClass: \"main-header\"\n  }, [_c('input', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.selectInfo.selectType === 'add'),\n      expression: \"selectInfo.selectType==='add'\"\n    }, {\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.mat_no),\n      expression: \"mat_no\"\n    }],\n    staticStyle: {\n      \"margin-top\": \"10px\"\n    },\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"请输物料编号\"\n    },\n    domProps: {\n      \"value\": (_vm.mat_no)\n    },\n    on: {\n      \"keyup\": _vm.searchMat,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.mat_no = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.selectInfo.selectType !== 'add'),\n      expression: \"selectInfo.selectType!=='add'\"\n    }]\n  }, [_vm._v(_vm._s(_vm.selectInfo.title))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"main-list\",\n    staticStyle: {\n      \"height\": \"100%\"\n    }\n  }, _vm._l((_vm.selectInfo.list), function(item, index) {\n    return _c('p', {\n      on: {\n        \"click\": function($event) {\n          _vm.onCheck(item, index)\n        }\n      }\n    }, [_vm._v(_vm._s(item))])\n  }))])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.store_mat_list.length > 0 && _vm.action === 'new'),\n      expression: \"store_mat_list.length>0&&action==='new'\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.submit()\n      }\n    }\n  }, [_vm._v(\"\\n        提交审批\\n      \")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'action'),\n      expression: \"action==='action'\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.submit()\n      }\n    }\n  }, [_vm._v(\"\\n        保存\\n      \")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.step === 'step0' && _vm.action === 'check' && _vm.is_scraped == 0),\n      expression: \"step==='step0'&&action==='check'&&is_scraped==0\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.scrapSubmit()\n      }\n    }\n  }, [_vm._v(\"\\n        执行报废\\n      \")])])])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/52.3787a90413d2dd93e0fb.js","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-32b6f242&scoped=true!sass-loader?sourceMap!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./detail.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler?id=data-v-32b6f242!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./detail.vue\"),\n  /* scopeId */\n  \"data-v-32b6f242\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/storage/scrap/detail.vue\n// module id = 310\n// module chunks = 52","/**\r\n * Created by zxf on 2017/12/7.\r\n */\r\nimport fetch from '@/utils/fetch';\r\n\r\nexport function submitApprove(data) {\r\n  return fetch({\r\n    url: '/api/workflow/process',\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n//approveSuggests 审批意见\r\nexport function approveSuggests(data) {\r\n  return fetch({\r\n    url: '/api/workflow/show_opinion',\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/approve.js","import fetch from '@/utils/fetch'\r\n\r\n//模糊查询物料列表 /api/iv/store_room/search_mat\r\nexport function searchMat(data) {\r\n  return fetch({\r\n    url:'/api/iv/store_room/search_mat',\r\n    method:'post',\r\n    data\r\n  })\r\n}\r\n//新建报废单  /api/iv/scrap_mat_bill/modify\r\nexport function scrapSubmit(data) {\r\n  return fetch({\r\n    url:'/api/iv/scrap_mat_bill/modify',\r\n    method:'post',\r\n    data\r\n  })\r\n}\r\n//查询报废单列表 /api/iv/scrap_mat_bill/list\r\nexport function scrapList(data) {\r\n  return fetch({\r\n    url:'/api/iv/scrap_mat_bill/list',\r\n    method:'post',\r\n    data\r\n  })\r\n}\r\n// 查询报废单详情 /api/iv/scrap_mat_bill/detail\r\nexport function getScrapDetail(data) {\r\n  return fetch({\r\n    url:'/api/iv/scrap_mat_bill/detail',\r\n    method:'post',\r\n    data\r\n  })\r\n}\r\n//报废单执行报废 /api/iv/scrap_mat_bill/scrap\r\nexport function scrap(data) {\r\n  return fetch({\r\n    url:'/api/iv/scrap_mat_bill/scrap',\r\n    method:'post',\r\n    data\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/storage/scrap.js","<template>\r\n    <div class=\"mw-page page storage\" v-nav=\"{hideNavbar:true}\">\r\n        <div class=\"mw-page-header\">\r\n            <i class=\"left icon ion-ios-arrow-back\" @click=\"$router.go(-1)\"></i>\r\n            <span v-if=\"action==='new'\">新建物料报废单</span>\r\n            <span v-else>物料报废单详情</span>\r\n            <i  v-show=\"action==='new'\"  class=\"right iconfont icon-saoyisao\" ></i>\r\n            <i  v-show=\"step==='step0'\"  class=\"right \" ></i>\r\n            <i  v-show=\"action==='check'&&step!=='step0'\" @click=\"action='action'\"  class=\"right \" >编辑</i>\r\n            <i  v-show=\"action==='action'\"  class=\"right \" @click=\"CancelEdit()\">取消</i>\r\n        </div>\r\n        <div class=\"mw-page-content singleDetail\" :class=\"action\">\r\n          <div class=\"header\">\r\n            <item v-show=\"action!=='new'\">\r\n              物料报废单号:\r\n              <span  class=\"item-note\">{{ scrap_no }}</span>\r\n            </item>\r\n            <item>\r\n              申请人:\r\n              <span  class=\"item-note\">{{ userinfo.username }}</span>\r\n            </item>\r\n            <item>\r\n              申请部门:\r\n              <span v-if=\"depsList.length===1||action!=='new'\" class=\"item-note\">{{ dep_name }}</span>\r\n              <span v-else class=\"item-note\" style=\"overflow: visible\" @click=\"onSelect('depName')\">\r\n                {{ dep_name }}<i class=\"icon ion-ios-arrow-right\" style=\"color: #DDD;float:right;font-size:20px;margin-top:-4px;\"></i>\r\n              </span>\r\n            </item>\r\n            <item  v-show=\"action!=='new'\">\r\n              申请日期:\r\n              <span  class=\"item-note\">{{ request_date }}</span>\r\n            </item>\r\n          </div>\r\n\r\n          <div class=\"mateList\" :class=\"action\" >\r\n            <div class=\"mateListTop\" >\r\n              <span>报废物料列表</span>\r\n              <span v-show=\"action!=='check'\" class=\"right\" @click=\"onSelect('add')\">添加</span>\r\n            </div>\r\n            <div class=\"list\">\r\n              <div class=\"item\"  v-for=\"(item,index) in store_mat_list\">\r\n                <div class=\"itemInfo\"  >\r\n                  <div class=\"numberBox\" >\r\n                    <span @click=\"onChange(item,'1')\" >+</span>\r\n                    <input  :disabled=\"action==='check'\" type=\"number\" @change=\"onChange(item)\"  v-model=\"item.quantity\" >\r\n                    <span @click=\"onChange(item,'-1',index)\" >-</span>\r\n                  </div>\r\n                  <h3>物料编码: <span>{{ item.mat_no }}</span></h3>\r\n                  <p>物料名称: <span>{{ item.mat_desc }}</span></p>\r\n                  <p>规格型号: <span>{{ item.mat_model }}</span></p>\r\n                  <p>物料类型: <span>{{ item.mat_type_name }}</span></p>\r\n                  <p  v-if=\"action==='new'\" >报废原因: <input type=\"text\" v-model=\"item.remark\"  placeholder=\"请输入报废原因\"> </p>\r\n                  <p v-else >报废原因: <input disabled type=\"text\" v-model=\"item.reason\"  placeholder=\"请输入报废原因\"> </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      <div class=\"select-box\" :class=\"selectInfo.switch?'active':''\">\r\n        <div class=\"select-click\" @click=\"selectInfo.switch=false\"></div>\r\n        <div class=\"select-main\">\r\n          <div class=\"main-header\">\r\n            <input style=\"margin-top:10px\" v-show=\"selectInfo.selectType==='add'\" v-model=\"mat_no\"  @keyup =\"searchMat\"  type=\"text\" placeholder=\"请输物料编号\" >\r\n            <p v-show=\"selectInfo.selectType!=='add'\">{{ selectInfo.title }}</p>\r\n          </div>\r\n          <div class=\"main-list\" style=\"height: 100%\">\r\n              <p v-for=\" (item,index) in selectInfo.list \"   @click=\"onCheck(item,index)\">{{ item }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-show=\"store_mat_list.length>0&&action==='new'\" class=\"mw-page-footer\" >\r\n        <div  class=\"btns\">\r\n          <div  class=\"btn\" @click=\"submit()\">\r\n            提交审批\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-show=\"action==='action'\" class=\"mw-page-footer\" >\r\n        <div  class=\"btns\">\r\n          <div  class=\"btn\" @click=\"submit()\">\r\n            保存\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-show=\"step==='step0'&&action==='check'&&is_scraped==0\"  class=\"mw-page-footer\" >\r\n        <div class=\"btns\">\r\n          <div  class=\"btn\" @click=\"scrapSubmit()\">\r\n            执行报废\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import { searchMat,scrapSubmit,getScrapDetail,scrap } from '@/api/storage/scrap'\r\n  import { submitApprove } from '@/api/approve'\r\n  import SwipeItem from \"../../../components/swipeItem\";\r\n  import { todayDate } from '@/utils'\r\n  import { mapGetters } from 'vuex'\r\n    export default{\r\n      name:'scrapDetail',\r\n      components: {SwipeItem},\r\n      data(){\r\n        return {\r\n          step:'',\r\n          scrap_no:'',\r\n          is_scraped:'',\r\n          action:'',\r\n          depsList:[],\r\n          dep_name:'请选择',\r\n          dep_id:'',\r\n          mat_no:'',\r\n          bill_id:'',\r\n          request_date:'',\r\n          searchMatLit:[],\r\n          store_mat_list:[],\r\n          selectInfo:{\r\n            switch:false,\r\n            selectType:'',\r\n            title:'请选择部门',\r\n            list:[]\r\n          }\r\n        }\r\n      },\r\n      activated(){\r\n      },\r\n      methods: {\r\n        scrapSubmit(){\r\n          const requestData={\r\n            scrap_id:this.scrap_id\r\n          }\r\n          $dialog.confirm({\r\n            theme: 'ios',\r\n            title: '确定要执行报废吗？',\r\n            cancelText: '取消',\r\n            okText: '确定'\r\n          }).then(res=>{\r\n            if(res){\r\n              scrap(requestData).then(res => {\r\n                if(res.scrap_info){\r\n                  $toast.show('执行报废成功')\r\n                  $router.go(-1)\r\n                }\r\n              }).catch(error => {\r\n                $toast.show(error.description)\r\n              })\r\n            }\r\n          })\r\n\r\n        },\r\n        CancelEdit(){\r\n          this.scrapDetail()\r\n          this.action='check'\r\n        },\r\n        scrapDetail(){\r\n          const requestData={\r\n            query:{\r\n              scrap_id:this.scrap_id\r\n            }\r\n          }\r\n          getScrapDetail(requestData).then(res => {\r\n            this.scrap_no=res.scrap_mat_info.scrap_no\r\n            this.dep_name=res.scrap_mat_info.dep_name\r\n            this.request_date=res.scrap_mat_info.request_date\r\n            this.store_mat_list=res.scrap_mat_info.scrap_detail_list\r\n            this.step=res.scrap_mat_info.approve_step\r\n            this.is_scraped=res.scrap_mat_info.is_scraped\r\n\r\n          }).catch(error => {\r\n            $toast.show(error.description)\r\n          })\r\n        },\r\n        submitApprove(){\r\n          const requestData={\r\n              approve_flag:'1',\r\n              approve_man_id:'',\r\n              approve_man_name:'',\r\n              approve_step:'step10',\r\n              approve_sugg:'',\r\n              bill_id:this.bill_id,\r\n              bill_type:'10'\r\n          }\r\n          submitApprove(requestData).then(res => {\r\n            $router.go(-1)\r\n            $toast.show('报废单信息提交成功')\r\n          }).catch(error => {\r\n            $toast.show(error.description)\r\n          })\r\n        },\r\n        submit(){\r\n          if(this.dep_name==='请选择'){\r\n            $toast.show('请选择申请部门')\r\n            return\r\n          }\r\n          let listIndexOf=0\r\n          if(this.store_mat_list.length>0){\r\n            this.store_mat_list.forEach((e,i)=>{\r\n              if(e.remark===''){\r\n                listIndexOf=1\r\n                return\r\n              }\r\n            })\r\n          }else{\r\n            $toast.show('报废物料不能为空')\r\n            return\r\n          }\r\n\r\n          if(listIndexOf==0){\r\n            const requestData={\r\n              scrap_mat_info:{\r\n                approve_step:'',\r\n                approve_sugg:'',\r\n                dep_id:this.dep_id,\r\n                dep_name:this.dep_name,\r\n                request_date:todayDate(),\r\n                scrap_detail_list:this.store_mat_list,\r\n                scrap_id:'',\r\n                scrap_no:''\r\n              }\r\n            }\r\n            scrapSubmit(requestData).then(res => {\r\n              if(this.action==='new'){\r\n                this.bill_id=res.scrap_id\r\n                this.submitApprove()\r\n              }else{\r\n                this.CancelEdit()\r\n                $toast.show('报废单信息编辑成功')\r\n              }\r\n\r\n            }).catch(error => {\r\n              $toast.show(error.description)\r\n            })\r\n          }else{\r\n            $toast.show('请填写报废说明')\r\n          }\r\n        },\r\n        onSelect(data){\r\n          this.selectInfo.selectType=data\r\n          this.selectInfo.list=[]\r\n          this.mat_no=''\r\n          switch (data){\r\n            case 'add':{\r\n              this.selectInfo.switch=true\r\n              break\r\n            }\r\n            case  'depName':{\r\n              this.depsList.forEach((e,i)=>{\r\n                this.selectInfo.list.push(e.dep_name)\r\n              })\r\n\r\n              this.selectInfo.switch=true\r\n              break\r\n            }\r\n          }\r\n\r\n        },\r\n        Delete(index){\r\n          this.store_mat_list.splice(index, 1)\r\n        },\r\n        onCheck(item,index){\r\n          switch (this.selectInfo.selectType){\r\n            case 'add':{\r\n              let listIndexOf=0\r\n              this.store_mat_list.forEach((e,i)=>{\r\n                if(e.mat_no==item){\r\n                  listIndexOf=1\r\n                  return\r\n                }\r\n              })\r\n              if(listIndexOf===0){\r\n                let e=this.searchMatLit[index]\r\n                this.$set(e,'deal_flag','')\r\n                this.$set(e,'detail_id','')\r\n                this.$set(e,'quantity',1)\r\n                this.$set(e,'remark','')\r\n                this.store_mat_list.push(e)\r\n              }else{\r\n                $toast.show('该物料已被添加到列表中')\r\n              }\r\n              break\r\n            }\r\n            case 'depNmae':{\r\n              this.dep_name=this.depsList[index].dep_name\r\n              this.dep_id=this.depsList[index].dep_id\r\n              break\r\n            }\r\n          }\r\n          this.selectInfo.switch=false\r\n        },\r\n        searchMat() {//物料编号模糊查询\r\n          if(this.mat_no.length>0){\r\n            const requestData={\r\n              query:{\r\n                mat_desc:'',\r\n                mat_id:'',\r\n                mat_model:'',\r\n                mat_no:this.mat_no\r\n              }\r\n            }\r\n            searchMat(requestData).then(res => {\r\n              this.searchMatLit=res.store_mat_list\r\n              if(this.searchMatLit.length>0){\r\n                this.selectInfo.list=[]\r\n                this.searchMatLit.forEach((e, i) => {\r\n                  this.selectInfo.list.push(e.mat_no)\r\n                })\r\n              }\r\n            }).catch(error => {\r\n              $toast.show(error.description)\r\n            })\r\n          }\r\n\r\n        },\r\n        onChange(e,type,index){\r\n          if(this.action!=='check'){\r\n          if(type==='-1'){\r\n            if(Number(e.quantity)>1){\r\n              e.quantity=Number(e.quantity)-1\r\n            }else{\r\n              $dialog.confirm({\r\n                    theme: 'ios',\r\n                    title: '确定要删除吗？',\r\n                    cancelText: '取消',\r\n                    okText: '确定'\r\n                  }).then(res=>{\r\n                    if(res){\r\n                      this.Delete(index)\r\n                    }\r\n                  })\r\n            }\r\n          }else if(type==='1'){\r\n            if(e.quantity<e.stock_qty){\r\n              e.quantity=Number(e.quantity)+1\r\n            }else{\r\n              $toast.show('数量已达到库存数')\r\n            }\r\n          }else{\r\n            if(e.quantity<1){\r\n              $dialog.confirm({\r\n                theme: 'ios',\r\n                title: '确定要删除吗？',\r\n                cancelText: '取消',\r\n                okText: '确定'\r\n              }).then(res=>{\r\n                if(res){\r\n                  this.Delete(index)\r\n                }else{\r\n                  e.quantity=1\r\n                }\r\n              })\r\n            }else if(e.quantity>e.stock_qty){\r\n              e.quantity=e.stock_qty\r\n            }\r\n          }\r\n            // let quantity=Number(e.quantity)\r\n            // if(quantity%1!==0){\r\n            //   e.quantity=parseInt(quantity)\r\n            // }\r\n            // if(e.quantity<=0){\r\n            //   $dialog.confirm({\r\n            //     theme: 'ios',\r\n            //     title: '确定要删除吗？',\r\n            //     cancelText: '取消',\r\n            //     okText: '确定'\r\n            //   }).then(res=>{\r\n            //     if(res){\r\n            //       this.Delete(index)\r\n            //     }else{\r\n            //       e.quantity=1\r\n            //     }\r\n            //   })\r\n            // }\r\n            // if(quantity>e.stock_qty){\r\n            //   e.quantity=e.stock_qty\r\n            // }\r\n          }\r\n        },\r\n      },\r\n      computed:mapGetters(['userinfo','chosenCompany']),\r\n      mounted(){\r\n        this.action=this.$route.params.action\r\n        this.scrap_id=this.$route.params.scrap_id\r\n        if(this.action==='new'){\r\n          if(this.chosenCompany.deps.length>1){\r\n            this.depsList=this.chosenCompany.deps\r\n          }else{\r\n            this.depsList=this.chosenCompany.deps\r\n            this.dep_name=this.chosenCompany.deps[0].dep_name\r\n            this.dep_id=this.chosenCompany.deps[0].dep_id\r\n          }\r\n        }else if(this.action==='check'){\r\n          this.scrapDetail()\r\n        }\r\n\r\n      }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .singleDetail {\r\n    &>.new {\r\n      padding-top: 98px !important;\r\n      .mateListTop{\r\n        top: 98px !important;\r\n      }\r\n    }\r\n    &>.action, &>.check {\r\n      padding-top: 196px !important;\r\n      .mateListTop{\r\n        top: 196px !important;\r\n      }\r\n    }\r\n    .list{\r\n      padding-top: 30px;\r\n    }\r\n\r\n  }\r\n  .item span{overflow: visible}\r\n  input:disabled{background: #fff}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// detail.vue?034698ca","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.singleDetail > .new[data-v-32b6f242] {\\n  padding-top: 98px !important;\\n}\\n.singleDetail > .new .mateListTop[data-v-32b6f242] {\\n    top: 98px !important;\\n}\\n.singleDetail > .action[data-v-32b6f242], .singleDetail > .check[data-v-32b6f242] {\\n  padding-top: 196px !important;\\n}\\n.singleDetail > .action .mateListTop[data-v-32b6f242], .singleDetail > .check .mateListTop[data-v-32b6f242] {\\n    top: 196px !important;\\n}\\n.singleDetail .list[data-v-32b6f242] {\\n  padding-top: 30px;\\n}\\n.item span[data-v-32b6f242] {\\n  overflow: visible;\\n}\\ninput[data-v-32b6f242]:disabled {\\n  background: #fff;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/weibosi/webs-mt/mt/www_dev/src/views/storage/scrap/detail.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,6BAA6B;CAC9B;AACD;IACI,qBAAqB;CACxB;AACD;EACE,8BAA8B;CAC/B;AACD;IACI,sBAAsB;CACzB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,iBAAiB;CAClB\",\"file\":\"detail.vue\",\"sourcesContent\":[\"\\n.singleDetail > .new[data-v-32b6f242] {\\n  padding-top: 98px !important;\\n}\\n.singleDetail > .new .mateListTop[data-v-32b6f242] {\\n    top: 98px !important;\\n}\\n.singleDetail > .action[data-v-32b6f242], .singleDetail > .check[data-v-32b6f242] {\\n  padding-top: 196px !important;\\n}\\n.singleDetail > .action .mateListTop[data-v-32b6f242], .singleDetail > .check .mateListTop[data-v-32b6f242] {\\n    top: 196px !important;\\n}\\n.singleDetail .list[data-v-32b6f242] {\\n  padding-top: 30px;\\n}\\n.item span[data-v-32b6f242] {\\n  overflow: visible;\\n}\\ninput[data-v-32b6f242]:disabled {\\n  background: #fff;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-32b6f242&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/storage/scrap/detail.vue\n// module id = 512\n// module chunks = 52","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-32b6f242&scoped=true!../../../../node_modules/sass-loader/lib/loader.js?sourceMap!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./detail.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"615b17c5\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-32b6f242&scoped=true!./~/sass-loader/lib/loader.js?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/storage/scrap/detail.vue\n// module id = 613\n// module chunks = 52","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"nav\",\n      rawName: \"v-nav\",\n      value: ({\n        hideNavbar: true\n      }),\n      expression: \"{hideNavbar:true}\"\n    }],\n    staticClass: \"mw-page page storage\"\n  }, [_c('div', {\n    staticClass: \"mw-page-header\"\n  }, [_c('i', {\n    staticClass: \"left icon ion-ios-arrow-back\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.go(-1)\n      }\n    }\n  }), _vm._v(\" \"), (_vm.action === 'new') ? _c('span', [_vm._v(\"新建物料报废单\")]) : _c('span', [_vm._v(\"物料报废单详情\")]), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'new'),\n      expression: \"action==='new'\"\n    }],\n    staticClass: \"right iconfont icon-saoyisao\"\n  }), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.step === 'step0'),\n      expression: \"step==='step0'\"\n    }],\n    staticClass: \"right \"\n  }), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'check' && _vm.step !== 'step0'),\n      expression: \"action==='check'&&step!=='step0'\"\n    }],\n    staticClass: \"right \",\n    on: {\n      \"click\": function($event) {\n        _vm.action = 'action'\n      }\n    }\n  }, [_vm._v(\"编辑\")]), _vm._v(\" \"), _c('i', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'action'),\n      expression: \"action==='action'\"\n    }],\n    staticClass: \"right \",\n    on: {\n      \"click\": function($event) {\n        _vm.CancelEdit()\n      }\n    }\n  }, [_vm._v(\"取消\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mw-page-content singleDetail\",\n    class: _vm.action\n  }, [_c('div', {\n    staticClass: \"header\"\n  }, [_c('item', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action !== 'new'),\n      expression: \"action!=='new'\"\n    }]\n  }, [_vm._v(\"\\n          物料报废单号:\\n          \"), _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.scrap_no))])]), _vm._v(\" \"), _c('item', [_vm._v(\"\\n          申请人:\\n          \"), _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.userinfo.username))])]), _vm._v(\" \"), _c('item', [_vm._v(\"\\n          申请部门:\\n          \"), (_vm.depsList.length === 1 || _vm.action !== 'new') ? _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.dep_name))]) : _c('span', {\n    staticClass: \"item-note\",\n    staticStyle: {\n      \"overflow\": \"visible\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSelect('depName')\n      }\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.dep_name)), _c('i', {\n    staticClass: \"icon ion-ios-arrow-right\",\n    staticStyle: {\n      \"color\": \"#DDD\",\n      \"float\": \"right\",\n      \"font-size\": \"20px\",\n      \"margin-top\": \"-4px\"\n    }\n  })])]), _vm._v(\" \"), _c('item', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action !== 'new'),\n      expression: \"action!=='new'\"\n    }]\n  }, [_vm._v(\"\\n          申请日期:\\n          \"), _c('span', {\n    staticClass: \"item-note\"\n  }, [_vm._v(_vm._s(_vm.request_date))])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"mateList\",\n    class: _vm.action\n  }, [_c('div', {\n    staticClass: \"mateListTop\"\n  }, [_c('span', [_vm._v(\"报废物料列表\")]), _vm._v(\" \"), _c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action !== 'check'),\n      expression: \"action!=='check'\"\n    }],\n    staticClass: \"right\",\n    on: {\n      \"click\": function($event) {\n        _vm.onSelect('add')\n      }\n    }\n  }, [_vm._v(\"添加\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list\"\n  }, _vm._l((_vm.store_mat_list), function(item, index) {\n    return _c('div', {\n      staticClass: \"item\"\n    }, [_c('div', {\n      staticClass: \"itemInfo\"\n    }, [_c('div', {\n      staticClass: \"numberBox\"\n    }, [_c('span', {\n      on: {\n        \"click\": function($event) {\n          _vm.onChange(item, '1')\n        }\n      }\n    }, [_vm._v(\"+\")]), _vm._v(\" \"), _c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (item.quantity),\n        expression: \"item.quantity\"\n      }],\n      attrs: {\n        \"disabled\": _vm.action === 'check',\n        \"type\": \"number\"\n      },\n      domProps: {\n        \"value\": (item.quantity)\n      },\n      on: {\n        \"change\": function($event) {\n          _vm.onChange(item)\n        },\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.$set(item, \"quantity\", $event.target.value)\n        }\n      }\n    }), _vm._v(\" \"), _c('span', {\n      on: {\n        \"click\": function($event) {\n          _vm.onChange(item, '-1', index)\n        }\n      }\n    }, [_vm._v(\"-\")])]), _vm._v(\" \"), _c('h3', [_vm._v(\"物料编码: \"), _c('span', [_vm._v(_vm._s(item.mat_no))])]), _vm._v(\" \"), _c('p', [_vm._v(\"物料名称: \"), _c('span', [_vm._v(_vm._s(item.mat_desc))])]), _vm._v(\" \"), _c('p', [_vm._v(\"规格型号: \"), _c('span', [_vm._v(_vm._s(item.mat_model))])]), _vm._v(\" \"), _c('p', [_vm._v(\"物料类型: \"), _c('span', [_vm._v(_vm._s(item.mat_type_name))])]), _vm._v(\" \"), (_vm.action === 'new') ? _c('p', [_vm._v(\"报废原因: \"), _c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (item.remark),\n        expression: \"item.remark\"\n      }],\n      attrs: {\n        \"type\": \"text\",\n        \"placeholder\": \"请输入报废原因\"\n      },\n      domProps: {\n        \"value\": (item.remark)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.$set(item, \"remark\", $event.target.value)\n        }\n      }\n    })]) : _c('p', [_vm._v(\"报废原因: \"), _c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (item.reason),\n        expression: \"item.reason\"\n      }],\n      attrs: {\n        \"disabled\": \"\",\n        \"type\": \"text\",\n        \"placeholder\": \"请输入报废原因\"\n      },\n      domProps: {\n        \"value\": (item.reason)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.$set(item, \"reason\", $event.target.value)\n        }\n      }\n    })])])])\n  }))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-box\",\n    class: _vm.selectInfo.switch ? 'active' : ''\n  }, [_c('div', {\n    staticClass: \"select-click\",\n    on: {\n      \"click\": function($event) {\n        _vm.selectInfo.switch = false\n      }\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-main\"\n  }, [_c('div', {\n    staticClass: \"main-header\"\n  }, [_c('input', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.selectInfo.selectType === 'add'),\n      expression: \"selectInfo.selectType==='add'\"\n    }, {\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.mat_no),\n      expression: \"mat_no\"\n    }],\n    staticStyle: {\n      \"margin-top\": \"10px\"\n    },\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"请输物料编号\"\n    },\n    domProps: {\n      \"value\": (_vm.mat_no)\n    },\n    on: {\n      \"keyup\": _vm.searchMat,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.mat_no = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.selectInfo.selectType !== 'add'),\n      expression: \"selectInfo.selectType!=='add'\"\n    }]\n  }, [_vm._v(_vm._s(_vm.selectInfo.title))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"main-list\",\n    staticStyle: {\n      \"height\": \"100%\"\n    }\n  }, _vm._l((_vm.selectInfo.list), function(item, index) {\n    return _c('p', {\n      on: {\n        \"click\": function($event) {\n          _vm.onCheck(item, index)\n        }\n      }\n    }, [_vm._v(_vm._s(item))])\n  }))])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.store_mat_list.length > 0 && _vm.action === 'new'),\n      expression: \"store_mat_list.length>0&&action==='new'\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.submit()\n      }\n    }\n  }, [_vm._v(\"\\n        提交审批\\n      \")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.action === 'action'),\n      expression: \"action==='action'\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.submit()\n      }\n    }\n  }, [_vm._v(\"\\n        保存\\n      \")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.step === 'step0' && _vm.action === 'check' && _vm.is_scraped == 0),\n      expression: \"step==='step0'&&action==='check'&&is_scraped==0\"\n    }],\n    staticClass: \"mw-page-footer\"\n  }, [_c('div', {\n    staticClass: \"btns\"\n  }, [_c('div', {\n    staticClass: \"btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.scrapSubmit()\n      }\n    }\n  }, [_vm._v(\"\\n        执行报废\\n      \")])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-32b6f242!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/storage/scrap/detail.vue\n// module id = 722\n// module chunks = 52"],"sourceRoot":""}