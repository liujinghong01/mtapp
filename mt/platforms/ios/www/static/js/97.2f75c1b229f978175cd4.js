webpackJsonp([97],{328:function(t,e,s){s(802);var i=s(0)(s(527),s(950),"data-v-7631439c",null);t.exports=i.exports},398:function(t,e,s){"use strict";function i(t){return s.i(p.a)({url:"/api/pc/query/requestList",method:"post",data:t})}function a(t){return s.i(p.a)({url:"/api/pc/query/request",method:"post",data:t})}function n(t){return s.i(p.a)({url:"/api/pc/request/delete",method:"post",data:t})}function r(t){return s.i(p.a)({url:"/api/pc/request/deleteLine",method:"post",data:t})}function o(t){return s.i(p.a)({url:"/api/pc/request/referHis",method:"post",data:t})}function c(t){return s.i(p.a)({url:"/api/pc/request/modify",method:"post",data:t})}function l(t){return s.i(p.a)({url:"/api/pc/request/modifyLine",method:"post",data:t})}e.a=i,e.d=a,e.g=n,e.e=r,e.b=o,e.f=c,e.c=l;var p=s(10)},527:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(20),a=s.n(i),n=s(398);s(1);e.default={name:"requisitionList",components:{SwipeItem:a.a},data:function(){return{tabIndex:0,tabs:["制定中","预审中","审批中","已审批","退回"],pageModel:[{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0}],query:{approve_step:[]},list:[{request_list:[]},{request_list:[]},{request_list:[]},{request_list:[]},{request_list:[]}]}},mounted:function(){this.query.approve_step.push("step10")},activated:function(){this.getData(!0)},methods:{onTabClick:function(t){if(t!==this.tabIndex){switch(this.tabIndex=t,t){case 0:this.query.approve_step.length=0,this.query.approve_step.push("step10");break;case 1:this.query.approve_step.length=0,this.query.approve_step.push("step20");break;case 2:this.query.approve_step.length=0,this.query.approve_step.push("step30");break;case 3:this.query.approve_step.length=0,this.query.approve_step.push("step0"),this.query.approve_step.push("step00");break;case 4:this.query.approve_step.length=0,this.query.approve_step.push("step11")}this.getData(!0)}},onInfinite:function(t){var e=this;if(e.pageModel[e.tabIndex].total_page<=e.pageModel[e.tabIndex].curr_page)return void t();setTimeout(function(){e.pageModel[e.tabIndex].total_page<2?t():(e.getData(),t())},500)},onRefresh:function(t){var e=this;setTimeout(function(){e.getData(!0),t()},500)},onItemClick:function(t){this.$router.forward("/purchase/requisition/detail/check/"+t.request_id)},getData:function(t){var e=this,i={curr_page:t?1:++this.pageModel[this.tabIndex].curr_page,page_size:this.pageModel[this.tabIndex].page_size,query:this.query};s.i(n.a)(i).then(function(s){s.request_list.length>0?(t&&(e.list[e.tabIndex].request_list.length=0),e.pageModel[e.tabIndex].curr_page=s.curr_page,e.pageModel[e.tabIndex].total_page=s.total_page,e.list[e.tabIndex].request_list=e.list[e.tabIndex].request_list.concat(s.request_list)):t&&(e.list[e.tabIndex].request_list.length=0)}).catch(function(t){$toast.show(t.description)})},delItem:function(t){var e=this;$dialog.confirm({theme:"ios",title:"确定要删除吗？",cancelText:"取消",okText:"确定"}).then(function(i){i&&s.i(n.g)({request_id:t.request_id}).then(function(s){e.list[e.tabIndex].request_list=e.list[e.tabIndex].request_list.filter(function(e){return e.request_id!==t.request_id})}).catch(function(t){})})}}}},663:function(t,e,s){e=t.exports=s(225)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},802:function(t,e,s){var i=s(663);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(226)("de4a1ad6",i,!0)},950:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page purchase"},[s("div",{staticClass:"mw-page-header"},[s("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),s("span",[t._v("请购单列表")]),t._v(" "),s("i",{staticClass:"right"})]),t._v(" "),s("div",{staticClass:"mw-page-content has-tab"},[s("div",{staticStyle:{height:"60px"}},[s("tabs",{attrs:{"tab-items":t.tabs,"tab-index":t.tabIndex,"on-tab-click":t.onTabClick}})],1),t._v(" "),s("div",{staticStyle:{flex:"1"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tabIndex,expression:"tabIndex===0"}],staticClass:"content"},[s("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[0].request_list,function(e){return s("div",[s("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除"},on:{ItemClick:function(s){t.onItemClick(e)},SwipeItemClick:function(s){t.delItem(e)}}},[s("div",{staticClass:"req-item-title"},[t._v("请购单号 ："),s("span",{staticClass:"vi-color"},[t._v(t._s(e.request_no))]),s("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),s("div",{staticClass:"req-item-content"},[s("span",[t._v("部门 : "+t._s(e.dep_name))]),t._v(" "),s("span",[t._v("日期 : "+t._s(e.request_date))])])])],1)}),t._v(" "),t.pageModel[0].curr_page>=t.pageModel[0].total_page?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex===1"}],staticClass:"content"},[s("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[1].request_list,function(e){return s("div",[s("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除",canSwipe:!1},on:{ItemClick:function(s){t.onItemClick(e)},SwipeItemClick:function(s){t.delItem(e)}}},[s("div",{staticClass:"req-item-title"},[t._v("请购单号 ："),s("span",{staticClass:"vi-color"},[t._v(t._s(e.request_no))]),s("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),s("div",{staticClass:"req-item-content"},[s("span",[t._v("部门 : "+t._s(e.dep_name))]),t._v(" "),s("span",[t._v("日期 : "+t._s(e.request_date))])])])],1)}),t._v(" "),t.pageModel[1].curr_page>=t.pageModel[1].total_page?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tabIndex,expression:"tabIndex===2"}],staticClass:"content"},[s("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[1].request_list,function(e){return s("div",[s("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除",canSwipe:!1},on:{ItemClick:function(s){t.onItemClick(e)},SwipeItemClick:function(s){t.delItem(e)}}},[s("div",{staticClass:"req-item-title"},[t._v("请购单号 ："),s("span",{staticClass:"vi-color"},[t._v(t._s(e.request_no))]),s("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),s("div",{staticClass:"req-item-content"},[s("span",[t._v("部门 : "+t._s(e.dep_name))]),t._v(" "),s("span",[t._v("日期 : "+t._s(e.request_date))])])])],1)}),t._v(" "),t.pageModel[1].curr_page>=t.pageModel[1].total_page?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.tabIndex,expression:"tabIndex===3"}],staticClass:"content"},[s("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[2].request_list,function(e){return s("div",[s("swipe-item",{staticClass:"req-item",attrs:{canSwipe:!1,obj:e,swipeItemText:"删除"},on:{ItemClick:function(s){t.onItemClick(e)},SwipeItemClick:function(s){t.delItem(e)}}},[s("div",{staticClass:"req-item-title"},[t._v("请购单号 ："),s("span",{staticClass:"vi-color"},[t._v(t._s(e.request_no))]),s("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),s("div",{staticClass:"req-item-content"},[s("span",[t._v("部门 : "+t._s(e.dep_name))]),t._v(" "),s("span",[t._v("日期 : "+t._s(e.request_date))])])])],1)}),t._v(" "),t.pageModel[2].curr_page>=t.pageModel[2].total_page?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:4===t.tabIndex,expression:"tabIndex===4"}],staticClass:"content"},[s("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[4].request_list,function(e){return s("div",[s("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除",canSwipe:!1},on:{ItemClick:function(s){t.onItemClick(e)},SwipeItemClick:function(s){t.delItem(e)}}},[s("div",{staticClass:"req-item-title"},[t._v("请购单号 ："),s("span",{staticClass:"vi-color"},[t._v(t._s(e.request_no))]),s("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),s("div",{staticClass:"req-item-content"},[s("span",[t._v("部门 : "+t._s(e.dep_name))]),t._v(" "),s("span",[t._v("日期 : "+t._s(e.request_date))])])])],1)}),t._v(" "),t.pageModel[3].curr_page>=t.pageModel[3].total_page?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1)])]),t._v(" "),s("div",{staticClass:"mw-page-footer"},[s("div",{staticClass:"btns"},[s("div",{staticClass:"btn",on:{click:function(e){t.$router.forward("/purchase/requisition/detail/new/null")}}},[t._v("\n                新增\n            ")]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.$router.forward("/purchase/requisition/history")}}},[t._v("\n                参考\n            ")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=97.2f75c1b229f978175cd4.js.map