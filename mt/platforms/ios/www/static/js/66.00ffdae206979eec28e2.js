webpackJsonp([66],{307:function(t,e,i){i(650);var a=i(0)(i(464),i(760),"data-v-6173d5fe",null);t.exports=a.exports},349:function(t,e,i){"use strict";function a(t){return i.i(r.a)({url:"/api/iv/store_check_bill/list",method:"post",data:t})}function s(t){return i.i(r.a)({url:"/api/iv/store_check_bill/detail",method:"post",data:t})}function n(t){return i.i(r.a)({url:"/api/iv/store_check_bill/add",method:"post",data:t})}function o(t){return i.i(r.a)({url:"/api/iv/store_check_bill/modify",method:"post",data:t})}e.d=a,e.a=s,e.c=n,e.b=o;var r=i(7)},464:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(8),s=i.n(a),n=i(349),o=i(20),r=i.n(o);e.default={name:"inventoryList",components:{SwipeItem:r.a},data:function(){return{tabs:["待盘","已盘"],tabIndex:0,liquidate_flag:"step10",pageModels:[{curr_page:0,page_size:10,total_page:0},{curr_page:0,page_size:10,total_page:0}],list:[{inventoryList:[]},{inventoryList:[]}],query:{approve_step:[],liquidate_flag:["2"]}}},computed:{},activated:function(){this.getData(!0)},methods:{onTabClick:function(t){t!==this.tabIndex&&(this.tabIndex=t,this.query.liquidate_flag=0===t?["2"]:["1"],0===this.list[t].inventoryList.length&&this.getData(!0))},filterMats:function(t){var e="";return t.mat_type_list.filter(function(t){e+=t.mat_type_name}),e},onInfinite:function(t){var e=this;if(e.pageModels[e.tabIndex].total_page<=e.pageModels[e.tabIndex].curr_page)return void t();setTimeout(function(){e.pageModels[e.tabIndex].total_page<2?t():(e.getData(),t())},500)},onRefresh:function(t){var e=this;setTimeout(function(){e.pageModels[e.tabIndex].curr_page=0,e.getData(!0),t()},500)},getData:function(t){var e=this,a={curr_page:t?1:1+this.pageModels[this.tabIndex].curr_page,page_size:this.pageModels[this.tabIndex].page_size,query:this.query};i.i(n.d)(a).then(function(i){i.check_bill_list.length>0&&(t&&(e.list[e.tabIndex].inventoryList.length=0),e.pageModels[e.tabIndex].curr_page=i.curr_page,e.pageModels[e.tabIndex].total_page=i.total_page,e.list[e.tabIndex].inventoryList=e.list[e.tabIndex].inventoryList.concat(i.check_bill_list))}).catch(function(t){$toast.show(t.description)})},onItemClick:function(t){this.$router.forward("/storage/inventory/detail/"+s()(t))}}}},549:function(t,e,i){e=t.exports=i(220)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"list.vue",sourceRoot:""}])},650:function(t,e,i){var a=i(549);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(221)("436ee7ee",a,!0)},760:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[i("div",{staticClass:"mw-page-header"},[i("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("span",[t._v("盘点单列表")]),t._v(" "),i("i",{staticClass:"right"})]),t._v(" "),i("div",{staticClass:"mw-page-content has-tab"},[i("div",{staticStyle:{height:"60px"}},[i("tabs",{attrs:{"tab-items":t.tabs,"tab-index":t.tabIndex,"on-tab-click":t.onTabClick}})],1),t._v(" "),i("div",{staticStyle:{flex:"1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tabIndex,expression:"tabIndex===0"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[0].inventoryList,function(e){return i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除",canSwipe:!1},on:{SwipeItemClick:function(i){t.delItem(e)}},nativeOn:{click:function(i){t.onItemClick(e)}}},[i("div",{staticClass:"req-item-title"},[t._v("盘点单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.check_bill_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("盘点仓库 : "+t._s(e.store_house_name))])]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("盘点物料类型 :\n                    "),t._l(e.mat_type_list,function(e){return i("span",[t._v(t._s(e.mat_type_name)+" ")])})],2)])])}),t._v(" "),t.pageModels[0].curr_page>=t.pageModels[0].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex===1"}],staticClass:"content"},[i("scroll",{staticClass:"page-content",staticStyle:{"-webkit-overflow-scrolling":"touch"},attrs:{"on-infinite":t.onInfinite,"on-refresh":t.onRefresh}},[t._l(t.list[1].inventoryList,function(e){return i("swipe-item",{staticClass:"req-item",attrs:{obj:e,swipeItemText:"删除",canSwipe:!1},on:{SwipeItemClick:function(i){t.delItem(e)}},nativeOn:{click:function(i){t.onItemClick(e)}}},[i("div",{staticClass:"req-item-title"},[t._v("盘点单号 ："),i("span",{staticClass:"vi-color"},[t._v(t._s(e.check_bill_no))]),i("i",{staticClass:"icon ion-ios-arrow-right"})]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("盘点仓库 : "+t._s(e.store_house_name))])]),t._v(" "),i("div",{staticClass:"req-item-content"},[i("span",[t._v("盘点物料类型 :\n                  "),t._l(e.mat_type_list,function(e){return i("span",[t._v(t._s(e.mat_type_name)+" ")])})],2)])])}),t._v(" "),t.pageModels[1].curr_page>=t.pageModels[1].total_page?i("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2)],1)])]),t._v(" "),i("div",{staticClass:"mw-page-footer"},[i("div",{staticClass:"btns"},[i("div",{staticClass:"btn",on:{click:function(e){t.$router.forward("/storage/inventory/detail/new")}}},[t._v("\n            新增盘点\n        ")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=66.00ffdae206979eec28e2.js.map