webpackJsonp([54],{296:function(t,e,n){n(724);var i=n(0)(n(495),n(869),"data-v-161860df",null);t.exports=i.exports},370:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={name:"cstItem",data:function(){return{selectId:"select-"+Math.random().toString(36).substring(3,6)}},props:{label:{type:String,required:!0},value:{type:"",default:""},placeholder:{type:String,default:""},canEdit:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!1},arrowText:{type:[String,Number],default:""},arrowClick:{type:Function},editType:{type:String,default:"text"},isSelect:{type:Boolean,default:!1},options:{type:Array},action:{type:String,default:"check"},color:""},methods:{noteClick:function(){this.arrowClick&&this.arrowClick()},input:function(t){var e=t.target.value;this.$emit("input",e)}}}},371:function(t,e,n){e=t.exports=n(225)(),e.push([t.i,"\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n","",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/components/cstItem.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,mBAAmB;EACnB,wBAAwB;EACxB,qBAAqB;EACrB,cAAc;CACf;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,mBAAmB;IACnB,YAAY;IACZ,UAAU;IACV,gBAAgB;CACnB;AACD;MACM,UAAU;CACf;AACD;IACI,oBAAoB;QAChB,gBAAgB;IACpB,aAAa;IACb,eAAe;IACf,0BAA0B;IAC1B,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,kBAAkB;CACrB;AACD;IACI,mBAAmB;QACf,eAAe;IACnB,kBAAkB;CACrB;AACD;MACM,UAAU;MACV,WAAW;MACX,aAAa;MACb,eAAe;MACf,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,kBAAkB;MAClB,wBAAwB;MACxB,oBAAoB;MACpB,iBAAiB;CACtB;AACD;MACM,aAAa;MACb,kBAAkB;CACvB;AACD;QACQ,sBAAsB;QACtB,YAAY;QACZ,aAAa;QACb,mBAAmB;CAC1B;AACD;IACI,iBAAiB;QACb,aAAa;CACpB;AACD;MACM,aAAa;MACb,eAAe;MACf,kBAAkB;MAClB,mBAAmB;MACnB,oBAAoB;CACzB",file:"cstItem.vue",sourcesContent:["\n.compute-item[data-v-19336c8e] {\n  min-height: 49px;\n  position: relative;\n  padding: 12px 15px;\n  background-color: white;\n  display: -ms-flexbox;\n  display: flex;\n}\n.compute-item.noneBorder > .hairlineTop[data-v-19336c8e]:before {\n    background: red;\n}\n.compute-item .arrow[data-v-19336c8e] {\n    color: #DDD;\n    position: absolute;\n    right: 15px;\n    top: 14px;\n    font-size: 20px;\n}\n.compute-item .arrow.down[data-v-19336c8e] {\n      top: 13px;\n}\n.compute-item .label[data-v-19336c8e] {\n    -ms-flex: 0 0  auto;\n        flex: 0 0  auto;\n    height: 100%;\n    display: table;\n    padding: 7px 10px 7px 0px;\n    max-width: 52%;\n    color: #484746;\n    text-align: left;\n    line-height: 12px;\n}\n.compute-item .value[data-v-19336c8e] {\n    -ms-flex: 1 0 auto;\n        flex: 1 0 auto;\n    text-align: right;\n}\n.compute-item .value input[data-v-19336c8e] {\n      margin: 0;\n      padding: 0;\n      border: none;\n      color: #ababab;\n      width: 100%;\n      height: 24px;\n      line-height: 24px;\n      text-align: right;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n}\n.compute-item .value span[data-v-19336c8e] {\n      height: 24px;\n      line-height: 24px;\n}\n.compute-item .value span.color[data-v-19336c8e] {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n}\n.compute-item .note[data-v-19336c8e] {\n    -ms-flex: 0 0 5%;\n        flex: 0 0 5%;\n}\n.compute-item .note .item-notes[data-v-19336c8e] {\n      float: right;\n      color: #ababab;\n      line-height: 24px;\n      /*padding: 0 5px;*/\n      padding-right: 15px;\n}\n"],sourceRoot:""}])},372:function(t,e,n){var i=n(371);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(226)("6ea14c28",i,!0)},373:function(t,e,n){n(372);var i=n(0)(n(370),n(374),"data-v-19336c8e",null);t.exports=i.exports},374:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"compute-item"},[n("span",{staticClass:"label"},[t._v(t._s(t.label))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"color"!==t.editType,expression:"editType!=='color'"}],staticClass:"value"},[t.canEdit&&"check"!==t.action&&"approve"!==t.action&&"checkOnly"!==t.action?n("input",{ref:"input",attrs:{type:t.editType,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.input}}):n("span",[t._v(t._s(t.value))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"color"===t.editType,expression:"editType==='color'"}],staticClass:"value"},[n("span",{staticClass:"color",style:{background:t.color}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"note"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow&&t.arrowText,expression:"hasArrow&&arrowText"}],staticClass:"item-notes",on:{click:t.noteClick}},[t._v(t._s(t.arrowText))]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.hasArrow,expression:"hasArrow"}],staticClass:"icon ion-ios-arrow-right arrow "})]),t._v(" "),n("div",{staticClass:"hairline-top"})])},staticRenderFns:[]}},408:function(t,e,n){"use strict";function i(t){return n.i(p.a)({url:"/api/pm/routing_tmpl_type/list",method:"post",data:t})}function o(t){return n.i(p.a)({url:"/api/pm/routing_tmpl_type/delete",method:"post",data:t})}function a(t){return n.i(p.a)({url:"/api/pm/routing_tmpl_type/edit",method:"post",data:t})}function r(t){return n.i(p.a)({url:"/api/pm/routing_tmpl/modify",method:"post",data:t})}function s(t){return n.i(p.a)({url:"/api/pm/routing_tmpl/list",method:"post",data:t})}function c(t){return n.i(p.a)({url:"/api/pm/routing_tmpl/delete",method:"post",data:t})}function l(t){return n.i(p.a)({url:"/api/pm/routing_tmpl/detail",method:"post",data:t})}e.c=i,e.b=o,e.a=a,e.d=r,e.g=s,e.f=c,e.e=l;var p=n(10)},495:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n.n(i),a=(n(79),n(408)),r=n(373),s=n.n(r),c=n(20),l=n.n(c),p=n(1);e.default={name:"templateDetaile",components:{CstItem:s.a,SwipeItem:l.a},computed:{},data:function(){return{action:"new",tmpl_id:"",dragx:"",dragy:"",dragX:0,dragY:0,top:0,topList:[],drag:!1,dragTime:"",Timeout:"",currItem:"",routing_tmpl_info:{id:"",remark:"",tmpl_desc:"",tmpl_name:"",tmpl_type_id:"",tmpl_type_name:"",sub_list:[]}}},activated:function(){"check"!==this.action&&(this.getTempType(),this.getProcInfo())},mounted:function(){var t=this.$route.query;this.action=t.action,"check"==this.action&&(this.tmpl_id=t.tmpl_id,this.tmplDetail())},methods:{goTemplType:function(){"check"!==this.action&&$router.forward({path:"templateTypeList"})},Edit:function(){this.action="action"},cancelEdit:function(){this.action="check",this.tmplDetail()},processDelete:function(t,e){var n=this;this.routing_tmpl_info.sub_list.splice(e,1),$toast.show("删除成功"),this.routing_tmpl_info.sub_list.length>0&&this.routing_tmpl_info.sub_list.forEach(function(t,e){n.routing_tmpl_info.sub_list[e].proc_seq=e})},getProcInfo:function(){var t=this,e=p.a.get("procInfo");if(p.a.remove("procInfo"),null!==e){var n=!0;this.routing_tmpl_info.sub_list.length>0&&this.routing_tmpl_info.sub_list.forEach(function(i,o){console.log(i.proc_seq+":"+e.proc_seq),i.proc_seq===e.proc_seq&&(t.routing_tmpl_info.sub_list.splice(o,1,e),n=!1)}),n&&(e.proc_seq=this.routing_tmpl_info.sub_list.length,this.routing_tmpl_info.sub_list.push(e))}},onItemClick:function(t){p.a.set("procInfo",o()(t)),this.$router.forward({path:"templateAddProc",query:{action:this.action}})},getTempType:function(){var t=p.a.get("tempType");p.a.remove("tempType"),null!==t&&(this.routing_tmpl_info.tmpl_type_name=t.tmpl_type_name,this.routing_tmpl_info.tmpl_type_id=t.tmpl_type_id)},tmplModify:function(){var t=this,e={routing_tmpl_info:this.routing_tmpl_info};n.i(a.d)(e).then(function(e){t.$router.go(-1),$toast.show("保存成功")}).catch(function(t){$toast.show(t.description)})},tmplDetail:function(){var t=this,e={query:{tmpl_id:this.tmpl_id}};n.i(a.e)(e).then(function(e){t.routing_tmpl_info=e.routing_tmpl_info}).catch(function(t){$toast.show(t.description)})},touchstart:function(t,e,n){this.dragx=t.targetTouches[0].clientX,this.dragy=t.targetTouches[0].clientY,this.top=this.dragy-20,"check"!==this.action&&this.longTouch(t.currentTarget,e)},touchmove:function(t,e){this.dragX=t.targetTouches[0].clientX,this.dragY=t.targetTouches[0].clientY,this.top=this.dragY-20},touchend:function(t,e,n){var i=this;clearTimeout(this.Timeout);var o=this.top+20;this.topList.forEach(function(t,a){if(t-75<o&&o<t){if(a==n||!e.drag)return;var r=i.routing_tmpl_info.sub_list[n];i.routing_tmpl_info.sub_list.splice(n,1),i.routing_tmpl_info.sub_list.splice(a,0,r),i.routing_tmpl_info.sub_list.forEach(function(t,e){i.routing_tmpl_info.sub_list[e].proc_seq=e})}}),e.drag&&this.$set(e,"drag",!1),this.drag=!1,this.dragX=0,this.dragY=0},longTouch:function(t,e){var n=this;this.Timeout=setTimeout(function(){if(0===n.dragX&&0===n.dragY){n.drag=!0,n.currItem=e,n.$set(e,"drag",!0);var i=t.parentNode.children,o=document.querySelector(".mw-page-content").scrollTop;n.topList=[];for(var a=0;a<i.length;a++)n.topList.push(i[a].offsetTop-o+75)}},400)}}}},585:function(t,e,n){e=t.exports=n(225)(),e.push([t.i,'\n.proc_list[data-v-161860df]:after {\n  display: block;\n  content: " ";\n  clear: both;\n}\n.drag[data-v-161860df] {\n  background: #fff;\n  padding: 17px 15px;\n  border-bottom: 1px solid #ccc;\n  transition: all .3s;\n  position: relative;\n}\n.drag.active[data-v-161860df] {\n    opacity: 0.3;\n}\n.drag .ion-ios-close[data-v-161860df] {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 40px;\n    height: 75px;\n    line-height: 75px;\n    font-size: 18px;\n    color: red;\n    text-align: center;\n}\n.drag p[data-v-161860df] {\n    margin: 0;\n}\n.isDrag[data-v-161860df] {\n  overflow: hidden;\n}\n.flip-list-move[data-v-161860df] {\n  transition: transform 1s;\n}\n',"",{version:3,sources:["/Users/zxf/code/motooling/mt-app/webs-mtapp/mtApp/mt/www_dev/src/views/production/procTemplate/detaile.vue"],names:[],mappings:";AACA;EACE,eAAe;EACf,aAAa;EACb,YAAY;CACb;AACD;EACE,iBAAiB;EACjB,mBAAmB;EACnB,8BAA8B;EAC9B,oBAAoB;EACpB,mBAAmB;CACpB;AACD;IACI,aAAa;CAChB;AACD;IACI,mBAAmB;IACnB,SAAS;IACT,OAAO;IACP,YAAY;IACZ,aAAa;IACb,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;IACX,mBAAmB;CACtB;AACD;IACI,UAAU;CACb;AACD;EACE,iBAAiB;CAClB;AACD;EACE,yBAAyB;CAC1B",file:"detaile.vue",sourcesContent:['\n.proc_list[data-v-161860df]:after {\n  display: block;\n  content: " ";\n  clear: both;\n}\n.drag[data-v-161860df] {\n  background: #fff;\n  padding: 17px 15px;\n  border-bottom: 1px solid #ccc;\n  transition: all .3s;\n  position: relative;\n}\n.drag.active[data-v-161860df] {\n    opacity: 0.3;\n}\n.drag .ion-ios-close[data-v-161860df] {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 40px;\n    height: 75px;\n    line-height: 75px;\n    font-size: 18px;\n    color: red;\n    text-align: center;\n}\n.drag p[data-v-161860df] {\n    margin: 0;\n}\n.isDrag[data-v-161860df] {\n  overflow: hidden;\n}\n.flip-list-move[data-v-161860df] {\n  transition: transform 1s;\n}\n'],sourceRoot:""}])},724:function(t,e,n){var i=n(585);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(226)("ff493816",i,!0)},869:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page storage"},[n("div",{staticClass:"mw-page-header"},[n("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),"new"===t.action?n("span",[t._v("新建工艺模板")]):n("span",[t._v("工艺模板详情")]),t._v(" "),"check"===t.action?n("i",{staticClass:"right",on:{click:t.Edit}},[t._v("编辑")]):t._e(),t._v(" "),"action"===t.action?n("i",{staticClass:"right",on:{click:t.cancelEdit}},[t._v("取消")]):t._e(),t._v(" "),"new"===t.action?n("i",{staticClass:"right"}):t._e()]),t._v(" "),n("div",{staticClass:"mw-page-content ",class:t.drag?"isDrag":""},[n("cst-item",{attrs:{label:"模板类型",placeholder:"请选择模板类型",action:"check",hasArrow:"check"!==t.action},nativeOn:{click:function(e){t.goTemplType()}},model:{value:t.routing_tmpl_info.tmpl_type_name,callback:function(e){t.$set(t.routing_tmpl_info,"tmpl_type_name",e)},expression:"routing_tmpl_info.tmpl_type_name"}}),t._v(" "),n("cst-item",{attrs:{label:"模板名称",placeholder:"请输入模板名称",action:t.action},model:{value:t.routing_tmpl_info.tmpl_name,callback:function(e){t.$set(t.routing_tmpl_info,"tmpl_name",e)},expression:"routing_tmpl_info.tmpl_name"}}),t._v(" "),n("cst-item",{attrs:{label:"模板描述",placeholder:"请输入模板描述",action:t.action},model:{value:t.routing_tmpl_info.tmpl_desc,callback:function(e){t.$set(t.routing_tmpl_info,"tmpl_desc",e)},expression:"routing_tmpl_info.tmpl_desc"}}),t._v(" "),n("item",[n("span",[t._v("备注:")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.routing_tmpl_info.remark,expression:"routing_tmpl_info.remark"}],staticStyle:{resize:"none",width:"100%",height:"52px","line-height":"16px","font-size":"12px"},attrs:{disabled:"check"==t.action,placeholder:"请输入备注"},domProps:{value:t.routing_tmpl_info.remark},on:{input:function(e){e.target.composing||t.$set(t.routing_tmpl_info,"remark",e.target.value)}}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.routing_tmpl_info.sub_list.length>0,expression:"routing_tmpl_info.sub_list.length>0"}],staticClass:"proc_list"},[t._m(0,!1,!1),t._v(" "),n("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.routing_tmpl_info.sub_list,function(e,i){return n("div",{key:e.id,staticClass:"drag",class:!0===e.drag?"active":"",on:{click:function(n){t.onItemClick(e)},touchstart:function(n){t.touchstart(n,e,i)},touchmove:function(n){t.touchmove(n,e)},touchend:function(n){t.touchend(n,e,i)}}},[n("p",[t._v("工序名称："+t._s(e.proc_name))]),t._v(" "),n("p",[t._v("工序类型："+t._s(1==e.proc_type?"生产":"外协"))]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:"check"!==t.action,expression:"action!=='check'"}],staticClass:"ion-ios-close",on:{click:function(n){t.processDelete(e,i)}}})])}))],1),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:"check"!==t.action,expression:"action!=='check'"}],staticStyle:{"margin-top":"10px","text-align":"center",color:"#416eb6","border-bottom":"1px solid #416eb6","border-top":"1px solid #416eb6","line-height":"40px",background:"#fff"},on:{click:function(e){t.$router.forward({path:"templateAddProc",query:{action:"new"}})}}},[t._v("+添加工序")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"check"!==t.action,expression:"action!=='check'"}],staticClass:"mw-page-footer"},[n("div",{staticClass:"btns"},[n("div",{staticClass:"btn",on:{click:t.tmplModify}},[t._v("\n          保存\n        ")])])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.drag,expression:"drag"}],staticClass:"model",staticStyle:{width:"96%",height:"40px",background:"#F5F5F5",opacity:".9",position:"fixed",left:"2%","padding-left":"5px","box-sizing":"border-box"},style:{top:this.top+"px"}},[n("p",{staticStyle:{margin:"0"}},[t._v("工序名称："+t._s(t.currItem.proc_name))]),t._v(" "),n("p",{staticStyle:{margin:"0"}},[t._v("工序类型："+t._s(1==t.currItem.proc_type?"生产":"外协"))])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"item-divider",staticStyle:{"padding-left":"15px"}},[t._v("工序列表")])])}]}}});
//# sourceMappingURL=54.c10e780cc21611e70279.js.map