webpackJsonp([85],{323:function(e,t,n){n(593);var i=n(0)(n(480),n(698),"data-v-043a0b54",null);e.exports=i.exports},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(33),n(1)),o=n(50),a=n(85),s=n(32),l=(n.n(s),n(49)),r=n.n(l);t.default={name:"regist",components:{MwInput:r.a},data:function(){return{username:"",regist_type:"phone_with_code",checkCode:"",password:"",pwd_repeat:"",email:"",interval:0,isSentCode:!1,isSentEmailCode:!1,downCount:60,downCountEmail:60,zone:{zh:"中国",code:"+86",en:"China"}}},created:function(){i.a.get("zoneCode")&&(this.zone=i.a.get("zoneCode"))},destory:function(){this.interval&&clearInterval(this.interval)},methods:{changeZoneCode:function(){console.log("zoneCode"),$router.forward("/zoneCode")},changeType:function(e){this.regist_type=e,this.login_type=e,this.username="",this.email="",this.password="",this.checkCode="",clearInterval(this.interval),this.downCount=60,this.isSentCode=!1},checkPhoneIsExist:function(){var e=this;if(!this.username||""===this.username||0===this.username.trim().length)return void $toast.show("手机号不能为空，请检查",1e3);if(!this.validPhone())return void $toast.show("手机号格式有误，请检查");var t={identity_type:"mobile",user:this.username};n.i(o.b)(t).then(function(t){$toast.show(e.username+"已经存在")}).catch(function(t){e.validPhone("sendCode")})},checkUser:function(){var e=this;if("email"===this.login_type){if(!e.email||""===e.email||0===e.email.trim().length)return void $toast.show(("email"===e.login_type?"邮箱":"手机号")+"不能为空，请检查",1e3)}else if(!e.username||""===e.username||0===e.username.trim().length)return void $toast.show(("email"===e.login_type?"邮箱":"手机号")+"不能为空，请检查",1e3);return"phone_with_code"!==e.regist_type||n.i(a.a)(e.username)?"email"!==e.regist_type||n.i(a.b)(e.email)?"email"!==e.regist_type||e.password&&0!==e.password.trim().length&&n.i(a.c)(e.password)?e.checkCode&&0!==e.checkCode.trim().length?n.i(a.d)(this.checkCode)?void("email"===e.regist_type?e.submitRegist():this.validPhone("regist")):void $toast.show("验证码格式有误，请检查",1e3):void $toast.show("验证码不能为空，请检查",1e3):e.password.length<6?void $toast.show("密码长度至少6位"):e.password.length>20?void $toast.show("密码长度最长20位"):void $toast.show("密码格式有误，请检查",1e3):void $toast.show("邮箱格式有误，请检查",1e3):void $toast.show("手机号码错误，请检查",1e3)},sendCode:function(e){var t=this,i=this;if("mobile"===e){var a={country_code:i.zone.code.substr(1),mobile:i.username,type:0};n.i(o.d)(a).then(function(e){i.isSentCode=!0,$toast.show("验证码已发送"),t.interval=setInterval(function(){i.downCount>0?i.downCount--:(clearInterval(this.interval),i.downCount=60,i.isSentCode=!1)},1e3)}).catch(function(e){$toast.show("网络繁忙，请稍后重试")})}else if("email"===e){var s={email:this.email};n.i(o.e)(s).then(function(e){i.isSentEmailCode=!0,$toast.show("验证码已发送至您的邮箱"),t.interval=setInterval(function(){i.downCountEmail>0?i.downCountEmail--:(clearInterval(this.interval),i.downCountEmail=60,i.isSentEmailCode=!1)},1e3)}).catch(function(e){$toast.show("网络繁忙，请稍后重试")})}},submitRegist:function(){var e=this,t=this,a={client_type:2,user:"email"===t.regist_type?this.email:this.username,password:t.password,regist_type:"email"===t.regist_type?"email":"mobile",code:t.checkCode};n.i(o.f)(a).then(function(n){console.log("regist success");var o={user:"email"===t.regist_type?e.email:t.username,password:e.password,identity_type:"email"===t.regist_type?"email":"mobile",vericode:t.checkCode};console.log(o),t.$store.dispatch("Login",o).then(function(e){$toast.show("恭喜您，注册成功"),t.$store.dispatch("GetInfo").then(function(e){console.log(e);var n=e.company;console.log("company"+n),n&&n.length>0?1===n.length?(t.$store.dispatch("setCompany",n[0]),$router.forward("/home")):(i.a.set("companys",n),$router.forward("/chooseCompany")):(console.log("company is null"),t.$store.dispatch("setCompany",""),$router.forward("/home"))}).catch(function(e){$toast.show("网络异常，请稍后重试!",1e3)})}).catch(function(e){console.log("login error")})}).catch(function(e){console.log("regist failure"),$toast.show(e.description,3e3)})},validPhone:function(e){var t=this;if(!t.username||""===t.username)return void $toast.show("手机号不能为空，请检查",1e3);var i=n.i(a.a)(t.username);if(i||$toast.show("手机号不正确，请检查",1e3),"regist"===e)i&&this.submitRegist();else{if("sendCode"!==e)return i;i&&t.sendCode("mobile")}},validEmail:function(){return this.email&&""!==this.email?n.i(a.b)(this.email)?void this.sendCode("email"):void $toast.show("邮箱格式错误!",1e3):void $toast.show(("email"===this.regist_type?"邮箱":"手机号")+"不能为空，请检查",1e3)}}}},492:function(e,t,n){t=e.exports=n(220)(),t.push([e.i,"\n.width[data-v-043a0b54] {\n  width: 70%;\n  margin: 0 auto;\n  text-align: center;\n}\n.checkCode[data-v-043a0b54] {\n  width: 50%;\n  padding: 0;\n  float: left;\n}\n.regist_type[data-v-043a0b54] {\n  color: #416eb6;\n  text-align: left;\n  padding: 10px 2px;\n  display: inline;\n  float: left;\n}\n.right[data-v-043a0b54] {\n  text-align: right;\n  float: right;\n}\n.getCode[data-v-043a0b54] {\n  width: 50%;\n  float: right;\n  background-color: transparent;\n  color: #416eb6;\n  line-height: 50px;\n  height: 50px;\n  box-shadow: none;\n  font-size: 14px;\n  text-align: center;\n}\n.zoneCode[data-v-043a0b54] {\n  height: 58px;\n  line-height: 49px;\n  text-align: left;\n}\n.zoneCode span[data-v-043a0b54] {\n    padding-left: 15px;\n    color: #9c9c9c;\n}\n.zoneCode .code[data-v-043a0b54] {\n    color: black;\n}\n","",{version:3,sources:["E:/weibosi/webs-mt/mt/www_dev/src/views/user/login/regist.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,WAAW;EACX,YAAY;CACb;AACD;EACE,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,kBAAkB;EAClB,aAAa;CACd;AACD;EACE,WAAW;EACX,aAAa;EACb,8BAA8B;EAC9B,eAAe;EACf,kBAAkB;EAClB,aAAa;EACb,iBAAiB;EACjB,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,mBAAmB;IACnB,eAAe;CAClB;AACD;IACI,aAAa;CAChB",file:"regist.vue",sourcesContent:["\n.width[data-v-043a0b54] {\n  width: 70%;\n  margin: 0 auto;\n  text-align: center;\n}\n.checkCode[data-v-043a0b54] {\n  width: 50%;\n  padding: 0;\n  float: left;\n}\n.regist_type[data-v-043a0b54] {\n  color: #416eb6;\n  text-align: left;\n  padding: 10px 2px;\n  display: inline;\n  float: left;\n}\n.right[data-v-043a0b54] {\n  text-align: right;\n  float: right;\n}\n.getCode[data-v-043a0b54] {\n  width: 50%;\n  float: right;\n  background-color: transparent;\n  color: #416eb6;\n  line-height: 50px;\n  height: 50px;\n  box-shadow: none;\n  font-size: 14px;\n  text-align: center;\n}\n.zoneCode[data-v-043a0b54] {\n  height: 58px;\n  line-height: 49px;\n  text-align: left;\n}\n.zoneCode span[data-v-043a0b54] {\n    padding-left: 15px;\n    color: #9c9c9c;\n}\n.zoneCode .code[data-v-043a0b54] {\n    color: black;\n}\n"],sourceRoot:""}])},593:function(e,t,n){var i=n(492);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(221)("36f8c54c",i,!0)},698:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"nav",rawName:"v-nav",value:{hideNavbar:!0},expression:"{hideNavbar:true}"}],staticClass:"mw-page page"},[n("div",{staticClass:"mw-page-header"},[n("i",{staticClass:"left icon ion-ios-arrow-back",on:{click:function(t){e.$router.go(-1)}}}),e._v(" "),n("span",[e._v(e._s(e.$t("regist")))]),e._v(" "),n("i")]),e._v(" "),n("div",{staticClass:"mw-page-content"},[n("div",[e._m(0,!1,!1),e._v(" "),"email"===e.regist_type?n("div",{staticStyle:{width:"70%",margin:"0 auto"}},[n("mw-input",{ref:"von_input",staticClass:"register-login",staticStyle:{"margin-top":"8px"},attrs:{inputType:"email",placeholder:e.$t("enter-email")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("mw-input",{staticClass:"register-login",staticStyle:{"margin-top":"8px"},attrs:{inputType:"password",placeholder:"6-16位数字/字母/符号(_*@%&)"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("div",{staticStyle:{"background-color":"white",display:"flex","margin-top":"8px"}},[n("mw-input",{staticClass:"checkCode register-login",staticStyle:{flex:"1 1 auto"},attrs:{inputType:"tel",placeholder:e.$t("enter-sms-code")},model:{value:e.checkCode,callback:function(t){e.checkCode=t},expression:"checkCode"}}),e._v(" "),e.isSentEmailCode?n("div",{staticClass:" getCode",staticStyle:{color:"#c8c8c8"}},[e._v(e._s(e.$t("get-sms-code-again"))+"("+e._s(e.downCountEmail)+")")]):n("div",{staticClass:" getCode",on:{click:function(t){e.validEmail()}}},[e._v(e._s(e.$t("get-sms-code")))])],1)],1):n("div",{staticStyle:{display:"inline"}},[n("div",{staticClass:"width zoneCode",on:{click:e.changeZoneCode}},[n("span",[e._v(e._s(e.$t("region")))]),e._v(" "),n("span",{staticClass:"code"},[e._v(e._s(e.zone.zh)+" ("+e._s(e.zone.code)+")")])]),e._v(" "),n("mw-input",{ref:"von_input",staticClass:"width register-login",staticStyle:{"margin-top":"8px"},attrs:{inputType:"tel",placeholder:e.$t("enter-phone")},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),"phone_with_code"===e.regist_type?n("div",{staticClass:"width",staticStyle:{display:"flex","margin-top":"8px","background-color":"white","border-radius":"5px"}},[n("mw-input",{staticClass:"checkCode register-login",staticStyle:{flex:"1 1 auto"},attrs:{inputType:"tel",placeholder:e.$t("enter-sms-code")},model:{value:e.checkCode,callback:function(t){e.checkCode=t},expression:"checkCode"}}),e._v(" "),e.isSentCode?n("div",{staticClass:" getCode",staticStyle:{color:"#c8c8c8"}},[e._v(e._s(e.$t("get-sms-code-again"))+"("+e._s(e.downCount)+")")]):n("div",{staticClass:" getCode",on:{click:e.checkPhoneIsExist}},[e._v(e._s(e.$t("get-sms-code")))])],1):e._e(),e._v(" "),n("div",{staticClass:"width"},["email"===e.regist_type?n("p",{staticClass:"regist_type",on:{click:function(t){e.changeType("phone_with_code")}}},[e._v(e._s(e.$t("regist-via-phone")))]):n("p",{staticClass:"regist_type",on:{click:function(t){e.changeType("email")}}},[e._v(e._s(e.$t("regist-via-email")))]),e._v(" "),n("p",{staticClass:"regist_type right",on:{click:function(t){e.$router.forward("/login")}}},[e._v(e._s(e.$t("login")))]),e._v(" "),n("md-button",{staticClass:"button button-positive button-block",staticStyle:{"background-color":"#4161b6"},nativeOn:{click:function(t){e.checkUser(t)}}},[e._v(e._s(e.$t("regist")))])],1)])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo",staticStyle:{height:"30%","text-align":"center","padding-top":"8%"}},[n("img",{attrs:{src:"static/images/login/logo.png",width:"50%"}})])}]}}});
//# sourceMappingURL=85.4a7507ba526642288749.js.map