<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mt.iv.common.dao.BmMatMapper">

  <insert id="addIvMatModify" parameterType="map" useGeneratedKeys="true" keyProperty="id" keyColumn="id"  >
    <selectKey resultType="int" order="AFTER" keyProperty="id">
          SELECT LAST_INSERT_ID() as id
    </selectKey>
       INSERT into bm_mat
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="company_id != null and company_id != ''">
        company_id,
      </if>
      <if test="company_name != null and company_name != ''">
        company_name,
      </if>
      <if test="mat_no != null and mat_no != ''">
        mat_no,
      </if>
      <if test="mat_name_id != null and mat_name_id != ''">
        mat_name_id,
      </if>
      <if test="mat_name != null and mat_name != ''">
        mat_name,
      </if>
      <if test="mat_type_id != null and mat_type_id != ''">
        mat_type_id,
      </if>
      <if test="mat_type_name != null and mat_type_name != ''">
        mat_type_name,
      </if>
      <if test="rawnature_id != null and rawnature_id != ''">
        rawnature_id,
      </if>
      <if test="rawnature_name != null and rawnature_name != ''">
        rawnature_name,
      </if>
      <if test="mat_desc != null and mat_desc != ''">
        mat_desc,
      </if>
      <if test="min_stock_qty != null and min_stock_qty != ''">
        min_stock_qty,
      </if>
      <if test="batch_qty != null and  batch_qty != ''">
        batch_qty,
      </if>
      <if test="procure_style != null and procure_style != ''">
        procure_style,
      </if>
      <if test="is_qc != null and is_qc != ''">
        is_qc,
      </if>
      <if test="unit_no != null and unit_no != ''">
        unit_no,
      </if>
      <if test="weight != null and weight != ''">
        weight,
      </if>
      <if test="shape != null and shape !=  ''">
        shape,
      </if>
      <if test="length != null and length != ''">
        length,
      </if>
      <if test="width != null and width !=  ''">
        width,
      </if>
      <if test="height != null and height !=''">
        height,
      </if>
      <if test="processes_type != null and processes_type != ''">
        processes_type,
      </if>
      <if test="plan_price != null and plan_price != ''">
        plan_price,
      </if>
      <if test="pic_path != null and pic_path != ''">
        pic_path,
      </if>
      <if test="bin_no != null and bin_no != ''">
        bin_no,
      </if>
      <if test="uid != null and uid != ''">
        handler_id,
      </if>
      <if test="handled_time != null and handled_time != ''">
        handled_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="company_id != null and company_id != ''">
        #{company_id,jdbcType=VARCHAR},
      </if>
      <if test="company_name != null and company_name != ''">
        #{company_name,jdbcType=VARCHAR},
      </if>
      <if test="mat_no != null and mat_no != ''">
        #{mat_no,jdbcType=VARCHAR},
      </if>
      <if test="mat_name_id != null and mat_name_id != ''">
        #{mat_name_id},
      </if>
      <if test="mat_name != null and mat_name != ''">
        #{mat_name,jdbcType=VARCHAR},
      </if>
      <if test="mat_type_id != null and mat_type_id != ''">
        #{mat_type_id,jdbcType=BIGINT},
      </if>
      <if test="mat_type_name != null and mat_type_name != ''">
        #{mat_type_name,jdbcType=VARCHAR},
      </if>
      <if test="rawnature_id != null and rawnature_id != ''">
        #{rawnature_id,jdbcType=BIGINT},
      </if>
      <if test="rawnature_name != null and rawnature_name != ''">
        #{rawnature_name,jdbcType=VARCHAR},
      </if>
      <if test="mat_desc != null and mat_desc != ''">
        #{mat_desc,jdbcType=VARCHAR},
      </if>
      <if test="min_stock_qty != null and min_stock_qty != ''">
        #{min_stock_qty,jdbcType=DECIMAL},
      </if>
      <if test="batch_qty != null and  batch_qty != ''">
        #{batch_qty,jdbcType=DECIMAL},
      </if>
      <if test="procure_style != null and procure_style != ''">
        #{procure_style,jdbcType=CHAR},
      </if>
      <if test="is_qc != null and is_qc != ''">
        #{is_qc,jdbcType=CHAR},
      </if>
      <if test="unit_no != null and unit_no != ''">
        #{unit_no,jdbcType=VARCHAR},
      </if>
      <if test="weight != null and weight != ''">
        #{weight,jdbcType=DECIMAL},
      </if>
      <if test="shape != null and shape !=  ''">
        #{shape,jdbcType=CHAR},
      </if>
      <if test="length != null and length != ''">
        #{length,jdbcType=DECIMAL},
      </if>
      <if test="width != null and width !=  ''">
        #{width,jdbcType=DECIMAL},
      </if>
      <if test="height != null and height !=''">
        #{height,jdbcType=DECIMAL},
      </if>
      <if test="processes_type != null and processes_type != ''">
        #{processes_type,jdbcType=CHAR},
      </if>
      <if test="plan_price != null and plan_price != ''">
        #{plan_price,jdbcType=DECIMAL},
      </if>
      <if test="pic_path != null and pic_path != ''">
        #{pic_path,jdbcType=VARCHAR},
      </if>
      <if test="bin_no != null and bin_no != ''">
        #{bin_no,jdbcType=VARCHAR},
      </if>
      <if test="uid != null and uid != ''">
        #{uid,jdbcType=VARCHAR},
      </if>
      <if test="handled_time != null and handled_time != ''">
        #{handled_time,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>


  <update id="updateIvMatModify" parameterType="map" >
        update bm_mat
          <set>
            <if test="company_id != null and company_id != ''">
              #{company_id,jdbcType=VARCHAR},
            </if>
            <if test="company_name != null and company_name != ''">
              #{company_name,jdbcType=VARCHAR},
            </if>
            <if test="mat_no != null and mat_no != ''">
              #{mat_no,jdbcType=VARCHAR},
            </if>
            <if test="mat_name_id != null and mat_name_id != ''">
              #{mat_name_id},
            </if>
            <if test="mat_name != null and mat_name != ''">
              #{mat_name,jdbcType=VARCHAR},
            </if>
            <if test="mat_type_id != null and mat_type_id != ''">
              #{mat_type_id,jdbcType=BIGINT},
            </if>
            <if test="mat_type_name != null and mat_type_name != ''">
              #{mat_type_name,jdbcType=VARCHAR},
            </if>
            <if test="rawnature_id != null and rawnature_id != ''">
              #{rawnature_id,jdbcType=BIGINT},
            </if>
            <if test="rawnature_name != null amd rawnature_name != ''">
              #{rawnature_name,jdbcType=VARCHAR},
            </if>
            <if test="mat_desc != null and mat_desc != ''">
              #{mat_desc,jdbcType=VARCHAR},
            </if>
            <if test="min_stock_qty != null and min_stock_qty != ''">
              #{min_stock_qty,jdbcType=DECIMAL},
            </if>
            <if test="batch_qty != null and  batch_qty != ''">
              #{batch_qty,jdbcType=DECIMAL},
            </if>
            <if test="procure_style != null and procure_style != ''">
              #{procure_style,jdbcType=CHAR},
            </if>
            <if test="is_qc != null and is_qc != ''">
              #{is_qc,jdbcType=CHAR},
            </if>
            <if test="unit_no != null and unit_no != ''">
              #{unit_no,jdbcType=VARCHAR},
            </if>
            <if test="weight != null and weight != ''">
              #{weight,jdbcType=DECIMAL},
            </if>
            <if test="shape != null and shape !=  ''">
              #{shape,jdbcType=CHAR},
            </if>
            <if test="length != null and length != ''">
              #{length,jdbcType=DECIMAL},
            </if>
            <if test="width != null and width !=  ''">
              #{width,jdbcType=DECIMAL},
            </if>
            <if test="height != null and height !=''">
              #{height,jdbcType=DECIMAL},
            </if>
            <if test="processes_type != null and processes_type != ''">
              #{processes_type,jdbcType=CHAR},
            </if>
            <if test="plan_price != null and plan_price != ''">
              #{plan_price,jdbcType=DECIMAL},
            </if>
            <if test="pic_path != null and pic_path != ''">
              #{pic_path,jdbcType=VARCHAR},
            </if>
            <if test="bin_no != null and bin_no != ''">
              #{bin_no,jdbcType=VARCHAR},
            </if>
            <if test="uid != null and uid != ''">
              #{uid,jdbcType=VARCHAR},
            </if>
            <if test="handled_time != null and handled_time != ''">
              #{handled_time,jdbcType=TIMESTAMP},
            </if>
          </set>
          WHERE  mat_id=#{mat_id}
  </update>

  <!--wendy-->
  <select  id="selectMatInfo" resultType="map">
    select mat_type_id,mat_type_name,mat_desc,version,spec as mat_model
    from  bm_mat    where  mat_id=#{mat_id}
  </select>


  <select id="selectMatModify" resultType="map" parameterType="map">
    select * from  bm_mat   where  mat_id=#{mat_id}
  </select>
</mapper>