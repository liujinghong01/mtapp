<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mt.upms.common.dao.UserWeixiGzhMapper">

    <insert id="addserWeixiGzh" parameterType="map">
        INSERT INTO user_weixi_gzh
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="subscribe != null and subscribe != ''">
                subscribe,
            </if>
            <if test="openid != null and openid != ''">
                open_id,
            </if>
            <if test="nickname != null and nickname != ''">
                nick_name,
            </if>
            <if test="groupid != null and groupid != ''">
                group_id,
            </if>
            <if test="unionid != null and unionid!=''">
                union_id,
            </if>
            <if test="remark != null and remark!=''">
                remark,
            </if>
            <if test="headimgurl != null and headimgurl != ''">
                headimg_url,
            </if>
            <if test="country != null and country!=''">
                country,
            </if>
            <if test="province != null and province!=''">
                province,
            </if>
            <if test="city != null and city!=''">
                city,
            </if>
            <if test="language != null and language!=''">
                language,
            </if>
            <if test="sex != null and sex!=''">
                sex,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="subscribe != null and subscribe!=''">
                #{subscribe},
            </if>
            <if test="openid != null and openid != ''">
                #{openid},
            </if>
            <if test="nickname != null and nickname != ''">
                #{nickname},
            </if>
            <if test="groupid != null and groupid != ''">
                #{groupid},
            </if>
            <if test="unionid != null and unionid!=''">
                #{unionid},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="headimgurl != null and headimgurl !=''">
                #{ headimgurl},
            </if>
            <if test="country != null and country !=''">
                #{country},
            </if>
            <if test="province != null and province !=''">
                #{province},
            </if>
            <if test="city != null and city !=''">
                #{city},
            </if>
            <if test="language != null and language !=''">
                #{language},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
        </trim>
    </insert>

    <update id="updateUserWeixiGzh" parameterType="map">
        update user
        <set>
            <if test="subscribe != null and subscribe!=''">
                subscribe= #{subscribe},
            </if>
            <if test="openid != null and openid != ''">
                open_id= #{openid},
            </if>
            <if test="nickname != null and nickname != ''">
                nick_name= #{nick_name},
            </if>
            <if test="groupid != null and groupid != ''">
                group_id = #{groupid},
            </if>
            <if test="remark != null and remark!=''">
                remark= #{remark},
            </if>
            <if test="headimgurl != null and headimgurl != ''">
                headimg_url= #{ headimgurl},
            </if>
            <if test="country != null and country!=''">
                country= #{country},
            </if>
            <if test="province != null and province!=''">
                province= #{province},
            </if>
            <if test="city != null and city!=''">
                city= #{city},
            </if>
            <if test="language != null and language!=''">
                language= #{language},
            </if>
            <if test="sex != null and sex!=''">
                sex= #{sex},
            </if>
        </set>
        where union_id = #{unionid}
    </update>

    <select id="selectOpenIdList" resultType="list">
        select open_id from user_weixi_gzh
    </select>

    <select id="selectOpenId" parameterType="java.lang.String" resultType="java.lang.String">
        select open_id from user_weixi_gzh WHERE union_id = #{unionId}
    </select>
</mapper>
