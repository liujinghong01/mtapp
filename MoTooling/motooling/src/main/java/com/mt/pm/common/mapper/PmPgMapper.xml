<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mt.pm.common.dao.PmPgMapper">
  <resultMap id="BaseResultMap" type="com.mt.pm.common.model.PmPg">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="pg_id" jdbcType="BIGINT" property="pgId" />
    <result column="pg_name" jdbcType="VARCHAR" property="pgName" />
    <result column="pg_desc" jdbcType="VARCHAR" property="pgDesc" />
    <result column="pg_type" jdbcType="CHAR" property="pgType" />
    <result column="std_unit" jdbcType="VARCHAR" property="stdUnit" />
    <result column="assign_to_device" jdbcType="CHAR" property="assignToDevice" />
    <result column="calendar_id" jdbcType="INTEGER" property="calendarId" />
    <result column="calendar_name" jdbcType="VARCHAR" property="calendarName" />
    <result column="labour_ratio" jdbcType="DECIMAL" property="labourRatio" />
    <result column="start_time" jdbcType="VARCHAR" property="startTime" />
    <result column="end_time" jdbcType="VARCHAR" property="endTime" />
    <result column="rest_length" jdbcType="DECIMAL" property="restLength" />
    <result column="capa_ratio" jdbcType="DECIMAL" property="capaRatio" />
    <result column="overload_ratio" jdbcType="DECIMAL" property="overloadRatio" />
    <result column="trans_length" jdbcType="DECIMAL" property="transLength" />
    <result column="queue_length" jdbcType="DECIMAL" property="queueLength" />
    <result column="avail_status" jdbcType="CHAR" property="availStatus" />
    <result column="workshop_id" jdbcType="BIGINT" property="workshopId" />
    <result column="pg_pic" jdbcType="VARCHAR" property="pgPic" />
    <result column="day_hours" jdbcType="DECIMAL" property="dayHours" />
    <result column="sort" jdbcType="DECIMAL" property="sort" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="handler_id" jdbcType="BIGINT" property="handlerId" />
    <result column="created_at" jdbcType="TIMESTAMP" property="createdAt" />
    <result column="updated_at" jdbcType="TIMESTAMP" property="updatedAt" />
    <result column="status" jdbcType="CHAR" property="status" />
  </resultMap>
  <sql id="Base_Column_List">
    id, pg_id, pg_name, pg_desc, pg_type, std_unit, assign_to_device, calendar_id, calendar_name,
    labour_ratio, start_time, end_time, rest_length, capa_ratio, overload_ratio, trans_length,
    queue_length, avail_status, workshop_id, pg_pic, day_hours, sort, remark, handler_id,
    created_at, updated_at, status
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from pm_pg
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from pm_pg
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.mt.pm.common.model.PmPg">
    insert into pm_pg (id, pg_id, pg_name,
    pg_desc, pg_type, std_unit,
    assign_to_device, calendar_id, calendar_name,
    labour_ratio, start_time, end_time,
    rest_length, capa_ratio, overload_ratio,
    trans_length, queue_length, avail_status,
    workshop_id, pg_pic, day_hours,
    sort, remark, handler_id,
    created_at, updated_at, status
    )
    values (#{id,jdbcType=BIGINT}, #{pgId,jdbcType=BIGINT}, #{pgName,jdbcType=VARCHAR},
    #{pgDesc,jdbcType=VARCHAR}, #{pgType,jdbcType=CHAR}, #{stdUnit,jdbcType=VARCHAR},
    #{assignToDevice,jdbcType=CHAR}, #{calendarId,jdbcType=INTEGER}, #{calendarName,jdbcType=VARCHAR},
    #{labourRatio,jdbcType=DECIMAL}, #{startTime,jdbcType=VARCHAR}, #{endTime,jdbcType=VARCHAR},
    #{restLength,jdbcType=DECIMAL}, #{capaRatio,jdbcType=DECIMAL}, #{overloadRatio,jdbcType=DECIMAL},
    #{transLength,jdbcType=DECIMAL}, #{queueLength,jdbcType=DECIMAL}, #{availStatus,jdbcType=CHAR},
    #{workshopId,jdbcType=BIGINT}, #{pgPic,jdbcType=VARCHAR}, #{dayHours,jdbcType=DECIMAL},
    #{sort,jdbcType=DECIMAL}, #{remark,jdbcType=VARCHAR}, #{handlerId,jdbcType=BIGINT},
    #{createdAt,jdbcType=TIMESTAMP}, #{updatedAt,jdbcType=TIMESTAMP}, #{status,jdbcType=CHAR}
    )
  </insert>
  <insert id="insertSelective" parameterType="com.mt.pm.common.model.PmPg">
    insert into pm_pg
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="pgId != null">
        pg_id,
      </if>
      <if test="pgName != null">
        pg_name,
      </if>
      <if test="pgDesc != null">
        pg_desc,
      </if>
      <if test="pgType != null">
        pg_type,
      </if>
      <if test="stdUnit != null">
        std_unit,
      </if>
      <if test="assignToDevice != null">
        assign_to_device,
      </if>
      <if test="calendarId != null">
        calendar_id,
      </if>
      <if test="calendarName != null">
        calendar_name,
      </if>
      <if test="labourRatio != null">
        labour_ratio,
      </if>
      <if test="startTime != null">
        start_time,
      </if>
      <if test="endTime != null">
        end_time,
      </if>
      <if test="restLength != null">
        rest_length,
      </if>
      <if test="capaRatio != null">
        capa_ratio,
      </if>
      <if test="overloadRatio != null">
        overload_ratio,
      </if>
      <if test="transLength != null">
        trans_length,
      </if>
      <if test="queueLength != null">
        queue_length,
      </if>
      <if test="availStatus != null">
        avail_status,
      </if>
      <if test="workshopId != null">
        workshop_id,
      </if>
      <if test="pgPic != null">
        pg_pic,
      </if>
      <if test="dayHours != null">
        day_hours,
      </if>
      <if test="sort != null">
        sort,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="handlerId != null">
        handler_id,
      </if>
      <if test="createdAt != null">
        created_at,
      </if>
      <if test="updatedAt != null">
        updated_at,
      </if>
      <if test="status != null">
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="pgId != null">
        #{pgId,jdbcType=BIGINT},
      </if>
      <if test="pgName != null">
        #{pgName,jdbcType=VARCHAR},
      </if>
      <if test="pgDesc != null">
        #{pgDesc,jdbcType=VARCHAR},
      </if>
      <if test="pgType != null">
        #{pgType,jdbcType=CHAR},
      </if>
      <if test="stdUnit != null">
        #{stdUnit,jdbcType=VARCHAR},
      </if>
      <if test="assignToDevice != null">
        #{assignToDevice,jdbcType=CHAR},
      </if>
      <if test="calendarId != null">
        #{calendarId,jdbcType=INTEGER},
      </if>
      <if test="calendarName != null">
        #{calendarName,jdbcType=VARCHAR},
      </if>
      <if test="labourRatio != null">
        #{labourRatio,jdbcType=DECIMAL},
      </if>
      <if test="startTime != null">
        #{startTime,jdbcType=VARCHAR},
      </if>
      <if test="endTime != null">
        #{endTime,jdbcType=VARCHAR},
      </if>
      <if test="restLength != null">
        #{restLength,jdbcType=DECIMAL},
      </if>
      <if test="capaRatio != null">
        #{capaRatio,jdbcType=DECIMAL},
      </if>
      <if test="overloadRatio != null">
        #{overloadRatio,jdbcType=DECIMAL},
      </if>
      <if test="transLength != null">
        #{transLength,jdbcType=DECIMAL},
      </if>
      <if test="queueLength != null">
        #{queueLength,jdbcType=DECIMAL},
      </if>
      <if test="availStatus != null">
        #{availStatus,jdbcType=CHAR},
      </if>
      <if test="workshopId != null">
        #{workshopId,jdbcType=BIGINT},
      </if>
      <if test="pgPic != null">
        #{pgPic,jdbcType=VARCHAR},
      </if>
      <if test="dayHours != null">
        #{dayHours,jdbcType=DECIMAL},
      </if>
      <if test="sort != null">
        #{sort,jdbcType=DECIMAL},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="handlerId != null">
        #{handlerId,jdbcType=BIGINT},
      </if>
      <if test="createdAt != null">
        #{createdAt,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedAt != null">
        #{updatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        #{status,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.mt.pm.common.model.PmPg">
    update pm_pg
    <set>
      <if test="pgId != null">
        pg_id = #{pgId,jdbcType=BIGINT},
      </if>
      <if test="pgName != null">
        pg_name = #{pgName,jdbcType=VARCHAR},
      </if>
      <if test="pgDesc != null">
        pg_desc = #{pgDesc,jdbcType=VARCHAR},
      </if>
      <if test="pgType != null">
        pg_type = #{pgType,jdbcType=CHAR},
      </if>
      <if test="stdUnit != null">
        std_unit = #{stdUnit,jdbcType=VARCHAR},
      </if>
      <if test="assignToDevice != null">
        assign_to_device = #{assignToDevice,jdbcType=CHAR},
      </if>
      <if test="calendarId != null">
        calendar_id = #{calendarId,jdbcType=INTEGER},
      </if>
      <if test="calendarName != null">
        calendar_name = #{calendarName,jdbcType=VARCHAR},
      </if>
      <if test="labourRatio != null">
        labour_ratio = #{labourRatio,jdbcType=DECIMAL},
      </if>
      <if test="startTime != null">
        start_time = #{startTime,jdbcType=VARCHAR},
      </if>
      <if test="endTime != null">
        end_time = #{endTime,jdbcType=VARCHAR},
      </if>
      <if test="restLength != null">
        rest_length = #{restLength,jdbcType=DECIMAL},
      </if>
      <if test="capaRatio != null">
        capa_ratio = #{capaRatio,jdbcType=DECIMAL},
      </if>
      <if test="overloadRatio != null">
        overload_ratio = #{overloadRatio,jdbcType=DECIMAL},
      </if>
      <if test="transLength != null">
        trans_length = #{transLength,jdbcType=DECIMAL},
      </if>
      <if test="queueLength != null">
        queue_length = #{queueLength,jdbcType=DECIMAL},
      </if>
      <if test="availStatus != null">
        avail_status = #{availStatus,jdbcType=CHAR},
      </if>
      <if test="workshopId != null">
        workshop_id = #{workshopId,jdbcType=BIGINT},
      </if>
      <if test="pgPic != null">
        pg_pic = #{pgPic,jdbcType=VARCHAR},
      </if>
      <if test="dayHours != null">
        day_hours = #{dayHours,jdbcType=DECIMAL},
      </if>
      <if test="sort != null">
        sort = #{sort,jdbcType=DECIMAL},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="handlerId != null">
        handler_id = #{handlerId,jdbcType=BIGINT},
      </if>
      <if test="createdAt != null">
        created_at = #{createdAt,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedAt != null">
        updated_at = #{updatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=CHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.mt.pm.common.model.PmPg">
    update pm_pg
    set pg_id = #{pgId,jdbcType=BIGINT},
    pg_name = #{pgName,jdbcType=VARCHAR},
    pg_desc = #{pgDesc,jdbcType=VARCHAR},
    pg_type = #{pgType,jdbcType=CHAR},
    std_unit = #{stdUnit,jdbcType=VARCHAR},
    assign_to_device = #{assignToDevice,jdbcType=CHAR},
    calendar_id = #{calendarId,jdbcType=INTEGER},
    calendar_name = #{calendarName,jdbcType=VARCHAR},
    labour_ratio = #{labourRatio,jdbcType=DECIMAL},
    start_time = #{startTime,jdbcType=VARCHAR},
    end_time = #{endTime,jdbcType=VARCHAR},
    rest_length = #{restLength,jdbcType=DECIMAL},
    capa_ratio = #{capaRatio,jdbcType=DECIMAL},
    overload_ratio = #{overloadRatio,jdbcType=DECIMAL},
    trans_length = #{transLength,jdbcType=DECIMAL},
    queue_length = #{queueLength,jdbcType=DECIMAL},
    avail_status = #{availStatus,jdbcType=CHAR},
    workshop_id = #{workshopId,jdbcType=BIGINT},
    pg_pic = #{pgPic,jdbcType=VARCHAR},
    day_hours = #{dayHours,jdbcType=DECIMAL},
    sort = #{sort,jdbcType=DECIMAL},
    remark = #{remark,jdbcType=VARCHAR},
    handler_id = #{handlerId,jdbcType=BIGINT},
    created_at = #{createdAt,jdbcType=TIMESTAMP},
    updated_at = #{updatedAt,jdbcType=TIMESTAMP},
    status = #{status,jdbcType=CHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>


  <!--wendy添加-->
  <select id="selectProductionGroup"  resultType="map"  parameterType="map">
    SELECT pg.pg_type, pg.pg_desc, pg.pg_id, pg.pg_name, pg.status
    , pg.avail_status
    FROM pm_pg pg
    JOIN department dt ON pg.pg_id = dt.dep_id
    <where>
        <if test="all_upper_ids != null and all_upper_ids != ''">
            And  dt.all_upper_ids=#{all_upper_ids}
        </if>
        <if test="company_id != null and  company_id != ''">
            And dt.company_id=#{company_id}
        </if>
      And  pg.status=1  And  pg.avail_status=1
    </where>
    Limit #{page},#{page_size}
  </select>


  <select id="totalCount"  resultType="java.lang.Integer"  parameterType="map">
    SELECT COUNT(id)
    FROM pm_pg pg
    INNER JOIN department dt ON pg.pg_id = dt.dep_id
    <where>
      <if test="all_upper_ids != null and all_upper_ids != ''">
        And  dt.all_upper_ids=#{all_upper_ids}
      </if>
      <if test="company_id != null and company_id != ''">
        And dt.company_id=#{company_id}
      </if>
      And  pg.status=1  And  pg.avail_status=1
    </where>
  </select>


  <select id="selectProductionGroupInfo"  resultType="map"  parameterType="java.lang.Long">
      SELECT pg_id, pg_name
  FROM pm_pg
  WHERE pg_id = #{id}
      AND status = 1
  </select>



  <select id="selectProductionGroupDetail" resultType="map" parameterType="map">
     SELECT p.assign_to_device, p.avail_status, p.calendar_id, p.capa_ratio, p.day_hours
      , d.manager_name AS dep_admin, d.manager AS dep_admin_id, p.labour_ratio, overload_ratio, d.upper_id AS parent_dep_id
      , upper AS parent_dep_name, p.pg_desc, p.pg_id, p.pg_name, p.pg_pic
      , p.pg_type, p.queue_length, p.std_unit, p.trans_length, p.calendar_name
      , d.manager AS dep_admin_id, d.manager_name AS dep_admin
  FROM pm_pg p
      INNER JOIN department d ON p.pg_id = d.dep_id
  WHERE p.pg_id = #{pg_id}
      AND p.status = 1
  </select>




  <insert id="addProductionGroup" parameterType="map" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
  <selectKey resultType="int" order="AFTER" keyProperty="id">
    SELECT LAST_INSERT_ID() as id
  </selectKey>
    insert into pm_pg
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="pg_id != null and pg_id!=''" >
        pg_id,
      </if>
      <if test="pg_name != null and pg_name!=''" >
        pg_name,
      </if>
      <if test="is_need_elec != null and is_need_elec!=''" >
        is_need_elec,
      </if>
      <if test="pg_desc != null and pg_desc!=''" >
        pg_desc,
      </if>
      <if test="pg_type != null and pg_type!=''" >
        pg_type,
      </if>
      <if test="std_unit != null and std_unit!=''" >
        std_unit,
      </if>
      <if test="device_num != null and device_num!=''" >
        device_num,
      </if>
      <if test="assign_to_device != null and assign_to_device!=''" >
        assign_to_device,
      </if>
      <if test="calendar_id != null and calendar_id!=''" >
        calendar_id,
      </if>
      <if test="calendar_name != null and calendar_name!=''" >
        calendar_name,
      </if>
      <if test="labour_ratio != null and labour_ratio!=''" >
        labour_ratio,
      </if>
      <if test="start_time != null and start_time!=''" >
        start_time,
      </if>
      <if test="end_time != null and end_time!=''" >
        end_time,
      </if>
      <if test="rest_length != null and rest_length!=''" >
        rest_length,
      </if>
      <if test="capa_ratio != null and capa_ratio!=''" >
        capa_ratio,
      </if>
      <if test="overload_ratio != null and overload_ratio!=''" >
        overload_ratio,
      </if>
      <if test="trans_length != null and trans_length!=''" >
        trans_length,
      </if>
      <if test="queue_length != null and queue_length!=''" >
        queue_length,
      </if>
      <if test="avail_status != null and avail_status!=''" >
        avail_status,
      </if>
      <if test="workshop_id != null and workshop_id!=''" >
        workshop_id,
      </if>
      <if test="pg_pic != null and pg_pic!=''" >
        pg_pic,
      </if>
      <if test="working_proc_id != null and working_proc_id!=''" >
        working_proc_id,
      </if>
      <if test="default_proc_id != null and default_proc_id!=''" >
        default_proc_id,
      </if>
      <if test="day_hours != null and day_hours!=''" >
        day_hours,
      </if>
      <if test="sort != null and sort!=''" >
        sort,
      </if>
      <if test="remark != null and remark!=''" >
        remark,
      </if>
      <if test="handler_id != null and handler_id!=''" >
        handler_id,
      </if>
      <if test="created_at != null and created_at!=''" >
        created_at,
      </if>
      <if test="updated_at != null and updated_at!=''" >
        updated_at,
      </if>
      <if test="status != null and status!=''" >
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="pg_id != null and pg_id!=''" >
        #{pg_id,jdbcType=BIGINT},
      </if>
      <if test="pg_name != null and pg_name!=''" >
        #{pg_name,jdbcType=VARCHAR},
      </if>
      <if test="is_need_elec != null and is_need_elec!=''" >
        #{is_need_elec,jdbcType=CHAR},
      </if>
      <if test="pg_desc != null and pg_desc!=''" >
        #{pg_desc,jdbcType=VARCHAR},
      </if>
      <if test="pg_type != null and pg_type!=''" >
        #{pg_type,jdbcType=CHAR},
      </if>
      <if test="std_unit != null and std_unit!=''" >
        #{std_unit,jdbcType=VARCHAR},
      </if>
      <if test="device_num != null and device_num!=''" >
        #{device_num,jdbcType=SMALLINT},
      </if>
      <if test="assign_to_device != null and assign_to_device!=''" >
        #{assign_to_device,jdbcType=CHAR},
      </if>
      <if test="calendar_id != null and calendar_id!=''" >
        #{calendar_id,jdbcType=INTEGER},
      </if>
      <if test="calendar_name != null and calendar_name!=''" >
        #{calendar_name,jdbcType=VARCHAR},
      </if>
      <if test="labour_ratio != null and labour_ratio!=''" >
        #{labour_ratio,jdbcType=DECIMAL},
      </if>
      <if test="start_time != null and start_time!=''" >
        #{start_time,jdbcType=VARCHAR},
      </if>
      <if test="end_time != null and end_time!=''" >
        #{end_time,jdbcType=VARCHAR},
      </if>
      <if test="rest_length != null and rest_length!=''" >
        #{rest_length,jdbcType=DECIMAL},
      </if>
      <if test="capa_ratio != null and capa_ratio!=''" >
        #{capa_ratio,jdbcType=DECIMAL},
      </if>
      <if test="overload_ratio != null and overload_ratio!=''" >
        #{overload_ratio,jdbcType=DECIMAL},
      </if>
      <if test="trans_length != null and trans_length!=''" >
        #{trans_length,jdbcType=DECIMAL},
      </if>
      <if test="queue_length != null and queue_length!=''" >
        #{queue_length,jdbcType=DECIMAL},
      </if>
      <if test="avail_status != null and avail_status!=''" >
        #{avail_status,jdbcType=CHAR},
      </if>
      <if test="workshop_id != null and workshop_id!=''" >
        #{workshop_id,jdbcType=BIGINT},
      </if>
      <if test="pg_pic != null and pg_pic!=''" >
        #{pg_pic,jdbcType=VARCHAR},
      </if>
      <if test="working_proc_id != null and working_proc_id!=''" >
        #{working_proc_id,jdbcType=BIGINT},
      </if>
      <if test="default_proc_id != null and default_proc_id!=''" >
        #{default_proc_id,jdbcType=INTEGER},
      </if>
      <if test="day_hours != null and day_hours!=''" >
        #{day_hours,jdbcType=DECIMAL},
      </if>
      <if test="sort != null and sort!=''" >
        #{sort,jdbcType=DECIMAL},
      </if>
      <if test="remark != null and remark!=''" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="handler_id != null and handler_id!=''" >
        #{handler_id,jdbcType=BIGINT},
      </if>
      <if test="created_at != null and created_at!=''" >
        #{created_at,jdbcType=TIMESTAMP},
      </if>
      <if test="updated_at != null and updated_at!=''" >
        #{updated_at,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null and status!=''" >
        #{status,jdbcType=CHAR},
      </if>
    </trim>
  </insert>



  <update id="updateProductionGroupInfo" parameterType="Map" >
    update pm_pg
    <set >
      <if test="pg_id != null and pg_id!=''" >
        pg_id = #{pg_id,jdbcType=BIGINT},
      </if>
      <if test="pg_name != null and pg_name!=''" >
        pg_name = #{pg_name,jdbcType=VARCHAR},
      </if>
      <if test="is_need_elec != null and is_need_elec!=''" >
        is_need_elec = #{is_need_elec,jdbcType=CHAR},
      </if>
      <if test="pg_desc != null and pg_desc!=''" >
        pg_desc = #{pg_desc,jdbcType=VARCHAR},
      </if>
      <if test="pg_type != null and pg_type!=''" >
        pg_type = #{pg_type,jdbcType=CHAR},
      </if>
      <if test="std_unit != null and std_unit!=''" >
        std_unit = #{std_unit,jdbcType=VARCHAR},
      </if>
      <if test="device_num != null and device_num!=''" >
        device_num = #{device_num,jdbcType=SMALLINT},
      </if>
      <if test="assign_to_device != null and assign_to_device!=''" >
        assign_to_device = #{assign_to_device,jdbcType=CHAR},
      </if>
      <if test="calendar_id != null and calendar_id!=''" >
        calendar_id = #{calendar_id,jdbcType=INTEGER},
      </if>
      <if test="calendar_name != null and calendar_name!=''" >
        calendar_name = #{calendar_name,jdbcType=VARCHAR},
      </if>
      <if test="labour_ratio != null and labour_ratio!=''" >
        labour_ratio = #{labour_ratio,jdbcType=DECIMAL},
      </if>
      <if test="start_time != null and start_time!=''" >
        start_time = #{start_time,jdbcType=VARCHAR},
      </if>
      <if test="end_time != null and end_time!=''" >
        end_time = #{end_time,jdbcType=VARCHAR},
      </if>
      <if test="rest_length != null and rest_length!=''" >
        rest_length = #{rest_length,jdbcType=DECIMAL},
      </if>
      <if test="capa_ratio != null and capa_ratio!=''" >
        capa_ratio = #{capa_ratio,jdbcType=DECIMAL},
      </if>
      <if test="overload_ratio != null and overload_ratio!=''" >
        overload_ratio = #{overload_ratio,jdbcType=DECIMAL},
      </if>
      <if test="trans_length != null and trans_length!=''" >
        trans_length = #{trans_length,jdbcType=DECIMAL},
      </if>
      <if test="queue_length != null and queue_length!=''" >
        queue_length = #{queue_length,jdbcType=DECIMAL},
      </if>
      <if test="avail_status != null and avail_status!=''" >
        avail_status = #{avail_status,jdbcType=CHAR},
      </if>
      <if test="workshop_id != null and workshop_id!=''" >
        workshop_id = #{workshop_id,jdbcType=BIGINT},
      </if>
      <if test="pg_pic != null and pg_pic!=''" >
        pg_pic = #{pg_pic,jdbcType=VARCHAR},
      </if>
      <if test="working_proc_id != null and working_proc_id!=''" >
        working_proc_id = #{working_proc_id,jdbcType=BIGINT},
      </if>
      <if test="default_proc_id != null and default_proc_id!=''" >
        default_proc_id = #{default_proc_id,jdbcType=INTEGER},
      </if>
      <if test="day_hours != null and day_hours!=''" >
        day_hours = #{day_hours,jdbcType=DECIMAL},
      </if>
      <if test="sort != null and sort!=''" >
        sort = #{sort,jdbcType=DECIMAL},
      </if>
      <if test="remark != null and remark!=''" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="handler_id != null and handler_id!=''" >
        handler_id = #{handler_id,jdbcType=BIGINT},
      </if>
      <if test="created_at != null and created_at!=''" >
        created_at = #{created_at,jdbcType=TIMESTAMP},
      </if>
      <if test="updated_at != null and updated_at!=''" >
        updated_at = #{updated_at,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null and status!=''" >
        status = #{status,jdbcType=CHAR},
      </if>
    </set>
    where pg_id = #{pg_id,jdbcType=BIGINT}
  </update>

  <select id="selectByPgId" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    from pm_pg
    where pg_id = #{pgId}
  </select>

  <select id="selectByMemberId" resultMap="BaseResultMap">
    select distinct
    <include refid="Base_Column_List" />
    from pm_pg
    where status = 1
    and avail_status = 1
    and exists(select 1 from department where company_id = #{companyId} and dep_id = pm_pg.pg_id)
    and exists(select 1 from pm_pg_member where member_id = #{memberId} and pg_id = pm_pg.pg_id)
  </select>

</mapper>